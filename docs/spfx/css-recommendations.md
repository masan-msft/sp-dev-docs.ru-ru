---
title: "Рекомендации по работе с CSS в решениях SharePoint Framework"
ms.date: 09/25/2017
ms.prod: sharepoint
ms.openlocfilehash: c55b5362b4a1426c44cc0e7c53eacfe08982de64
ms.sourcegitcommit: 3276e9b281b227fb2f1a131ab4ac54ae212ce5cf
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/24/2017
---
# <a name="recommendations-for-working-with-css-in-sharepoint-framework-solutions"></a>Рекомендации по работе с CSS в решениях SharePoint Framework

При создании решений SharePoint Framework можно использовать CSS для определения внешнего вида и функционала вашей настройки. Эта статья описывает, как лучше всего использовать возможности SharePoint Framework и легко создавать стили CSS.

## <a name="sharepoint-framework-customizations-are-part-of-the-page"></a>Настройка SharePoint Framework является частью страницы

При создании настроек SharePoint с использованием модели надстройки решение изолируется от других элементов на странице. Вне зависимости от того, выполняется ли код в iframe в качестве надстройки либо как иммерсивное приложение, контролирующее всю страницу, на него не влияют другие элементы и стили, определенные на странице.

Решения SharePoint Framework являются частью страницы и полностью интегрируются с моделью DOM этой страницы. И хотя это устраняет ряд ограничений, сопровождающих модель надстройки, ваше решение подвергается риску. Если эта часть страницы не будет явно изолирована, к ней будут применяться все стили CSS, присутствующие на странице, что потенциально может привести к нежелательным результатам. Чтобы избежать таких рисков, нужно определить свои стили CSS таким образом, чтобы они не влияли ни на что другое на странице, кроме вашей настройки.

## <a name="organize-css-files-in-your-solution"></a>Организация файлов CSS в вашем решении

Пользовательский интерфейс решений часто состоит из нескольких стандартных блоков. Во многих библиотеках JavaScript эти стандартные блоки называются компонентами. Компонент может быть простым и определять только представление, либо он может быть более сложным и включать состояние и другие компоненты. Разделение решения на несколько компонентов позволяет упростить процесс разработки и облегчает их тестирование и повторное использование в решении.

Поскольку компоненты определяют представление, часто возникает потребность в стилях CSS. В идеале компоненты должны быть изолированы, чтобы их можно было использовать отдельно. Поэтому следует хранить стили CSS для конкретного компонента и все другие файлы активов вместе с компонентом. Ниже приведен пример структуры приложения React с несколькими компонентами вместе с их файлами CSS.

```text
todoWebPart\components
                      \todoList
                               \todoList.tsx
                               \todoList.module.scss
                      \todoItem
                               \todoItem.tsx
                               \todoItem.module.scss
```

## <a name="use-sass"></a>Использование SASS

В SharePoint Framework можно использовать и CSS, и SASS. SASS — это надмножество CSS, предлагающее ряд функций, таких как использование переменных, вставки селекторов или использование примесей — все это упрощает работу со стилями CSS и управление ими в долгосрочной перспективе. Полный набор функций см. на веб-сайте [SASS](http://sass-lang.com). Весь действующий CSS также является действительным SASS, что очень полезно, если вы еще не работали с SASS раньше и хотите постепенно изучить его возможности.

## <a name="avoid-using-ids-in-markup"></a>Избегайте использования ИД в исправлениях

Используя SharePoint Framework, вы создаете настройки, которые конечные пользователи добавляют в SharePoint. Невозможно предугадать, сколько раз конкретная настройка будет использоваться на странице. Чтобы избежать проблем, важно всегда предполагать, что на одной странице есть несколько экземпляров вашей настройки. Имея это в виду, следует избегать использования любых ИД в исправлениях. ИД на странице должны быть уникальными, и если пользователь дважды добавит веб-часть на страницу, тем самым он нарушит эту предпосылку, что может привести к ошибкам.

**Не рекомендуем:**

```ts
// ...

export default class HelloWorldWebPart extends BaseClientSideWebPart<IHelloWorldWebPartProps> {

  public render(): void {
    this.domElement.innerHTML = `
      <div id="helloWorld">
        Hello world
      </div>`;
  }

  // ...
}
```

**Рекомендуем:**

```ts
// ...

export default class HelloWorldWebPart extends BaseClientSideWebPart<IHelloWorldWebPartProps> {

  public render(): void {
    this.domElement.innerHTML = `
      <div class="${styles.helloWorld}">
        Hello world
      </div>`;
  }

  // ...
}
```

## <a name="use-css-modules-to-avoid-styling-conflicts"></a>Использование CSS-модулей для избежания конфликтов стилей

Решения SharePoint Framework являются частью страницы. Чтобы стили CSS для одного компонента не влияли на другие элементы на странице, нужно определить селекторы CSS таким образом, чтобы они применялись только к модели DOM вашего решения. Делать это вручную утомительно и потенциально подвержено ошибкам, но SharePoint Framework может сделать это для вас автоматически.

Чтобы избежать конфликтов стилей, SharePoint Framework использует [модули CSS](https://github.com/css-modules/css-modules). При создании проекта цепочка инструментов SharePoint Framework обрабатывает все файлы с расширением **.module.scss**. Для каждого файла SharePoint Framework считывает все селекторы классов и добавляет к ним уникальное хэш-значение. После этого он записывает обновленные селекторы в промежуточные файлы CSS, которые включены в сгенерированный пакет веб-частей.

Следуя приведенному выше примеру, предположим, что имеются следующие два файла SASS:

**todoList.module.scss:**

```scss
.todoList {
  margin: 1em 0;

  .text {
    font-weight: bold;
    font-size: 1.5em;
  }
}
```

**todoItem.module.scss:**

```scss
.todoItem {
  padding: 0.5em 1em;

  .text {
    font-size: 0.9em;
  }
}
```

После создания проекта в папке **lib** появится два созданных файла CSS, представленных ниже (разрывы строк и отступы добавлены для лучшей читаемости):

**todoList.module.css:**

```css
.todoList_3e9d35f0 {
  margin:1em 0
}

.todoList_3e9d35f0 .text_3e9d35f0 {
  font-weight:700;
  font-size:1.5em
}
```

**todoItem.module.css:**

```css
.todoItem_f7081cc4 {
  padding:.5em 1em
}

.todoItem_f7081cc4 .text_f7081cc4 {
  font-size:.9em
}
```

Несмотря на то что в обоих файлах SASS был определен класс **.text**, в созданных файлах CSS к нему добавлены к нему два разных хэша, что делает его уникальным именем класса, характерным для каждого компонента.

Имена классов CSS в модулях CSS генерируются динамически, что делает невозможным непосредственное обращение к ним в коде. Вместо этого при обработке модулей CSS цепочка инструментов SharePoint Framework генерирует файл JavaScript со ссылками на сгенерированные имена классов.

**todoList.module.scss.js:**

```js
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/* tslint:disable */
require('./todoList.module.css');
var styles = {
    todoList: 'todoList_3e9d35f0',
    text: 'text_3e9d35f0',
};
exports.default = styles;
/* tslint:enable */

//# sourceMappingURL=todoList.module.scss.js.map
```

Чтобы использовать сгенерированные имена классов в вашем коде, сначала импортируйте стили своего компонента, а затем используйте свойство, указывающее на конкретный класс.

```ts
import styles from './todoList.module.scss';
// ...

export default class TodoList extends React.Component<ITodoListProps, void> {
  public render(): React.ReactElement<ITodoListProps> {
    return (
      <div className={styles.todoList}>
        <div className={styles.text}>Hello world</div>
      </div>
    );
  }
}
```

Для правильной работы модулей CSS вам необходимо выполнить следующие условия:

* Файлы SASS должны иметь расширение **.module.scss**. При использовании расширения **.scss** без **.module** в процессе сборки вы увидите предупреждение. Файл SASS будет передан в промежуточный файл CSS, но имена классов **не будут уникальными**. Этот сценарий можно выбрать, если необходимо переопределить сторонние стили CSS.
* Имена классов CSS должны быть действительными именами переменных JavaScript. Например, они не могут содержать дефисы: `todoList` — правильно, а `todo-list` — неправильно.
* Рекомендуем указывать наименования camelCase для классов, но это не обязательно.

## <a name="wrap-your-css-styles-in-a-class-named-after-the-component"></a>Перенос стилей CSS в класс, названный именем компонента

Объединив модули CSS с поддержкой SASS наборов правил вложения, можно упростить стили CSS и убедиться, что они не повлияют на другие элементы на странице.

При создании стилей CSS для компонента перенесите их в класс с именем компонента. Затем назначьте этот класс корневому элементу компонента.

**todoList.module.scss:**

```scss
.todoList {
  a {
    display: block;
  }
}
```

**TodoList.tsx:**

```tsx
// ...

export default class TodoList extends React.Component<ITodoListProps, void> {
  public render(): React.ReactElement<ITodoListProps> {
    return (
      <div className={styles.todoList}>
        ...
      </div>
    );
  }
}
```

Ниже представлен примерный вид созданного файла CSS после транспиляции:

```css
.todoList_3e9d35f0 a {
  display: block;
}
```

Поскольку селектор начинается с уникального имени класса, специфичного для компонента, альтернативная презентация будет применяться только к гиперссылкам внутри компонента.

## <a name="integrate-office-ui-fabric"></a>Интеграция с Office UI Fabric

Если ваши настройки будут выглядеть и действовать как стандартные функции SharePoint и Office 365, конечным пользователям будет удобнее с ними работать. В Office UI Fabric вы найдете набор элементов управления и стилей, при использовании которых ваши настройки будут идеально вписываться в существующий интерфейс. Дополнительные сведения об использовании Office UI Fabric в SharePoint Framework см. в [руководстве по интеграции Office UI Fabric](office-ui-fabric-integration.md).

## <a name="use-theme-colors"></a>Использование цветов темы

SharePoint дает пользователям возможность выбирать цвет темы для своих сайтов. В настройках SharePoint Framework нужно следовать теме, выбранной пользователями, чтобы настройка выглядела как неотъемлемая часть сайта и излишне не выделялась. Поскольку тема задана пользователями на их сайте, невозможно предугадать, какие цвета вам следует использовать в настройках, но SharePoint Framework может быстро загружать для вас текущую активную цветовую схему автоматически. Для получения дополнительной информации об этой возможности см. [руководство по использованию цветов темы](./use-theme-colors-in-your-customizations.md).

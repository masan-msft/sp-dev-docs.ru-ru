# <a name="deploy-your-client-side-web-part-to-a-sharepoint-page-hello-world-part-3"></a>Развертывание клиентской веб-части на странице SharePoint (Hello World, часть 3)

Из этой статьи вы узнаете, как развернуть клиентскую веб-часть в SharePoint и проверить ее работу на современной серверной странице SharePoint. В этой статье рассматривается веб-часть Hello World, создание которой описано в предыдущей статье, [Подключение клиентской веб-части к SharePoint](./connect-to-sharepoint).

Перед началом работы убедитесь, что вы выполнили процедуры, описанные в предыдущих статьях:

* [Создание первой клиентской веб-части SharePoint](./build-a-hello-world-web-part)
* [Подключение клиентской веб-части к SharePoint](./connect-to-sharepoint)

Эти инструкции также изложены в видео на [канале SharePoint PnP в YouTube](https://www.youtube.com/watch?v=asmQIfgaKSw&list=PLR9nK3mnD-OXvSWvS2zglCzz4iplhVrKq). 

<a href="https://www.youtube.com/watch?v=asmQIfgaKSw&list=PLR9nK3mnD-OXvSWvS2zglCzz4iplhVrKq">
<img src="../../../../images/spfx-youtube-tutorial3.png" alt="Screenshot of the YouTube video player for this tutorial" />
</a>


## <a name="package-the-helloworld-web-part"></a>Упаковка веб-части HelloWorld

В окне консоли перейдите к каталогу проекта веб-части, создание которого описывается в статье [Создание первой клиентской веб-части SharePoint](./build-a-hello-world-web-part).

```
cd helloworld-webpart
```

Если команда `gulp serve` все еще выполняется, остановите ее с помощью клавиш `Ctrl+C`.

В отличие от среды разработки, для использования клиентской веб-части на современных серверных страницах SharePoint ее необходимо развернуть и зарегистрировать в SharePoint. Для начала необходимо упаковать веб-часть.

Откройте проект веб-части **HelloWorldWebPart** в Visual Studio Code или другой предпочитаемой IDE.

Откройте файл **package-solution.json** в папке **config**.

В файле **package-solution.json** определяются метаданные пакета, как показано в следующем фрагменте кода:

```json
{
    "solution": {
        "name": "helloworld-webpart-client-side-solution",
        "id": "ed83e452-2286-4ea0-8f98-c79d257acea5",
        "version": "1.0.0.0"
    },
    "paths": {
        "zippedPackage": "solution/helloworld-webpart.sppkg"
    }
}
```

Чтобы упаковать клиентское решение, содержащее веб-часть, введите в окне консоли следующую команду:

```
gulp package-solution
```

Эта команда создаст пакет в папке `sharepoint/solution`:

```
helloworld-webpart.sppkg
```

### <a name="package-contents"></a>Содержимое пакета

Чтобы упаковать веб-часть, пакет использует компонент SharePoint. По умолчанию задача gulp создает следующие элементы:

* Компонент веб-части.

Вы можете просмотреть необработанное содержимое пакета в папке **sharepoint/debug**. 

Затем содержимое упаковывается в **SPPKG**-файл. Формат пакета во многом аналогичен пакетам надстроек SharePoint. Для упаковки решения используются Microsoft Open Packaging Conventions. 

Файлы JavaScript, CSS и другие активы не упаковываются. Их потребуется развернуть во внешнем расположении, например в сети CDN. Для тестирования веб-части во время разработки можно загрузить все активы с локального компьютера. 

## <a name="deploy-the-helloworld-package-to-app-catalog"></a>Развертывание пакета HelloWorld в каталоге приложений

Далее вам потребуется развернуть созданный пакет в каталоге приложений.

Перейдите к каталогу приложений вашего сайта.

Отправьте или перетащите файл **helloworld-webpart.sppkg** в каталог приложений.

![Отправка решения в каталог приложений](../../../../images/upload-solution-app-catalog.png) 

При этом будет развернут пакет клиентского решения. Так как это клиентское решение с полным доверием, в SharePoint появится диалоговое окно с предложением разрешить развертывание клиентского решения.

![Доверие развертыванию клиентского решения](../../../../images/sp-app-deploy-trust.png) 
    
Нажмите кнопку **Развернуть**

## <a name="install-the-client-side-solution-on-your-site"></a>Установка клиентского решения на сайте

Перейдите к семейству сайтов разработчиков.

Нажмите значок шестеренки на верхней панели навигации справа и выберите команду **Добавить приложение**, чтобы перейти к странице "Приложения".

В **поле поиска** введите **helloworld** и нажмите клавишу **ВВОД**, чтобы отфильтровать приложения.
    
![Добавление приложения на сайт](../../../../images/install-app-your-site.png) 
    
Выберите приложение **helloworld-webpart-client-side-solution**, чтобы установить его на сайте.
    
![Доверие приложению](../../../../images/app-installed-your-site.png) 

Теперь клиентское решение и веб-часть установлены на сайте разработчика.

На странице **Содержимое сайта** отображается состояние установки клиентского решения. Прежде чем переходить к следующему шагу, убедитесь, что установка завершена.

## <a name="preview-the-web-part-in-a-sharepoint-page"></a>Предварительный просмотр веб-части на странице SharePoint

Теперь, когда вы развернули и установили клиентское решение, добавьте веб-части на страницу SharePoint. Помните, что такие ресурсы, как файлы JavaScript и CSS, доступны с локального компьютера.

Откройте файл **<GUID_веб-части>.manifest.json** в папке **\dist**.
    
Обратите внимание, что свойство **internalModuleBaseUrls** в разделе **loaderConfig** по-прежнему указывает на локальный компьютер:

```json
"internalModuleBaseUrls": [
    "https://`your-local-machine-name`:4321/"
]
```

Прежде чем добавлять веб-часть на серверную страницу SharePoint, запустите локальный сервер.
    
В окне консоли с каталогом проекта **helloworld-webpart** выполните задачу gulp, чтобы начать обслуживание с localhost:
    
```
gulp serve --nobrowser
```

>**Примечание.** SharePoint Workbench не запускается автоматически при использовании `--nobrowser`.

## <a name="add-the-helloworld-web-part-to-modern-page"></a>Добавление веб-части HelloWorld на современную страницу

Перейдите к семейству веб-сайтов в браузере.
    
Нажмите значок шестеренки на верхней панели навигации справа и выберите **Добавить страницу**.
    
Откройте средство выбора веб-частей и выберите веб-часть **HelloWorld**.
        
Активы веб-части будут загружены из локальной среды. Чтобы загрузить сценарии, размещенные на локальном компьютере, необходимо разрешить в браузере выполнение небезопасных сценариев. Убедитесь, что в вашем браузере включено выполнение небезопасных сценариев для данного сеанса.
    
Должна появиться веб-часть **HelloWorld**, создание которой описано в предыдущей статье, получающая списки с текущего сайта. 

![Веб-часть Hello World на современной странице](../../../../images/sp-wp-modern-page.png)

## <a name="edit-web-part-properties"></a>Изменение свойств веб-части

Нажмите значок **Настроить элемент** (перо) в веб-части, чтобы открыть область свойств.

![Изменение веб-части](../../../../images/edit-webpart-modern-page.png)

Это та же область свойств, которую вы создали и проверили в среде разработки проектов.
    
Измените свойство **Description** (Описание), указав текст **Client-side web parts are awesome!** (Клиентские веб-части — это круто).
    
![Веб-часть Hello World на современной странице](../../../../images/sp-wp-modern-page-pp.png)

Обратите внимание, что веб-часть обновляется по мере ввода текста, как и на реактивной панели.
    
Нажмите значок **x**, чтобы закрыть клиентскую область свойств.
        
На панели инструментов выберите **Сохранить и закрыть**, чтобы сохранить страницу.

## <a name="next-steps"></a>Дальнейшие действия

Поздравляем! Вы развернули клиентскую веб-часть на современной странице SharePoint. Вы можете продолжить разработку веб-части Hello World, прочитав следующую статью — [Развертывание источника клиентской веб-части в CDN](./deploy-web-part-to-cdn). Из нее вы узнаете, как развернуть и загрузить ресурсы веб-части из сети CDN, а не из localhost.

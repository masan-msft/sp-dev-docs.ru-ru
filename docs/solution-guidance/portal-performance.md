---
title: "Используйте проверенные методы для порталов SharePoint Online - производительности"
ms.date: 11/03/2017
ms.openlocfilehash: cdbbe4e851e1a6e4e4fc625c071721642aeb3a69
ms.sourcegitcommit: b05e9f1edb1a23b07b7986655fac92c24dd62f5a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/15/2017
---
# <a name="proven-practices-for-sharepoint-online-portals---performance"></a>Используйте проверенные методы для порталов SharePoint Online - производительности

Каждые портала разработки включает в себя по крайней мере одно из свойств, который требуется настройка SharePoint. Модель настройки для порталов SharePoint Online — модель надстройки SharePoint или среды SharePoint. Эти сущности используют распределенной архитектуре приложения, могут охватывать несколько среды выполнения: SharePoint Online, Web Hoster(s), поставщики службы и в клиентском браузере. Эта архитектура объявлено в концепцию запросы данных клиента на сервер.

Реализация настроек в SharePoint Online в общем помещает еще больше уделяется эффективного проектирования и разработки для веб-приложений и клиентских веб-приложений в частности, особенно при отношении концепция приложения производительность.

>**Примечание**: несмотря на то, что данное руководство в первую очередь относится SharePoint Online, большая часть он также распространяется на порталов, размещенных в локальной среде SharePoint.

_**Применимо к:** SharePoint Online_

## <a name="anti-patterns-in-other-words-dont-do-these-things"></a>Защита от шаблонов (иными словами, не выполнить эти действия)
<a name="bk_antiPatterns"> </a>

Если вы хотите проблем с производительностью с помощью SharePoint в целом и настраиваемые портала, в частности, рассмотрите следующие защиты от шаблона:

- Создание пользовательских элементов управления со стороны клиента, которые может запросы данных со стороны клиента для SharePoint и добавьте десяти или более элементов на страницу
- Применить к элементам управления со стороны клиента без данных централизованного доступа к данным SharePoint, чтобы множество элементов управления запрашиваете те же данные, несколько раз в страницу
- Внедрение избыточных настраиваемый JavaScript и CSS в теле страницы
- Внедрить несколько эскизов в теле страницы 10 МБ
- Выполнение запросов на всех клиентских данных во время загрузки страницы, даже в том случае, если данные не требуется/отображаются, даже в том случае, если они никогда не может использоваться
- Вставить ненужных порядке зависимости в данные запроса последовательность и использовать **синхронные** запросы данных, чтобы гарантировать порядок выполнения
- Используйте устаревших веб-службы списков SharePoint (SOAP), как данные запроса API выбора и передайте его плохо формирования запросов CAML (en)
- Избегайте кэширование данных ответов (особенно для статических данных) на клиента, чтобы гарантировать, что каждого запроса данных повторно выполняется на каждом загрузки страницы
- Выполнение сотни обновлений к модели объектов документа (DOM) на странице как выполняется каждый отклик данных, даже в том случае, если они являются избыточными или конфликтующие

## <a name="introduction"></a>Введение
<a name="bk_introduction"> </a>

SharePoint Online модель настройки развивалась из модели классического, на стороне сервера, где пользовательский код выполняется на сервере и выполняет запросы данных на сервере в модель современный, на стороне клиента с пользовательского кода запускается удаленно, выполняет со стороны клиента запросы данных.  Архитектура природные решение для этой модели является распределенной клиентские веб-приложения.

Вследствие модели распределенных веб-клиентские приложения, помимо увеличение присущи сложности новых пользовательских решений, — это значительное увеличение в клиент сервер сетевого трафика, связанного с нового настраиваемого решения и более поздних версий зависимость от среды выполнения со стороны клиента.

Рассмотрим следующие сравнения последовательность загрузки страницы, связанные с каждой модели веб-приложения.

### <a name="classic-server-side-web-application-sequence"></a>Последовательность классический серверном веб-приложения

- Сначала посетите страницу
    - запрос страницы проблемы
    - запросы файла ресурсов (ноль или больше)
    - выполнение кода JavaScript
- Возврат посетить страницу
    - запрос страницы проблемы
    - выполнение кода JavaScript

### <a name="modern-client-side-web-application-sequence"></a>Последовательность современных web клиентские приложения

- Сначала посетите страницу
    - запрос страницы проблемы
    - запросы файла ресурсов (ноль или больше)
    - выполнение кода JavaScript
    - запросы данных (ноль или больше)
    - выполняет все больше JavaScript
- Возврат посетить страницу
    - запрос страницы проблемы
    - выполнение кода JavaScript
    - запросы данных (ноль или больше)
    - выполняет все больше JavaScript

Сетевой монитор покажет, что современных веб-странице можно легко увеличивает порядке величины сетевого трафика по сравнению с, классический веб-страницы. Выполнение на основе браузера профилировщика также будут показаны современных веб-страницы на наличие более зависимостью от выполнения JavaScript на стороне клиента.  Конечно, эти увеличения являются функции разработки и реализации новое решение, но вероятность значительное увеличение высокой.

## <a name="general-performance-guidelines-for-client-side-web-applications"></a>Общие рекомендации по производительности для клиентских веб-приложений
<a name="bk_performanceGuidelines"> </a>

После фиксации Создание настраиваемых веб-клиентские приложения:

- Подтвердить, что вы являетесь теперь ответственность за производительность клиентские приложения
- Подтвердить, что преимущества на сервере воспроизведения и кэширование больше недоступны для пользовательских элементов управления
- Понять, что приложение должно предоставлять теперь эквивалентами высокопроизводительных, со стороны клиента

>**С точки зрения производительности**: задача с современных веб-приложений в общие и клиентских веб-приложений в частности, — для реализации со стороны клиента логику, необходимую для имитации return наблюдаемой для *минимальной сетевого трафика шаблонов *посещает классический веб-страниц.

В следующих разделах представлены рекомендации по производительности для достижения поставленной цели.

### <a name="telemetry"></a>Телеметрии
<a name="bk_Telemetry"> </a>

Производительность часто отображаются в Субъективная термины с точки зрения конечных пользователей. Тем не менее довольно сложно точно решения проблем, такие как «портала медленная».  Для количественной оценки проблем производительности, очень важно для получения цели метрики для клиентских веб-приложения.

Проектирование и разработка клиентских веб-приложения должен включать телеметрии, чтобы установить базовые показатели производительности и постоянный мониторинг производительности времени выполнения приложения.

Например, собирать показатели приложения важные сведения:

- Время инициализации приложения
- Страница загружается, временные показатели (как правило и для определенных страниц)
- Синхронизация со стороны клиента (в целом и для конкретных действий)
- Внешний запрос и ответ времени (например, SharePoint вызовов REST, службы сторонних производителей, и т.д.)
- Время выполнения поиска
- Страница событий
- Элемент управления (то есть, пользователь) действия на уровне появление
- Появление исключения (например, не удалось выполнить запрос данных, запрос данных ограничением, и т.д.)

Определения базового объективные производительности со стороны клиента веб-приложения и использование этого базового для проверки настройки начальной проектных решений.  После развертывания приложения мониторинга производительности системы и использовать показатели для выявления и устранения проблем, которые могут возникнуть.

Следует [Полезные сведения о приложении Azure](https://azure.microsoft.com/en-us/blog/understand-your-sharepoint-usage-with-application-insights-2/), содержащей модуль JavaScript, которая позволяет легко добавлять телеметрии для любого клиентские веб-приложения. Также можно создать собственную службу серверной телеметрии, но знать, что хранения данных телеметрии, данные в SharePoint, вообще не рекомендуется как, который может отрицательно сказаться на производительности портала.

### <a name="client-browser"></a>Обозреватель клиента
<a name="bk_clientBrowser"> </a>

В клиентском браузере можно оказывают значительное влияние на производительность со стороны клиента веб-приложения с точки зрения фактическую производительность и доступные функции.

Как правило должен быть ориентирован самую актуальную версию современных обозревателей, совместимых с рабочего стола операционной системы. 

Чаще всего для крупных предприятий иметь по крайней мере один веб бизнес (LOB) приложения, по-прежнему требуется использовать прежних версий браузеров. Тем не менее это ограничение не следует мешать прямого ход выполнения новых веб-приложений. Разработка новых веб-клиентских приложений для использования преимуществ повышения производительности и функциональные возможности современных браузеров.  При работе с ограничением прежних версий браузеров:

- Требования к браузеру прежних версий считать исключения; Анализ совокупной стоимости разрешении исключения
- К снижению или отключить современных функциональные возможности в новом приложении при обнаружении прежних версий браузера во время выполнения
- Подумайте об использовании устаревшего браузера только для ограниченного бизнес-приложения; Используйте современном браузера для всего остального, включая новые веб-клиентские приложения

Обратитесь к статье [Поддержка браузеров в Office 365](https://support.office.com/en-us/article/Office-Online-browser-support-AD1303E0-A318-47AA-B409-D3A5EB44E452) для последних требования к браузеру Office 365.

### <a name="client-environment-and-network-topology"></a>Клиентская среда и топология сети
<a name="bk_clientEnvironment"> </a>

Клиентская среда и топология сети, подключение клиента к серверу можно оказывают значительное влияние на производительность клиентских веб-приложений.

В сценарии с идеальным клиентская среда включает в себя актуальных клиентских компьютеров, выполняющих современных браузеров и подключен к серверу через сети, в которой имеется достаточно пропускной способности и минимизировать задержки. На самом деле можно столкнуться со сценарием менее чем идеально подходит и веб-приложения могут отсутствовать политических валюты, необходимые для изменения интерпретации диска. Таким образом варьировать первоначальной разработки со стороны клиента веб-приложение для придерживаться ограничений этот параметр указан, план необходимо воспользоваться преимуществами повышение среде клиентов, как они развернуты. В этом случае в конечном счете возникнет сочетание машин таким образом Убедитесь, что клиентские веб-приложения можно обнаруживать возможности клиента во время выполнения и соответственно изменить поведение клиента.

Обратитесь к статье [Office 365 сети планирование и настройка производительности](https://support.office.com/en-us/article/Network-planning-and-performance-tuning-for-Office-365-e5f1228c-da3c-4654-bf16-d163daee8848) руководство по планированию производительности сети.

### <a name="data-request-patterns"></a>Шаблоны запроса данных
<a name="bk_dataRequestPatterns"> </a>

Правильного управления трафик запросов данных со стороны клиента для повышения производительности настраиваемых клиентские веб-приложения.  В данном контексте основной целью должны быть минимизировать и оптимизации запросов клиента на сервер данных, которые требуются приложению.

Используйте intelligent загрузки шаблона данных управлять запросов для данных (из сервера или любого другого источника данных):

- Отложите запрос данных, то же время, по мере возможности (то есть отложенная загрузка)
- Запрашивать данные только в том случае, если и когда это действительно необходимо; Например, как и в ответ на события или пользователя действия браузера
    - Например не запрашиваются данные для свернуты скрытый элемент управления; Подождите, пока элемент управления развернут визуализации

Использование клиентского кэша для выполнения всех запросов данных:
 
- Обратитесь к локального кэша данных перед отправкой запроса данных на сервер
- Возврат кэшированные данные, если он существует, но еще не истек срок действия (например, от попадания в кэш)

Только происходит, когда кэш пропуска вызовов сервер (или другой источник данных):

- Выбор новых данных с помощью асинхронного вызова AJAX (никогда не использования синхронный вызов AJAX)
- Возвращает данные устарели (по умолчанию), если не удается выполнить запрос к новым данным
- Необходимо учитывать презентацию индикатор хода выполнения во время вызова высоким уровнем задержки полетов

Синтаксический анализ данных ответа: 

- Удалять все уровни упаковки отдельного запроса из ответа
- Извлечение результатов **основных** данных и преобразование в представление JSON минимальной, зависящего от запроса:
    - Минимальная представление требует меньше хранения в кэше (ограниченный) со стороны клиента
    - Представление зависящего от запроса отделяет данные из его семантика данных источника и запросов
        - Это позволяет легко изменить источник данных (static, макеты, live) мере разработки решения 
    - JSON позволяет использовать объекты JavaScript, к которым можно легко привязать пользовательских клиентских элементов управления
        - Это также служит для определения контракта рабочих данных между группами взаимодействия с пользователями и данных

Хранилище данных ответа в кэше со стороны клиента: 

- Сохранять представление JSON ответа данные в локальном кэше данных (например, веб-хранилища)
    - Использовать кэш public (то есть, локальное хранилище) для общих данных (например, глобального меню)
    - Использовать кэш private (то есть, сеанс хранилища) для персональных данных (например, ценные)
- Использовать значения конкретного компонента истечение срока действия, созданных с помощью изменчивость связанных данных
    - например данных глобального меню (30 минут), символ акции данных (5 минут), и т.д.
- Нет «результаты» — это ответ допустимых данных; Убедитесь, что также сохранение
- Убедитесь, что кэшированные данные доступны на всех страницах и компоненты со стороны клиента веб-приложения

Используйте со стороны клиента Access Layer платформе данных (описаны далее в этой статье), который реализует шаблоны, описанных выше. Рассматривать как компонент основной вашей платформы в целом со стороны клиента уровень доступа к данным и убедитесь, что он используется все клиентские веб-приложения для единообразия и повышения производительности.

### <a name="data-request-apis"></a>API-интерфейсы запроса данных
<a name="bk_dataRequestApis"> </a>

Обратите внимание, что некоторые запросы клиентских данных может отрицательно сказаться на сервере SharePoint серьезный.

- Избегайте использования запросы CAML со стороны клиента, особенно предназначенные бы устаревших веб-службы перечислены (SOAP) 
- Запросы CAML со стороны клиента обычно обход всех на сервере кэширования, которые приводит к снижению производительности сервера при больших нагрузках

Если необходимо использовать запросы CAML, Пожалуйста ознакомьтесь со следующими рекомендациями:

- Избегайте их использования на страницах большого объема (например, домашней страницы портала)
- Определение возможности запроса CAML простой, самые эффективные и проверить производительность
- Использовать (описаны далее в этой статье) платформа уровень доступа клиентских данных для кэширования данных ответа

В общем случае использования API-интерфейсы REST SharePoint для запросов данных со стороны клиента. При выполнении объединения данных и контента, используйте API-интерфейсы REST поиска SharePoint. Оптимизация поисковые запросы, чтобы сократить время выполнения и размер ответа:

- Ограничьте использование подстановочных знаков
- Возвращает только те поля, которые необходимы (т.е., не используйте запрос Select *)
- Ограничение количества результатов (то есть использовать строку ограничения)
- Целевые узкой возможные области
- Сохранить как можно меньше число запросов поиска
- Проведение регулярных запроса, аудит для объединения избыточных/аналогичные отправляет запрос, ориентированных на той же информации

Клиентских запросов REST в SharePoint Online теперь могут быть регулирование запросов и даже запроса блокировки. Обратите внимание на коды и предупреждений ответа HTTP запросов данных и соответствующим образом изменить поведение запроса пользователя данные во избежание перерывы в обслуживании данных в клиентских веб-приложений. Обратитесь к статье [SharePoint Online запросить функции регулирования](https://msdn.microsoft.com/en-us/library/office/dn889829.aspx) для получения дополнительных сведений о том, как избежать регулирование или заблокирован.

Трафик запросов REST может быть теперь оптимизировать с помощью пакетного OData.  Обратитесь к [OData пакетного запроса при помощи учебника по](http://www.odata.org/getting-started/advanced-tutorial/#batch) , а также [Спецификации запросить протокол OData пакета](http://docs.oasis-open.org/odata/odata/v4.0/errata03/os/complete/part1-protocol/odata-v4.0-errata03-os-part1-protocol-complete.html#_Toc453752313) для получения дополнительных сведений. Кроме того необходимо учитывайте шаблоны разработки Office и методики - [JavaScript Core (PnP-JS-Core)](https://github.com/SharePoint/PnP-JS-Core) компонента, который также предоставляет [программы-оболочки](https://github.com/SharePoint/PnP-JS-Core/wiki/Batching) для инкапсуляции пакетного запроса функциональные возможности.

### <a name="take-advantage-of-free-shipping"></a>Воспользуйтесь преимуществами «Бесплатная доставка»
<a name="bk_freeShipping"> </a>

Сделать использование встроенных функций, которые автоматически доставлять данные на клиентские веб-приложения без необходимости запрос явные данных:

- Используйте глобальную переменную JavaScript, с именем **spPageContextInfo**, если он доступен
    - Включен в глобальные JavaScript пространство имен каждые ***Классический*** страницы SharePoint
    - Содержит общие сведения о контексте, необходимая для среды со стороны клиента при загрузке страницы 
    - Не требуется, чтобы позвонить в SharePoint для получения этих данных при загрузке страницы
- Использование предварительно информации из среды SharePoint, если использование современных страниц и реализация настройки с помощью среды SharePoint
- Использовать файлы JavaScript для хранения параметров конфигурации, используемые клиентские веб-приложения
    - Поместите эти файлы в папке файл ресурсов (например, библиотека стилей SharePoint)
    - Ссылки на эти файлы JavaScript ресурсов в виде файла со стороны клиента веб-приложения
    - Браузеры автоматически доставлять эти файлы в среде клиента при загрузке страницы
        - Кроме того каждый будет храниться обслуживаемые из локального кэша файлов internet 
    - Не требуется, чтобы позвонить в SharePoint для получения этих данных при загрузке страницы

### <a name="resource-files"></a>Файлы ресурсов
<a name="bk_resourceFiles"> </a>

Эффективное использование файлов ресурсов для повышения производительности со стороны клиента веб-приложения.

- Использование JavaScript или CSS-файлы для предоставления общих сценариев/CSS содержимого различных страниц и компонентов. Получение же преимущества, описанных выше для файлов настройки на основе JavaScript, а также:
    - Соответствующий заповедь «Одно правило, один почтовый»
    - Позволяет избежать содержимого избыточных, внедренного скрипта/CSS
    - Минимизация содержимого страницы
- Пакет (например, «minify») время загрузки файлов ресурсов, чтобы уменьшить его размер повышение
- Использование запросов динамических файлов отложите нагрузки дополнительные файлы JavaScript, только при необходимости (то есть отложенная загрузка)
- Убедитесь, что файлы JavaScript запрашиваются в правильном порядке
    - Реализация логики, чтобы убедиться, что необходимые функции присутствует 
- Использовать спрайтов изображение, чтобы сократить количество файлы изображений, которые необходимо загрузить
- Использование изображений в SharePoint для определения оптимального изображение ограничений для распространенных изображение ситуациях (например, эскиз герой, накопительный пакет обновления, и т.д.) 

### <a name="content-delivery-network-cdn"></a>Сети доставки содержимого (CDN)
<a name="bk_cdn"> </a>

Сети доставки содержимого (CDN) — это географически распределенные сети, которая позволяет конечным пользователем для получения файла указанного ресурса из ближайших CDN расположения.  Использование CDN приводит к более время загрузки и предоставляет улучшенные с точки зрения общей производительности страницы.

- Использовать существующий сети доставки содержимого для предоставления сторонних производителей со стороны клиента платформы (например, jQuery, загрузки, выход, AJAX, и т.д.)
- Рассмотрите сети доставки содержимого (CDN) для подготовки файлов настраиваемых ресурсов
    - [Azure CDN](https://azure.microsoft.com/en-us/services/cdn/)
    - [Office 365 общедоступный/частный CDN](https://dev.office.com/blogs/general-availability-of-office-365-cdn)
    - Библиотека стилей SharePoint Portal - параметр по умолчанию, если не используется в CDN

>**Примечание**: [Office 365 частной сети CDN возможность](https://dev.office.com/blogs/general-availability-of-office-365-cdn) имеет публикации компонента auto перезапись URL-адресов для URL-адреса CDN. Поэтому после включения частной сети CDN SharePoint возвращает публикации страниц с помощью ссылок, указывающих закрытый расположения CDN без вы как разработчик необходимости строить это. Применяется для страниц публикации, но также для данных, возвращаемых контента по веб-части поиска, слайд-шоу библиотеки рисунков, полей изображений в запросах SPList REST и изображений SharePoint. Портал публикации также можно объединить частной и общедоступной сети CDN на портале же.

### <a name="ajax"></a>AJAX
<a name="bk_ajax"> </a>

Асинхронный JavaScript и Xml (AJAX) позволяет клиентские веб-приложения для выполнения запросов данных фона таким образом, чтобы не требует полной загрузки страницы.
 
Для выделения «номер**A**» в AJAX означает «**асинхронных**»; рекомендуется хранить его таким образом. Хотя существует возможность выполнять синхронные вызовы в AJAX, рекомендуется редко делать это. 

- Никогда не выполнять синхронные вызовы AJAX; блоки браузера до завершения вызова, какие результаты низкого уровня пользовательского интерфейса

Потребности в синхронный вызов обычно возникают из-за зависимость порядке в поток данных запросов. Анализ поток запросов данных во время разработки и устранения (или по крайней мере уменьшения) порядке зависимостей. Уменьшить влияние все зависимости, остаются с цепочки обработчиков событий успеха асинхронных данных запросов. 

### <a name="javascript"></a>JavaScript
<a name="bk_javaScript"> </a>

Этап выполнения JavaScript — последнюю часть общей последовательность загрузки страницы.  На этом этапе браузер выполняет все JavaScript, необходимо связать все вместе и пользователь получает последний, отображаемой страницы.

Плохо реализации JavaScript по-прежнему можно привести низкого уровня пользовательского интерфейса, даже в том случае, если клиентские веб-приложения выполняются все рекомендации для запроса веб-страницы, ее файлы ресурсов и выполнения всех запросов данных.

Рекомендации по производительности широкое для JavaScript, выходят за рамки данной статьи; Тем не менее мы сведение некоторые из самых важных концепций здесь:

- Ограничение обновления модели объектов документа (DOM)
- Эффективное использование циклов структуры
- Ограничения использования try/catch в сегменты критические кода
- Использование области соответствующих прав для переменных

Можно найти в следующих статьях подробные инструкции по производительности JavaScript: 

- [Шаблоны JavaScript и производительности](https://msdn.microsoft.com/en-us/pnp_articles/javascript-patterns-and-performance)
- [Центр разработчиков Office PnP интерактивной конференции — рекомендации по производительности JavaScript с SharePoint](https://dev.office.com/blogs/javascript-performance-considerations-with-sharepoint)

### <a name="high-volume-pages"></a>Страницы большого объема
<a name="bk_highVolumePages"> </a>

Обратите внимание на проектирование и реализация больших страниц в пределах клиентские веб-приложения.

Типичная страница большого объема является домашней странице портала.  Рассмотрим сценарий, где решает корпоративных ИТ-отделу крупного предприятия (50 000 пользователей) для реализации объекта (Групповой), который заставляет все рабочего стола браузеров, откройте домашнюю страницу портала по умолчанию. Производительность домашней странице портала стала теперь критические внимание.  Исходный проект был учитывает этот объем трафика, портала может привести к снижению производительности.

- Избегайте использования веб-части содержимого по запроса на странице; Вместо этого предпочитать веб-частей содержимого по поиска
- Ограничения и оптимизировать, число запросов данных со стороны клиента, выданный страницы
- Убедитесь, что соответствующие кэширование на стороне клиента в воспроизвести для запросов данных со стороны клиента
- Страница «блока»
    - Ограничение обработки только в верхней части страницы (то есть, первая часть) страницы
    - События использования прокрутки для запуска обработки дополнительных фрагментов страницы как и пользователь перемещает вниз
- Ограничить объем данных, в настраиваемых элементов управления например выделения (например, последние внедрения) и накопительные (например, в начало 3 новости ссылок) 
    - Предоставление "**Подробнее...**" ссылки на перенаправление пользователей в небольших сведений о страницах, где развернутого содержимого можно просмотреть с помощью меньше общего влияния на портале

## <a name="client-side-data-access-layer-dal-framework"></a>Платформа Layer (DAL) со стороны клиента данных Access
<a name="bk_dal"> </a>

Framework со стороны клиента уровень доступа к данным (DAL) представляет собой настраиваемых со стороны клиента JavaScript, реализации и сделать доступным для всех элементов управления настраиваемых отображения со стороны клиента со стороны клиента веб-приложений.  Он поддерживает intelligent загрузки шаблонов данных, выделяет сведения о запросах клиент сервер, предоставляет функциональные возможности для сведения к минимуму трафик клиент сервер запросов кэширование данных и значительное улучшение производительности обнаруженных страниц.

Существует ряд платформы JavaScript и библиотек, которые можно использовать для реализации DAL со стороны клиента. Выберите одну с помощью которого удобнее работать и придерживаться следующих принципов.  Используйте предлагаемые как шаблон для реализации логической архитектуры.

**Пример клиентского уровня доступа к данным (DAL)** предоставляет реализацию ссылку рабочее Framework со стороны клиента уровень доступа к данным (DAL). Можно получить доступ к образца на репозиториев:

- [Образец Layer (DAL) доступа к данным на стороне клиента](https://github.com/SharePoint/PnP/tree/master/Samples/Portal.DataAccessLayer)

### <a name="architectural-tenets"></a>Принципы архитектуры
<a name="bk_dalTenets"> </a>

- Производительность — это компонент № 1
- Компонент основной структуры в целом со стороны клиента
    - Чтобы выполнять для всех пользовательских клиентских веб-приложений и компонентов для единообразия и повышения производительности
- Выполнения запросов данных с помощью кэша данных со стороны клиента; Если возникает промахов кэша, выполните выборку данных клиент сервер
- Выбор данных сервера с помощью асинхронного вызова AJAX клиент сервер (никогда не использования синхронный вызов)
- Сократить каскадных сбоями вызовов, повторное использование устаревшие данные при аудио- и в случае сбоя запрос данных
- Поддерживать регулирования ответы запросов и соответственно изменить поведение
- Хранение данных ответа сервера в кэш со стороны клиента, с использованием представления JSON минимальной, зависящего от запроса
- Временные и долговременного хранения варианты технической поддержки
- Используйте временные хранилища для личных данных и долговременное хранилище для общих данных
- Поддержка абсолютного и настройка политики срока действия
- Разрешить каждой записи хранилища настроить собственные параметры хранения для хранения данных (временными/длительного пользования), политика прекращения действия (абсолютного/Настройка) и время ожидания (в минутах)
- Постоянный мониторинг производительности во время выполнения с помощью ведения журнала и телеметрии 
- Постоянный Просмотр данных поток сценарии/последовательности, убедитесь, что каждый остается оптимизацию для общую производительность страницы и скорость отклика

Следующей схеме показана логическая архитектура платформы со стороны клиента уровень доступа к данным (DAL):

![Логическая архитектура уровень доступа к данным](./media/logicalDataAccessLayer.png)

### <a name="major-components"></a>Основные компоненты
<a name="bk_dalComponents"> </a>

Логическая архитектура платформы уровень доступа к данным (DAL) включает в себя следующие компоненты:

- Компоненты на основе JavaScript отображения
    - Эти элементы управления использовать шаблоны доступа intelligent данных (например, отложенная загрузка) и события модели объектов документа (DOM), чтобы гарантировать, что запросы данных отложенной так долго и запускаются только при необходимости (например, подождите, пока расширенное свернутые меню)
    - Отображение элементов управления могут представлять индикаторов состояния, хотя для запросов данных в пути
- Запросы данных на основе событий
    - Эти обработчики событий привязываются к событиям страницы или элемента управления и вызвать методы доступа к данным при запуске
- Диспетчером данных
    - Предоставляет данные бизнес-объекты (BDOs) для использования с компонентами отображения
    - Предоставляет методы доступа к логических данных, абстрактный используемых источников данных
    - Данные BDO могут поступать из макетов, кэш со стороны клиента или к источнику данных
- Внешние службы
    - Предоставляют API-интерфейсы для доступа к на сервере (то есть серверной) данных
    - Включает в себя службы SharePoint Online, сторонних производителей данных, пользовательские источники данных и пользовательских приложений
- Диспетчер хранилища
    - Предоставляет семантика кэша данных со стороны клиента с надежность (временной или постоянной), продолжительность (время ожидания) и политики (абсолютное или данный тип)
    - Веб-хранилище позволяет среде клиента для хранения временных данных (хранилище сеанса) и долгосрочного данных (локальное хранилище)
        - Сеанс хранилища поддерживает кэширование личных данных
        - Локальное хранилище поддерживает кэширование общих данных
    - Для предоставления другой Дополнительные варианты хранения со стороны клиента при необходимости можно добавить поддержки файлов cookie
    - Предоставление данных из клиентского кэша сокращает запросов к источнику данных и позволяет повысить производительность страницы

### <a name="typical-call-sequence"></a>Типичный вызов последовательность
<a name="bk_dalCallSequence"> </a>

1. В клиентском браузере происходит событие (неявных или явных)
2. Компонент отображения определяет, что требуется для запроса данных для отображения
3. Компонент отображения из данных диспетчером запрашивает ее связанный объект Business данных (BDO) 
    - При необходимости отображения компонент отображает индикатор выполнения запроса во время выполнения
4. Вычисляет ключ хранилища данных диспетчером и определяет параметры хранения для BDO
5. Данные диспетчером запросов BDO из диспетчера хранилища на варианты хранения
    - Если BDO присутствует и новым, попадания в кэш и диспетчер хранилища возвращает BDO (чтобы перейти к шагу 10)
    - Если BDO отсутствует или устарели, промахов кэша и диспетчер хранилища возвращает не BDO (чтобы перейти к шагу 6)
6. Данные диспетчером проблемы (асинхронный) запрос к внешним службам к новым данным
    - Если запрос не удается, **повторно использует** диспетчером данные устарели BDO *при наличии* (перейдите к действию 9)
    - Если запрос пройдет успешно, данные диспетчером обрабатывает ответ новые данные (чтобы перейти к шагу 7)
7. Данные диспетчером создает объект данных Business (BDO)
8. Данные диспетчером заполняет BDO с новым данным
9. Данные диспетчером запрашивает у диспетчера хранилища для хранения BDO каждого варианты хранения 
10. Данные диспетчером возвращает BDO к компоненту отображения
11. Выполняет привязку к BDO компонент отображения и данные

## <a name="additional-resources"></a>Дополнительные ресурсы
<a name="bk_additionalResources"> </a>

- [Образец Layer (DAL) доступа к данным на стороне клиента](https://github.com/SharePoint/PnP/tree/master/Samples/Portal.DataAccessLayer)
- [Общие сведения о настройке производительности для SharePoint Online](https://support.office.com/en-US/article/Introduction-to-performance-tuning-for-SharePoint-Online-81c4be5f-327e-435d-a568-526d68cffef0)
- [Настройка параметров производительности SharePoint Online](https://support.office.com/en-us/article/Tune-SharePoint-Online-performance-f0522d4a-fbf4-41f9-854e-c9b59555091d)
- [Шаблоны разработки Office и методики основных JavaScript (PnP)](https://github.com/SharePoint/PnP-JS-Core)
- [Узнайте, как создавать, быстро реагировать портал SharePoint в SharePoint Online](https://channel9.msdn.com/Events/Ignite/2016/BRK3026)
- [Образец Layer (DAL) доступа к данным на стороне клиента](https://github.com/SharePoint/PnP/tree/master/Samples/Portal.DataAccessLayer)
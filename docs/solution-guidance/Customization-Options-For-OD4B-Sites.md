---
title: "Настройка службы OneDrive для бизнеса узлы #"
ms.date: 11/03/2017
ms.openlocfilehash: 493c4a8f265127bcf647967374d1b7fb6d7d65a8
ms.sourcegitcommit: 86625a7b8efe74f2ace5c32a301197c5b7ee695f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/24/2018
---
# <a name="customization-of-onedrive-for-business-sites"></a><span data-ttu-id="a78f0-102">Настройка OneDrive для бизнеса сайтов</span><span class="sxs-lookup"><span data-stu-id="a78f0-102">Customization of OneDrive for Business sites</span></span> #

### <a name="summary"></a><span data-ttu-id="a78f0-103">Summary</span><span class="sxs-lookup"><span data-stu-id="a78f0-103">Summary</span></span> ###
<span data-ttu-id="a78f0-104">OneDrive для бизнеса сайтов можно настроить в Office 365 или с помощью модели приложения в целом, в соответствии с требованиями организации.</span><span class="sxs-lookup"><span data-stu-id="a78f0-104">OneDrive for Business sites can be customized in Office 365 or with app model in general, based on company requirements.</span></span> <span data-ttu-id="a78f0-105">Фактические методы для выполнения этой настройки отличаются от в локальной, так как можно использовать только методы модели приложения.</span><span class="sxs-lookup"><span data-stu-id="a78f0-105">Actual techniques to perform this customization are different than in the on-premises, since only app model techniques can be used.</span></span> <span data-ttu-id="a78f0-106">На этой странице приведены сведения о фактических шаблоны, которые можно использовать с mdoel приложение для настройки OneDrive для бизнеса сайтов.</span><span class="sxs-lookup"><span data-stu-id="a78f0-106">This page contains details on the actual patterns which can be used with app mdoel to customize OneDrive for Business sites.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="a78f0-107">В этом **только** применяется к *классической* OneDrive для бизнеса программой в SharePoint Online.</span><span class="sxs-lookup"><span data-stu-id="a78f0-107">This **only** applies to *classic* OneDrive for Business experience in the SharePoint Online.</span></span> <span data-ttu-id="a78f0-108">При использовании интерфейса по умолчанию «новый» это действие не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="a78f0-108">If you are using the default "New experience", this is not supported.</span></span> <span data-ttu-id="a78f0-109">Современный или новые интерфейсы OneDrive для бизнеса не поддерживает настраиваемый фирменный стиль.</span><span class="sxs-lookup"><span data-stu-id="a78f0-109">Modern or new experiences of OneDrive for Business does not support custom branding.</span></span> <span data-ttu-id="a78f0-110">Администраторы клиента можно управлять из SharePoint Online административных параметров интерфейса по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="a78f0-110">Tenant administrators can control the default experience from the SharePoint Online administrative settings.</span></span>

# <a name="why-would-you-customize-onedrive-for-business-sites"></a><span data-ttu-id="a78f0-111">Почему бы настроить OneDrive для бизнеса сайтов</span><span class="sxs-lookup"><span data-stu-id="a78f0-111">Why would you customize OneDrive for Business sites?</span></span> #

<span data-ttu-id="a78f0-112">Существует множество различных аспектов на применение настроек к OneDrive для бизнеса (OD4B) сайтов.</span><span class="sxs-lookup"><span data-stu-id="a78f0-112">There are numerous different aspects on applying customizations to OneDrive for Business (OD4B) sites.</span></span> <span data-ttu-id="a78f0-113">Конечно, эти сайты можно настроить, с момента их сайты SharePoint, но в то же время всегда необходимо учитывать влияние короткие и длинные терминов из настроек.</span><span class="sxs-lookup"><span data-stu-id="a78f0-113">You certainly can customize these sites, since they are SharePoint sites, but at the same time you should always consider the short and long term impact of the customizations.</span></span> <span data-ttu-id="a78f0-114">Как правило эскиз мы хотели бы предоставить инструкциями по настройке OD4B сайты верхнего уровня.</span><span class="sxs-lookup"><span data-stu-id="a78f0-114">As a rule of a thumb, we would like to give following high level guidelines for customizing OD4B sites.</span></span> 

- <span data-ttu-id="a78f0-115">Применение фирменной настройки, с помощью Office 365 тем или модуль темы сайта SharePoint</span><span class="sxs-lookup"><span data-stu-id="a78f0-115">Apply branding customizations using Office 365 themes or SharePoint site theming engine</span></span>
- <span data-ttu-id="a78f0-116">Обработчики темы, не достаточно, можно настроить некоторые параметры CSS с помощью альтернативного варианта CSS</span><span class="sxs-lookup"><span data-stu-id="a78f0-116">If theme engines are not enough, you can adjust some CSS settings using alternate CSS option</span></span>
- <span data-ttu-id="a78f0-117">Избегайте Настройка OD4B сайтов, с помощью настраиваемых главных страниц, так как это приведет к вам дополнительные долгосрочные затраты и проблемы, связанные с будущими обновлениями</span><span class="sxs-lookup"><span data-stu-id="a78f0-117">Avoid customizing OD4B sites using custom master pages, since this will cause you additional long term costs and challenges with future updates</span></span>
  + <span data-ttu-id="a78f0-118">В большинстве случаев можно достичь все распространенные сценарии фирменной настройки с тем и альтернативной таблицы CSS, поэтому это не действительно, ограничивающим фактором</span><span class="sxs-lookup"><span data-stu-id="a78f0-118">In most of the cases, you can achieve all common branding scenarios with themes and alternate CSS, so this is not really that limiting factor</span></span>
  + <span data-ttu-id="a78f0-119">Если вы решили использовать настраиваемые главные страницы, подготовленного для применения изменений на веб-сайты, когда основные функциональные обновления применяются к Office 365</span><span class="sxs-lookup"><span data-stu-id="a78f0-119">If you chose to use custom master pages, be prepared on applying changes to the sites when major functional updates are applied to Office 365</span></span>
- <span data-ttu-id="a78f0-120">Можно использовать JavaScript, внедрение для изменения или скрыть функциональных возможностей с сайта</span><span class="sxs-lookup"><span data-stu-id="a78f0-120">You can use JavaScript embedding to modify or hide functionalities from the site</span></span>
- <span data-ttu-id="a78f0-121">CSOM можно использовать для управления например языка и региональных параметров на сайтах OD4B (увидеть новые интерфейсы API)</span><span class="sxs-lookup"><span data-stu-id="a78f0-121">You can use CSOM to control for example language or regional settings in the OD4B sites (see new APIs)</span></span>
- <span data-ttu-id="a78f0-122">Не рекомендуется использование типов контента и столбцы в сайтах OD4B во избежание проблем с сайта</span><span class="sxs-lookup"><span data-stu-id="a78f0-122">We do not recommend usage of content types and site columns in OD4B sites to avoid challenges with the</span></span> 
  + <span data-ttu-id="a78f0-123">Представить OD4B сайтов как для персональных данных без структурные и документы.</span><span class="sxs-lookup"><span data-stu-id="a78f0-123">Think OD4B sites as for personal un-structural data and documents.</span></span> <span data-ttu-id="a78f0-124">Сайты рабочих групп и совместной работы документа, а затем для данных компании и документов, где можно определенно использовать любые политики управления сведениями и метаданных.</span><span class="sxs-lookup"><span data-stu-id="a78f0-124">Team sites and collaboration sits are then for company data and documents where you can certainly use whatever information management policies and metadata you want.</span></span>

<span data-ttu-id="a78f0-125">В сводке настроек определенно поддерживаемые в Office 365 и вы можно хранить в их использования с сайтами, OD4B.</span><span class="sxs-lookup"><span data-stu-id="a78f0-125">As a summary, customizations are definitely supported in Office 365 and you can keep on using them with OD4B sites.</span></span> <span data-ttu-id="a78f0-126">Только что действительно необходимо рассмотреть короткие и длинные терминов влияния этих настроек из эксплуатации и обслуживанию Перспектива.</span><span class="sxs-lookup"><span data-stu-id="a78f0-126">We just truly want to ensure that you consider the short and long term impact of these customizations from operational and maintenance perspective.</span></span> <span data-ttu-id="a78f0-127">Это не конкретно для SharePoint, а не как правило для построения решения любой ИТ с любой платформы.</span><span class="sxs-lookup"><span data-stu-id="a78f0-127">This is not really specific for SharePoint, rather a rule of thumb for any IT solution build with any platform.</span></span> 

<span data-ttu-id="a78f0-128">Ниже приведен пример OD4B узла, который был настроен с помощью выше рекомендаций.</span><span class="sxs-lookup"><span data-stu-id="a78f0-128">Here’s an example of OD4B site, which has been customized using above guidelines.</span></span> <span data-ttu-id="a78f0-129">В этом случае конечный результат достигнут с тем Office 365, тему сайта и использование так называемое JavaScript, внедрение шаблон.</span><span class="sxs-lookup"><span data-stu-id="a78f0-129">In this case the end result has been achieved with combination of Office 365 themes, site theme and usage of so called JavaScript embedding pattern.</span></span>

![Настраиваемая OD4B сайта.](media/Customization-Options-For-OD4B-Sites/Customization-Options-For-OD4B-Sites-01.png)

# <a name="challenge-with-applying-onedrive-for-business-site-customizations"></a><span data-ttu-id="a78f0-131">Вызов с применение OneDrive для настройки сайта бизнеса?</span><span class="sxs-lookup"><span data-stu-id="a78f0-131">Challenge with applying OneDrive for Business site customizations?</span></span> #

<span data-ttu-id="a78f0-132">Начнем с определения возможности проблемой и что мы пытаетесь решить здесь.</span><span class="sxs-lookup"><span data-stu-id="a78f0-132">Let’s start with defining what is the challenge and what are we trying to solve here.</span></span> <span data-ttu-id="a78f0-133">Технически каждого OneDrive для бизнеса сайта в текущий момент использует идентичные архитектуры как личные или личные узлы, используемые в SharePoint 2007 или 2010 версии.</span><span class="sxs-lookup"><span data-stu-id="a78f0-133">Technically each OneDrive for Business site is currently using identical architecture as what the personal or my sites used  back in SharePoint 2007 or 2010 version.</span></span> <span data-ttu-id="a78f0-134">Это означает, технически каждого OneDrive для бизнеса сайта является собственные семейства веб-сайтов и мы не можем любой централизованное расположение для применения фирменной настройки или другие настроек.</span><span class="sxs-lookup"><span data-stu-id="a78f0-134">This means that technically each OneDrive for Business site is their own site collection and we do not have any centralized location to apply branding or any other customizations.</span></span>

![Каждый OneDrive для бизнеса сайта — это собственный семейства сайтов в разделе личные управляемого пути и URL-адрес создан на основе профилей пользователей, назначенные.](media/Customization-Options-For-OD4B-Sites/Customization-Options-For-OD4B-Sites-02.png)

<span data-ttu-id="a78f0-140">Классический решение, которое требуется применить необходимые настройки в OneDrive для бизнеса сайты (включая Мои или личные сайты) основана на ассоциации возможности на уровне фермы.</span><span class="sxs-lookup"><span data-stu-id="a78f0-140">Classic solution to apply needed configuration to the OneDrive for Business sites (including my or personal sites) was based on feature stapling in farm level.</span></span> <span data-ttu-id="a78f0-141">Это означает, что вы развернуть решение фермы в ферме SharePoint используется структура компонентов для связи вашего пользовательского компонента активируется при каждом создано личный сайт, которой затем отвечал применения необходимых настроек.</span><span class="sxs-lookup"><span data-stu-id="a78f0-141">This meant that you deployed farm solution to your SharePoint farm and used feature framework to associate your custom feature to be activated each time a my site is crated, which was then responsible of applying needed customizations.</span></span> <span data-ttu-id="a78f0-142">Такой же подход не работает в Office 365, поскольку требуется следует развертывать решение фермы и это невозможно просто с сайтами на Office 365.</span><span class="sxs-lookup"><span data-stu-id="a78f0-142">This similar approach does not work in Office 365, since it requires farm solution to be deployed and that is simply impossible with Office 365 sites.</span></span> <span data-ttu-id="a78f0-143">Поэтому мы должны выглядеть альтернативы для применения необходимые изменения на веб-сайты.</span><span class="sxs-lookup"><span data-stu-id="a78f0-143">Therefore we need to look alternatives to apply the needed changes to the sites.</span></span>

<span data-ttu-id="a78f0-144">В Office 365 централизованного событие не возникает, который мы может присоединить наших пользовательского кода, чтобы при создании сайта OD4B.</span><span class="sxs-lookup"><span data-stu-id="a78f0-144">In Office 365 there is no centralized event raised, which we could attach our custom code to when OD4B site is created.</span></span> <span data-ttu-id="a78f0-145">Это означает, что необходимо учитывать альтернативных решений будет весьма подходов модели приложения.</span><span class="sxs-lookup"><span data-stu-id="a78f0-145">This means that we need to think about alternative solutions, which is quite common with app model approaches.</span></span> <span data-ttu-id="a78f0-146">Не войти на старой модели, подумайте, как добиться же конечный результат с помощью новые интерфейсы API и технологии.</span><span class="sxs-lookup"><span data-stu-id="a78f0-146">Do not get stuck on old models, think about how to achieve same end result using new APIs and technologies.</span></span> <span data-ttu-id="a78f0-147">С точки зрения чисто требования, он не имеет значения как мы применить ее на веб-сайты, до тех пор, пока они применяются, поскольку не следует применять ассоциации возможности бизнес-требованиям, где о применении необходимо с помощью поддерживается независимо от существующих настроек Технические механизм.</span><span class="sxs-lookup"><span data-stu-id="a78f0-147">From pure requirement perspective, it does not really matter how we apply the customizations to the sites, as long as they are applied, since business requirement is not to use feature stapling, it’s about applying needed customizations using whatever supported technical mechanism.</span></span> 

# <a name="different-options-for-applying-customizations"></a><span data-ttu-id="a78f0-148">Различные варианты применения настроек</span><span class="sxs-lookup"><span data-stu-id="a78f0-148">Different options for applying customizations</span></span> #

<span data-ttu-id="a78f0-149">На практике у нас есть четыре различных механизмов для применения настроек централизованного к сайтам OD4B в Office 365.</span><span class="sxs-lookup"><span data-stu-id="a78f0-149">In practice we do have four different mechanisms to apply centralized customizations to OD4B sites in the Office 365.</span></span> <span data-ttu-id="a78f0-150">Кроме того, можно вручную вариант, пятый, но в случае необходимости сотни или тысячи OD4B сайтов, с помощью вручную параметры не действительно реалистичной параметр.</span><span class="sxs-lookup"><span data-stu-id="a78f0-150">You could also consider manual option as the fifth one, but in the case of having hundreds or thousands of OD4B sites, using manual options is not really a realistic option.</span></span> <span data-ttu-id="a78f0-151">Вот различных параметрах, у нас есть.</span><span class="sxs-lookup"><span data-stu-id="a78f0-151">Here’s the different options we have.</span></span>
 
1. <span data-ttu-id="a78f0-152">Office 365 набора параметров уровня (Office 365 темы и другие параметры)</span><span class="sxs-lookup"><span data-stu-id="a78f0-152">Office 365 suite level settings (Office 365 themes and other settings)</span></span>
2. <span data-ttu-id="a78f0-153">Веб-часть скрытые приложения с помощью контекста пользователя</span><span class="sxs-lookup"><span data-stu-id="a78f0-153">Hidden app part with user context</span></span>
3. <span data-ttu-id="a78f0-154">Предварительное создание и применение конфигурации</span><span class="sxs-lookup"><span data-stu-id="a78f0-154">Pre-create and apply configuration</span></span>
4. <span data-ttu-id="a78f0-155">Задание таймера удаленного, на основании изменения профиля пользователя</span><span class="sxs-lookup"><span data-stu-id="a78f0-155">Remote timer job based on user profile updates</span></span>

<span data-ttu-id="a78f0-156">Все параметры имеют преимущества и недостатки в их и правом параметр зависит от подробные бизнес-требования.</span><span class="sxs-lookup"><span data-stu-id="a78f0-156">Each of the options have advantages and disadvantages in them and the right option depends on your detailed business requirements.</span></span> <span data-ttu-id="a78f0-157">Некоторые параметры применяются на уровне набора приложений Office 365, но часто может нужна некоторые дополнительные особенности, необходимых действительных настроек.</span><span class="sxs-lookup"><span data-stu-id="a78f0-157">Some of the settings you can also apply from the Office 365 suite level, but often you would be looking for some more specifics, so actual customizations are needed.</span></span> <span data-ttu-id="a78f0-158">Очевидно, что все сводится на точное требования и вариантов анализа бизнеса на их влияние на короткие и длинные терминов.</span><span class="sxs-lookup"><span data-stu-id="a78f0-158">It obviously all comes down on exact requirements and business case analyses on their impact on short and long term.</span></span>

## <a name="office-365-suite-level-settings"></a><span data-ttu-id="a78f0-159">Параметры уровня набора приложений Office 365</span><span class="sxs-lookup"><span data-stu-id="a78f0-159">Office 365 suite level settings</span></span> ##

<span data-ttu-id="a78f0-160">Office 365 — это не только SharePoint, как вы знаете.</span><span class="sxs-lookup"><span data-stu-id="a78f0-160">Office 365 is much more than just SharePoint, like you know.</span></span> <span data-ttu-id="a78f0-161">Можно найти более дополнительные службы, которые не основаны на даже архитектуры SharePoint, как Delve, Yammer и многие предстоящие службы.</span><span class="sxs-lookup"><span data-stu-id="a78f0-161">You can find more and more additional services which are not based on even the SharePoint architecture, like Delve, Yammer and many upcoming services.</span></span> <span data-ttu-id="a78f0-162">Это означает, что корпоративной фирменной символики и конфигурации не используется только для управления имеют на сайтах SharePoint, а мы следует подумать общий конечного пользователя взаимодействия и как мы предоставляем согласованные конфигурации пересекать различных служб.</span><span class="sxs-lookup"><span data-stu-id="a78f0-162">This means that the enterprise branding and configuration is not just about controlling what we have in the SharePoint sites, rather we should be thinking the overall end user experience and how we provide consistent configurations cross different services.</span></span>

<span data-ttu-id="a78f0-163">Фирменная символика классический пример этим требованиям предприятия и для, у нас есть еще темы Office 365 введена, которую можно использовать для управления определенный уровень фирменной символики.</span><span class="sxs-lookup"><span data-stu-id="a78f0-163">Classic example of these enterprise requirements is branding and for that we have already Office 365 theming introduced, which can be used to control some level of branding.</span></span> <span data-ttu-id="a78f0-164">У нас есть также другие предстоящие возможности, которые позволяют контролировать вашего сайта управления и другие параметры, централизованное расположение за пределами параметры семейства сайтов, как предстоящие центре соответствия требованиям для Office 365, которая указана в настоящее время в плану Office 365.</span><span class="sxs-lookup"><span data-stu-id="a78f0-164">We have also other upcoming features, which will help to control your site governance and other settings, from centralized location outside of the site collection settings, like the upcoming Compliance Center for Office 365, which is currently listed in the roadmap of the Office 365.</span></span>

<span data-ttu-id="a78f0-165">На рисунке ниже показаны различные параметры на данный момент темы Office 365, который затем применяется на нескольких всех служб Office 365.</span><span class="sxs-lookup"><span data-stu-id="a78f0-165">Following picture shows the different settings right now for the Office 365 theming, which will be then applied cross all Office 365 services.</span></span>

![Сайт отображает Office 365, отображение вкладки настраиваемой темы, право управление пользовательских тем для вашей организации, Настройка Office 365 в соответствии с марки вашей организации.](media/Customization-Options-For-OD4B-Sites/Customization-Options-For-OD4B-Sites-03.png)

<span data-ttu-id="a78f0-168">Поскольку по умолчанию параметры темы Office 365, для управления панель набора OD4B сайта, вероятнее всего использовании этого параметра вместе с другими вариантами чтобы убедиться, что можно указать по крайней мере правом элементы фирменной настройки кросс-OD4B сайтов.</span><span class="sxs-lookup"><span data-stu-id="a78f0-168">Since by default Office 365 theme settings are for controlling OD4B site suite bar, you will most likely be using this options together with other options to ensure that you can provide at least the right branding elements cross your OD4B sites.</span></span> <span data-ttu-id="a78f0-169">Обратите внимание на то, что при внесении изменений для примера настройки темы Office 365 в средство администрирования Office 365, занимает весьма много времени для получения параметров, примененных для сайтов OD4B, поэтому быть Терпение.</span><span class="sxs-lookup"><span data-stu-id="a78f0-169">Notice that when you change for example Office 365 theme settings in Office 365 admin tool, it does take a quite a long time to get the settings applied for OD4B sites, so be patience.</span></span> 

## <a name="hidden-app-part-with-user-context"></a><span data-ttu-id="a78f0-170">Веб-часть скрытые приложения с помощью контекста пользователя</span><span class="sxs-lookup"><span data-stu-id="a78f0-170">Hidden app part with user context</span></span> ##

<span data-ttu-id="a78f0-171">Это подход, в которых использование централизованного целевая страница по для начала необходимые настройки.</span><span class="sxs-lookup"><span data-stu-id="a78f0-171">This is an approach where use centralized landing page as the location for starting the needed customization process.</span></span> <span data-ttu-id="a78f0-172">Это означает, что необходимо иметь один централизованное расположение, как страница переднего интрасети компании, где пользователи всегда Главная при открытии их браузера.</span><span class="sxs-lookup"><span data-stu-id="a78f0-172">This means that you would have to have one centralized location, like company intranet front page, where the users are always landing when they open up their browser.</span></span> <span data-ttu-id="a78f0-173">Это очень типовой процесс с среднего и более крупным предприятиям где корпоративной целевая страница — это, затем управляются с помощью параметров групповой политики в AD.</span><span class="sxs-lookup"><span data-stu-id="a78f0-173">This is pretty typical process with midsized and larger enterprises where corporate landing page is then controlled using group policy settings in the AD.</span></span> <span data-ttu-id="a78f0-174">Это гарантирует, что конечные пользователи не могут переопределить начальная страница по умолчанию браузеров домену компании.</span><span class="sxs-lookup"><span data-stu-id="a78f0-174">This will ensure that end users cannot override default welcome page of the company domain joined browsers.</span></span>

<span data-ttu-id="a78f0-175">Когда пользователь попадает в интрасети, мы будет скрытым веб-части приложения в страницы, который будет запущен процесс настройки.</span><span class="sxs-lookup"><span data-stu-id="a78f0-175">When user arrives to the intranet, we will have hidden app part in the page, which will start the customization process.</span></span> <span data-ttu-id="a78f0-176">Его можно фактически отвечает всей OD4B создания сайтов также, так как обычно пользователь должен будет узле OD4B времени, прежде чем будет запущен процесс создания сайта.</span><span class="sxs-lookup"><span data-stu-id="a78f0-176">It can actually be responsible of the whole OD4B site creation as well, since normally user would have to visit the OD4B site once time, before the site creation process will be started.</span></span> <span data-ttu-id="a78f0-177">Веб-часть приложения скрытых фактически размещается на страницу с размещением у поставщика по размещены в Azure.</span><span class="sxs-lookup"><span data-stu-id="a78f0-177">Hidden app part is actually hosting a page from provider hosted add-in hosted in Azure.</span></span> <span data-ttu-id="a78f0-178">На этой странице отвечает затем начальных процесс настройки.</span><span class="sxs-lookup"><span data-stu-id="a78f0-178">This page is then responsible of starting the customization process.</span></span>

<span data-ttu-id="a78f0-179">Взглянем более подробно на логической структуры этого подхода.</span><span class="sxs-lookup"><span data-stu-id="a78f0-179">Let’s have a closer look on the logical design of this approach.</span></span>

![Схема для отображения отношений.](media/Customization-Options-For-OD4B-Sites/Customization-Options-For-OD4B-Sites-04.png)

1. <span data-ttu-id="a78f0-185">Поместите веб-часть приложения скрытых централизованного сайт, где будет располагаться конечных пользователей.</span><span class="sxs-lookup"><span data-stu-id="a78f0-185">Place hidden app part to centralized site where end users will land.</span></span> <span data-ttu-id="a78f0-186">Обычно это на первой странице корпоративной интрасети.</span><span class="sxs-lookup"><span data-stu-id="a78f0-186">Typically this is the corporate intranet front page.</span></span>
2. <span data-ttu-id="a78f0-187">Веб-часть приложения размещается на страницу с размещением у поставщика надстройки, где в кода на стороне сервера мы начать процесс настройки, добавив необходимые метаданные в очередь хранилища azure.</span><span class="sxs-lookup"><span data-stu-id="a78f0-187">App part is hosting a page from provider hosted add-in, where in the server side code we initiate the customization process by adding needed metadata to the azure storage queue.</span></span> <span data-ttu-id="a78f0-188">Это означает, что только будет получать запрос настройки на этой странице, но фактически не применяется все изменения для хранения обычных времени обработки.</span><span class="sxs-lookup"><span data-stu-id="a78f0-188">This means that this page will only receive the customization request, but will not actually apply any changes to keep the processing time normal.</span></span>
3. <span data-ttu-id="a78f0-189">Это очереди azure хранения, который будет получать сообщений в очередь для обработки.</span><span class="sxs-lookup"><span data-stu-id="a78f0-189">This is the actual azure storage queue, which will receive the messages to queue for processing.</span></span> <span data-ttu-id="a78f0-190">На первой странице интрасети остается таким образом, мы может обрабатывать настройки асинхронно управление процесса, чтобы он не имеет значения как долго конечного пользователя.</span><span class="sxs-lookup"><span data-stu-id="a78f0-190">This way we can handle the customization controlling process asynchronously so that it does not really matter how long end user will stay on the front page of the Intranet.</span></span> <span data-ttu-id="a78f0-191">Если процесс настройки может быть синхронные, мы бы зависит от конечного пользователя для оставьте браузер открытым на странице переднего интрасети только после завершения выполнения страницы.</span><span class="sxs-lookup"><span data-stu-id="a78f0-191">If the customization process would be synchronous, we would be dependent on end user to keep the browser open in the Intranet front page until page execution is finalized.</span></span> <span data-ttu-id="a78f0-192">Это не будет определенно удобство работы конечных пользователей.</span><span class="sxs-lookup"><span data-stu-id="a78f0-192">This would not definitely be optimal end user experience.</span></span> 
4. <span data-ttu-id="a78f0-193">WebJob подключен к выполните очереди хранилища, который вызывается, когда новый элемент ставится в очередь хранилища.</span><span class="sxs-lookup"><span data-stu-id="a78f0-193">WebJob hooked to follow the storage queue, which is called when new item is placed to the storage queue.</span></span> <span data-ttu-id="a78f0-194">В этом WebJob будет получать необходимые параметры и метаданные из сообщения в очереди для доступа к коллекции правом сайта.</span><span class="sxs-lookup"><span data-stu-id="a78f0-194">This WebJob will receive the needed parameters and metadata from the queued message to access right site collection.</span></span> <span data-ttu-id="a78f0-195">WebJob с помощью приложения только маркеров и предоставлены необходимые разрешения для работы с семейств веб-сайтов на уровне клиента.</span><span class="sxs-lookup"><span data-stu-id="a78f0-195">WebJob is using app only token and have been granted the needed permissions to manipulate site collections in the tenant level.</span></span>
5. <span data-ttu-id="a78f0-196">Действительных настроек, примененные по одному на сайты тем пользователям, у которых посетите страницу переднего интрасети для начала процесса.</span><span class="sxs-lookup"><span data-stu-id="a78f0-196">Actual customizations are applied one-by-one to those people’s sites who visit the intranet front page to start the process.</span></span>

<span data-ttu-id="a78f0-197">Это определенно самый надежный процесс становится правой конфигураций на сайтах OD4B.</span><span class="sxs-lookup"><span data-stu-id="a78f0-197">This is definitely the most reliable process of ensuring that there’s right configurations in the OD4B sites.</span></span> <span data-ttu-id="a78f0-198">Логика настройки управления версиями можно легко добавить к процессу, который также применяет все необходимые обновления сайтов OD4B, при необходимости обновления и посещении на первой странице интрасети следующий раз.</span><span class="sxs-lookup"><span data-stu-id="a78f0-198">You can easily add customization versioning logic to the process, which is also applying any needed updates to the OD4B sites, when there is an update needed and user visits the Intranet front page next time.</span></span> <span data-ttu-id="a78f0-199">Этот параметр, однако требуют наличия этого централизованное расположение, где главная конечных пользователей.</span><span class="sxs-lookup"><span data-stu-id="a78f0-199">This option does however require that you have that centralized location where your end users are landing.</span></span>

<span data-ttu-id="a78f0-200">Если вы знакомы классический моделей разработки SharePoint с решениями для фермы, это очень аналогичный процесс как один раз, выполнение задания таймера.</span><span class="sxs-lookup"><span data-stu-id="a78f0-200">If you are familiar of classic SharePoint development models with farm solutions, this is pretty similar process as one time executing timer jobs.</span></span>

## <a name="pre-create-and-apply-configuration"></a><span data-ttu-id="a78f0-201">Предварительное создание и применение конфигурации</span><span class="sxs-lookup"><span data-stu-id="a78f0-201">Pre-create and apply configuration</span></span> ##

<span data-ttu-id="a78f0-202">Этот параметр использует перед созданием сайтов OD4B перед пользователи будут получать доступ к их.</span><span class="sxs-lookup"><span data-stu-id="a78f0-202">This option relies on the pre-creation of the OD4B sites before users will access them.</span></span> <span data-ttu-id="a78f0-203">Это можно сделать с помощью относительно новых API, содержащей "мне нравится" нет на месте для создания сайтов OD4B для конкретных пользователей в процесс пакетной обработки с помощью CSOM или REST.</span><span class="sxs-lookup"><span data-stu-id="a78f0-203">This can be achieved by using relatively new API which provides us away to create OD4B sites for specific users in batch process, using either CSOM or REST.</span></span> <span data-ttu-id="a78f0-204">Требуется код может запускаться с помощью скрипта PowerShell или путем написания фактический код, который вызывает API удаленного.</span><span class="sxs-lookup"><span data-stu-id="a78f0-204">Needed code can be initiated using a PowerShell script or by writing actual code which is calling the remote APIs.</span></span> 

![Администраторы используют, предварительное создание и настройка для создания сайта OD4B.](media/Customization-Options-For-OD4B-Sites/Customization-Options-For-OD4B-Sites-05.png)

1. <span data-ttu-id="a78f0-206">Администратор с помощью удаленного создания API-интерфейсы для создания сайтов OD4B для пользователей и применяет необходимых настроек сайтов OD4B как часть процесса скрипта.</span><span class="sxs-lookup"><span data-stu-id="a78f0-206">Administrator is using the remote creation APIs to create OD4B sites for users and is applying the needed customizations to the OD4B sites as part of the script process.</span></span>
2. <span data-ttu-id="a78f0-207">Фактический OD4B сайтов создаются в Office 365 для конкретных пользователей и связанных профилей</span><span class="sxs-lookup"><span data-stu-id="a78f0-207">Actual OD4B sites are created to the Office 365 for specific users and associated to their user profiles</span></span>

<span data-ttu-id="a78f0-208">В некотором смысле это также действительно надежный процесс, но необходимо управлять новых лиц и обновления «вручную» которого означает больше работы, затем с помощью подхода часть скрытые приложения.</span><span class="sxs-lookup"><span data-stu-id="a78f0-208">In some sense this is also really reliable process, but you would have to manage new persons and updates “manually”, which could mean more work then using the hidden app part approach.</span></span> <span data-ttu-id="a78f0-209">Это определенно допустимый подход, который может быть съемки и особенно полезна, если выполняется миграция некоторые другие решения для OD4B общего доступа к файлам и хотите избежать необходимости конечных пользователей для доступа к сайту OD4B один раз, до начала создания сайтов фактических данных.</span><span class="sxs-lookup"><span data-stu-id="a78f0-209">This is definitely valid approach which can be taken and especially useful if you are migrating from some other file sharing solution to the OD4B and want to avoid the need of end users to access the OD4B site once, before actuals site creation is started.</span></span>

## <a name="remote-timer-job-based-on-user-profile-updates"></a><span data-ttu-id="a78f0-210">Задание таймера удаленного, на основании изменения профиля пользователя</span><span class="sxs-lookup"><span data-stu-id="a78f0-210">Remote timer job based on user profile updates</span></span> ##

<span data-ttu-id="a78f0-211">Этот подход означает, что сканирования через профилей пользователей для проверки, для которого был создан сайт OD4B, а затем применять изменения на веб-сайты, при необходимости.</span><span class="sxs-lookup"><span data-stu-id="a78f0-211">This approach means scanning through user profiles for checking to whom the OD4B site has been created and then apply the changes to the sites as needed.</span></span> <span data-ttu-id="a78f0-212">Это означает, что запланированное задание под управлением за пределами SharePoint, которое будет периодически проверить состояние и выполнить необходимые настройки.</span><span class="sxs-lookup"><span data-stu-id="a78f0-212">This would mean scheduled job running outside of the SharePoint, which will periodically check the status and perform needed customizations.</span></span> <span data-ttu-id="a78f0-213">Запланированное задание может быть работает как WebJob в Azure или просто сценарий PowerShell, запланированного в планировщик windows.</span><span class="sxs-lookup"><span data-stu-id="a78f0-213">Scheduled job could be running as a WebJob in Azure or as simple as PowerShell script scheduled in your own windows scheduler.</span></span> <span data-ttu-id="a78f0-214">Очевидно, что масштаб развертывания имеет огромную воздействия на выбранный флажок.</span><span class="sxs-lookup"><span data-stu-id="a78f0-214">Obviously the scale of the deployment has huge impact on the chosen scheduling option.</span></span>

![Задание таймера удаленного использует, цикл по семейств веб-сайтов, для настройки каждого сайта.](media/Customization-Options-For-OD4B-Sites/Customization-Options-For-OD4B-Sites-06.png)

<span data-ttu-id="a78f0-216">1. запланированного задания инициируется которого будут получать доступ к профилям пользователей, для проверки, у кого есть OD4B подготовить к работе с сайта 2. фактическое сайты, настроенный с одной основанных на требованиях бизнеса</span><span class="sxs-lookup"><span data-stu-id="a78f0-216">1.Scheduled task is initiated which will access user profiles of the users for checking who has OD4B site provisioned 2.Actual sites are customized one-by-one based on the business requirements</span></span>

<span data-ttu-id="a78f0-217">Одним из ключевых недостатков этого параметра является, что четко возможны ситуации, в котором пользователь может получить доступ сайты OD4B до применения настроек.</span><span class="sxs-lookup"><span data-stu-id="a78f0-217">One of the key downsides of this option is that there can clearly be a situations where user can access the OD4B sites before the customizations have been applied.</span></span> <span data-ttu-id="a78f0-218">В то же время этот параметр используется интересных дополнительный компонент для других параметры, чтобы убедиться, что конечные пользователи не были изменены любые необходимые параметры на сайтах или для проверки содержимого узла OD4B коммерческим политик компании.</span><span class="sxs-lookup"><span data-stu-id="a78f0-218">At the same time this option is interesting add-on for other options to ensure that end users have not changed any of the required settings on the sites or to check that the OD4B site content aligns with the company policies.</span></span>

----------

### <a name="related-links"></a><span data-ttu-id="a78f0-219">Ссылки по теме</span><span class="sxs-lookup"><span data-stu-id="a78f0-219">Related links</span></span> ###
-  [<span data-ttu-id="a78f0-220">Настройка OneDrive для бизнеса веб-сайтов при объектная модель (статья блога MSDN)</span><span class="sxs-lookup"><span data-stu-id="a78f0-220">Customizing OneDrive for Business sites with add-in model (MSDN blog article)</span></span>](http://blogs.msdn.com/b/vesku/archive/2015/01/01/customizing-onedrive-for-business-sites-with-app-model.aspx)

### <a name="related-pnp-samples"></a><span data-ttu-id="a78f0-221">Примеры связанных с ними PnP</span><span class="sxs-lookup"><span data-stu-id="a78f0-221">Related PnP samples</span></span> ###
-  [<span data-ttu-id="a78f0-222">Настройка OD4B сайтов с использованием шаблона асинхронного</span><span class="sxs-lookup"><span data-stu-id="a78f0-222">Customizing OD4B sites using Async pattern</span></span>](#)
-  [<span data-ttu-id="a78f0-223">Процесс часть и синхронизации Классические приложения для настройки сайта OD4B</span><span class="sxs-lookup"><span data-stu-id="a78f0-223">Classic app part and sync process for OD4B site customization</span></span>](https://github.com/SharePoint/PnP/tree/master/Solutions/Provisioning.OneDrive)
-  [<span data-ttu-id="a78f0-224">Предварительное создание OD4B сайты для пользователей</span><span class="sxs-lookup"><span data-stu-id="a78f0-224">Pre-create OD4B sites for users</span></span>](https://github.com/SharePoint/PnP/tree/master/Samples/Provisioning.OneDriveProvisioning)

### <a name="applies-to"></a><span data-ttu-id="a78f0-225">Применимо к</span><span class="sxs-lookup"><span data-stu-id="a78f0-225">Applies to</span></span> ###
-  <span data-ttu-id="a78f0-226">Office 365 нескольких клиентов (MT)</span><span class="sxs-lookup"><span data-stu-id="a78f0-226">Office 365 Multi Tenant (MT)</span></span>
-  <span data-ttu-id="a78f0-227">Office 365 выделенными (D) - *частично*</span><span class="sxs-lookup"><span data-stu-id="a78f0-227">Office 365 Dedicated (D) - *partly*</span></span>
-  <span data-ttu-id="a78f0-228">SharePoint 2013 в локальной - *частично*</span><span class="sxs-lookup"><span data-stu-id="a78f0-228">SharePoint 2013 on-premises - *partly*</span></span>

<span data-ttu-id="a78f0-229">*Шаблонов для выделенными и локальной, совпадают с методики объектная модель, но существуют некоторые отличия на основе возможных технологий, которые можно использовать.*</span><span class="sxs-lookup"><span data-stu-id="a78f0-229">*Patterns for Dedicated and on-premises are identical with add-in model techniques, but there are differences on the possible technologies which can be used.*</span></span>

### <a name="author"></a><span data-ttu-id="a78f0-230">Автор</span><span class="sxs-lookup"><span data-stu-id="a78f0-230">Author</span></span>
<span data-ttu-id="a78f0-231">(VESA juvonen) (Microsoft) - [@vesajuvonen](https://twitter.com/vesajuvonen)</span><span class="sxs-lookup"><span data-stu-id="a78f0-231">Vesa Juvonen (Microsoft) - [@vesajuvonen](https://twitter.com/vesajuvonen)</span></span>

### <a name="version-history"></a><span data-ttu-id="a78f0-232">История изменений</span><span class="sxs-lookup"><span data-stu-id="a78f0-232">Version history</span></span> ###
<span data-ttu-id="a78f0-233">Версия</span><span class="sxs-lookup"><span data-stu-id="a78f0-233">Version</span></span>  | <span data-ttu-id="a78f0-234">Date</span><span class="sxs-lookup"><span data-stu-id="a78f0-234">Date</span></span> | <span data-ttu-id="a78f0-235">Примечания</span><span class="sxs-lookup"><span data-stu-id="a78f0-235">Comments</span></span>
---------| -----| --------
<span data-ttu-id="a78f0-236">1.0</span><span class="sxs-lookup"><span data-stu-id="a78f0-236">1.0</span></span>  | <span data-ttu-id="a78f0-237">2-го января 2015</span><span class="sxs-lookup"><span data-stu-id="a78f0-237">January 2nd, 2015</span></span> | <span data-ttu-id="a78f0-238">Исходный выпуск</span><span class="sxs-lookup"><span data-stu-id="a78f0-238">Initial release</span></span> | <span data-ttu-id="a78f0-239">(Microsoft) (VESA juvonen)</span><span class="sxs-lookup"><span data-stu-id="a78f0-239">Vesa Juvonen (Microsoft)</span></span>

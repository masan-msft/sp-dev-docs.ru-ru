---
title: "Решения для поиска в SharePoint 2013 и SharePoint Online"
ms.date: 11/03/2017
ms.openlocfilehash: 549e899fb3f4994442040b0699ce1367bbdf787a
ms.sourcegitcommit: 65e885f547ca9055617fe0871a13c7fc85086032
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/06/2017
---
# <a name="search-solutions-in-sharepoint-2013-and-sharepoint-online"></a>Решения для поиска в SharePoint 2013 и SharePoint Online

Сведения об архитектуре поиска SharePoint, API поиска и поисковых надстройках.

_**Применимо к:** Office 365 | SharePoint 2013 | Надстройки SharePoint | SharePoint Online_

Простота настройки и развертывания объединяет поиска в SharePoint 2013 с масштабируемость и расширяемость FAST Search Server на платформе одного корпоративного поиска.

SharePoint 2013 включает в себя общие шаблоны в платформе поиска, связанные с настройкой поиска для различных сценариев. Например:

- Поиск видео и поиска беседы включены в качестве ожидания введите [вертикали поиска](https://technet.microsoft.com/en-us/library/dn794227.aspx).
    
- Раздел страницы и содержимое службой поиска улучшить возможности управления контентом web и сценариев, таких как сайты на основе механизмов поиска и сайтов управления базы знаний.
    
- "Мои задачи" собирает задачи проекта, чтобы пользователи могли отслеживать задач, назначенных на нескольких сайтах в одном месте, их OneDrive для бизнеса сайта.

## <a name="sharepoint-2013-search-architecture"></a>Архитектура поиска SharePoint 2013

Архитектура поиска в SharePoint 2013 включает в себя компонентов и баз данных, которые работают вместе. 

**Компоненты поиска в SharePoint 2013**

|**Компонент**|**Описание**|
|:-----|:-----|
|Обход контента |Выполняет обход контента для сбора свойств и метаданных и отправляет их в компонент обработки контента.|
|Обработка контента |Преобразует обойденных элементов и отправляет их в компонент индексирования. Этот компонент также сопоставление свойств для обхода с управляемыми свойствами.|
|Обработка аналитики |Выполняет анализ поиска и анализа использования.|
|Индекс |Получает обработанные элементы из компонент обработки контента и записывает их в индекс поиска. Этот компонент также обрабатывает входящие запросы, извлекает сведения из индекса поиска и отправляет результирующего набора в компонент обработки запросов.|
|Обработка запросов |Анализирует входящие запросы. Это позволяет оптимизировать точности, отзыв и релевантности. Запросы отправляются компонент индекса, который возвращает набор результатов поиска для запроса.|
|Администрирование поиска |Запускает системные процессы для поиска и добавляет и инициализирует новые экземпляры компонентов поиска.|

**Базы данных поиска в SharePoint 2013**

|**Базы данных**|**Описание**|
|:-----|:-----|
|Обход контента |Сохранение отслеживания сведения и журнал сведений о для обхода элементов, таких как документы и URL-адреса. Он также хранит сведения, такие как время последнего обхода контента, идентификатор последнего обхода контента и тип обновления (Добавление, обновление, удаление) во время последнего обхода.|
|Ссылка |Кнопка необработанных хранит сведения, извлеченные обработки компонента и сведения о поиске контента. Компонент обработки аналитики анализирует эти сведения.|
|Аналитических отчетов |Сохраняет результаты анализа сведений об использовании.|
|Администрирование поиска |Хранит данные конфигурации поиска.|

### <a name="crawl-and-content-processing"></a>Обхода и обработки контента.

Процесс обхода начинается с разные источники контента (например, HTTP, общие файловые ресурсы и SharePoint). Контент в индексе добавляется программа-обходчик использует соединителей, которые сообщают программа-обходчик подключения к источнику контента и доступ к элементов контента в источнике. После обнаружения элементов контента программой-обходчиком используется обработчик формата для синтаксического анализа содержимого.

После получения содержимого, передает компонент обхода контента для обхода элементов компоненту обработки контента, который обрабатывает элементы и отправляет их в компонент индексирования. Этот компонент включает синтаксический анализ документа сопоставления свойств для обхода их связанных управляемых свойств и лингвистическая обработка, например извлечения обнаружения и сущности языка. Компонент обработки контента записывает сведения о связях и URL-адреса для базы данных ссылок.

### <a name="query-processing"></a>Обработка запросов

Анализирует компонент обработки запросов и процессов поисковых запросов для оптимизации точности, отзыв и релевантности, включая лингвистических функций обработки, таких как word нарушение и выделение корней для выполнения. Обработанные запроса нажмите Отправить компоненту индекса, который возвращает набор результатов на основе обработанные запроса в компонент обработки запросов, который в свою очередь, результирующий набор процессов.

### <a name="search-analytics"></a>Аналитика поиска

SharePoint анализирует обоих содержимое самого (аналитика поиска), а также то, как пользователи взаимодействуют с ним (анализа использования) и использует эти сведения для улучшения поиска.

Аналитика поиска — об извлечении сведения, такие как ссылки, сколько раз нажатии элемента текста привязки данных, связанных с людей и метаданные, из базы данных ссылок. Аналитика поиска служит основанием для определения соответствия. С другой стороны, о анализ сведений об использовании журнала, полученных от переднего плана с помощью хранилища событий — это анализа использования. Аналитика использования основанием для отчетов об использовании и статистики.

Результаты анализа добавляются элементов в индексе поиска. Кроме того результаты анализа использования, хранятся в базе данных аналитических отчетов.

## <a name="building-blocks-for-customizing-the-search-experience"></a>Стандартные блоки для настройки интерфейса поиска

Поиск в SharePoint 2013 и SharePoint Online включает в себя новые функции и усовершенствования, которые дают возможность настраивать интерфейс поиска. Многие усовершенствования, не требуют написания кода. Поиск SharePoint включает в себя CSOM и API-интерфейсы REST, которые помогут при необходимости создавать код для настройки, или если вы хотите создать надстройки для доступа к SharePoint результатов поиска за пределами SharePoint.

### <a name="search-center-site"></a>Сайт центра поиска

Центр поиска — это узел SharePoint для поиска. Это портал, где можно найти контент в интрасети вашей организации, а также обеспечивает централизованное и настраиваемый пользовательский интерфейс. В этой статье описываются страницы центра поиска и веб-частей, а также параметров конфигурации поиска, которые можно изменить для создания настраиваемого поиска каждый раз без написания большого объема кода или создать настраиваемые приложения поиска.

При создании сайта центра поиска SharePoint создает поиска по умолчанию домашней страницы и страницы результатов поиска по умолчанию. Кроме того также создаются несколько страниц, известных как вертикали поиска. Страницы результатов поиска, которые настроены для поиска конкретных типов контента, например людей и видеоматериалы, являются вертикали поиска и их отображения результатов поиска, фильтрации и форматирования для конкретного типа контента или класса.

В семействе сайтов центра поиска в библиотеке страниц создаются следующие страницы:

- **default.aspx** – Домашняя страница центра поиска и страницы, где конечные пользователи вводят свои запросы.
    
- **results.aspx** - поиска по умолчанию страницы результатов для центра поиска. Это также страницы результатов поиска для **всех компонентов** вертикали поиска.
    
- **peopleresults.aspx** - поиск страницы результатов для вертикали поиска **людей** .
    
- **conversationresults.aspx** - поиск страницы результатов для вертикали поиска **беседы** .
    
- **videoresults.aspx** - поиск страницы результатов для вертикали поиска **видео** .
    
- **advanced.aspx** - страница поиска, где конечные пользователи могут применять ограничения к поисковым запросам, например, ограничивать поиск точной фразы.
    
Все страницы вертикали поиска содержат веб-части результатов поиска, несмотря на то, что веб-часть настроена по-разному для каждого вертикали поиска. Для каждого запроса в веб-части результатов поиска, направляются источника конкретных результатов, которые применяются к этой вертикали поиска. Например запроса в веб-части результатов поиска на странице peopleresults.aspx ограничено источник результатов локальные результаты поиска людей. Общие сведения о том, как настроить вертикали поиска по умолчанию в SharePoint 2013, которые помогут создавать свои собственные поиска вертикальной или настроить центра поиска.

Ниже приведены дополнительные ресурсы, которые помогут в работе с центра поиска.

- [Настройка центра поиска в SharePoint 2013](http://technet.microsoft.com/en-us/library/dn794206%28v=office.15%29.aspx)
    
- [Как создать семейство сайтов центра поиска и включить обход своего контента в SharePoint 2013](http://technet.microsoft.com/en-us/library/dn794245%28v=office.15%29.aspx)
    
- [Создание сайта центра поиска в SharePoint Server 2013](http://technet.microsoft.com/en-us/library/hh582314%28v=office.15%29.aspx)
    
- [Управление центром поиска](http://technet.microsoft.com/en-us/library/jj851144%28v=office.15%29.aspx)
    
- [Управление центра поиска в SharePoint Online](http://office.microsoft.com/en-us/office365-sharepoint-online-enterprise-help/manage-the-search-center-in-sharepoint-online-HA103994122.aspx)

### <a name="search-center-web-parts"></a>Центр поиска веб-частей

Страницы центра поиска содержат четыре типа веб-части: «поиск», результаты поиска, навигации поиска и уточнения результатов поиска. 

#### <a name="search-box-web-part"></a>Веб-части поля поиска

Веб-части поля поиска отображает текстовое поле ввода текста, для которого нужно найти. По умолчанию — это веб-части поля поиска использовать с на домашней странице центра поиска (default.aspx), а также на всех результатов поиска по умолчанию страниц (results.aspx, peopleresults.aspx, conversationresults.aspx и videoresults.aspx).

Можно настроить веб-части поля поиска путем изменения свойств в области инструментов веб-части. Это позволяет выполните следующее:

- Изменение отображения результатов поиска. Например можно показать, частично или на результаты поиска страницы результатов в настраиваемых веб-сайта результатов поиска.
    
- Отключение предложений запроса и людей предложений.
    
- Отображение ссылок на страницу параметров поиска и расширенного поиска.
    
- Измените шаблон отображения для веб-части.
    
Дополнительные сведения можно [настроить свойства веб-части поля поиска в SharePoint Server 2013](http://technet.microsoft.com/en-us/library/gg576963%28v=office.15%29.aspx) и [как изменить текст, который отображается в веб-части поля поиска в SharePoint Server 2013](http://technet.microsoft.com/en-us/library/dn794238%28v=office.15%29.aspx).

#### <a name="search-results-web-part"></a>Веб-части результатов поиска

Веб-части результатов поиска отображает результаты запроса поиска. По умолчанию веб-части результатов поиска используется во всех по умолчанию страниц вертикалей поиска (results.aspx, peopleresults.aspx, conversationresults.aspx и videoresults.aspx). Веб-части результатов поиска также отправляет результаты поиска в веб-части уточнения и веб-части навигации поиска, поэтому необходимо веб-части результатов поиска на поиск страницы результатов для других веб-частей поиска для работы.

Можно изменить свойства веб-части результатов поиска в области веб-части средства для изменения запросов поиска, а также как, чтобы изменить поведение и внешний вид результатов на странице результатов поиска. Изменение значений свойств, выполните следующее:

- Измените источник результатов, чтобы указать контент, который следует искать.
    
- Добавьте переменные запроса или фильтры свойств для настройки результатов поиска для различных пользователей или групп пользователей.
    
- Повысить или понизить уровень элементов или страниц в результатах поиска.
    
- Измените порядок сортировки результатов поиска.
    
- Измените шаблон отображения.
    
Дополнительные сведения о веб-части результатов поиска можно [Настройка свойств веб-части результатов поиска в SharePoint Server 2013](http://technet.microsoft.com/en-us/library/gg549987.aspx) и [Настройка веб-части результатов поиска для использования нового источника результатов в SharePoint 2013](http://technet.microsoft.com/en-us/library/dn794200%28v=office.15%29.aspx).

#### <a name="search-navigation-web-part"></a>Веб-части навигации поиска

Веб-части навигации поиска отображает ссылки, которые позволяют пользователям быстро перемещаться по вертикали различных поиска (все содержимое, людей, беседы и видео). Веб-части навигации поиска использует результаты поиска из веб-части результатов поиска, чтобы при выборе ссылки вертикали поиска, результаты поиска фильтруются и отображаемые в зависимости от настроек вертикали поиска. Изменяя свойства веб-части навигации поиска в области инструментов веб-части, можно настроить веб-часть следующим образом:

- Укажите другой веб-части, из которого необходимо получить результаты.
    
- Измените число ссылок на вертикали поиска для отображения.
    
- Измените внешний вид и макет веб-части.
    
Кроме того, на ленте выберите **Параметры сайта** > **Параметры поиска** , чтобы внести следующие изменения:

- Измените ссылку отображаемые имена.
    
- Изменение порядка связей.

#### <a name="refinement-web-part"></a>Веб-части уточнения

Веб-части уточнения фильтры результаты поиска по категориям, называется уточнения. Пользователи могут выбирать эти уточнений, чтобы сузить результаты поиска. Уточнения, управляемые свойства, которые помечены как _уточнения_ и _возможность запроса_. Сведения об этих параметрах содержатся в разделе [Обзор параметров свойства в обзор схемы поиска в SharePoint Server 2013 управляемых](http://technet.microsoft.com/en-us/library/jj219669%28v=office.15%29.aspx). Можно изменить свойства веб-части уточнения результатов поиска в области инструментов веб-части можно задать следующие:

- Какие веб-части результатов поиска для фильтрации поиска результаты из.
    
- Уточнения для использования в веб-части уточнения.
    
- Шаблон отображения, применяемый к каждому уточнению.
    
- Внешний вид, макет и поведение веб-части уточнения результатов поиска.
    
По умолчанию веб-части уточнения не отображать количество результатов для каждой значение уточнения. Можно добавить счетчиков, изменяя шаблон отображения для уточнения. Дополнительные сведения об этой функции можно [счетчиков добавить уточнения в веб-части уточнения в Настройка свойств веб-части уточнения результатов поиска в SharePoint Server 2013](http://technet.microsoft.com/en-us/library/gg549985%28v=office.15%29.aspx).

Дополнительные сведения о веб-части уточнения и уточнений можно [Планирование использования уточнений на странице результатов поиска в SharePoint 2013](http://technet.microsoft.com/en-us/library/dn794223%28v=office.15%29.aspx) и [как добавить уточнения на страницу результатов поиска в SharePoint 2013](http://technet.microsoft.com/en-us/library/dn794243%28v=office.15%29.aspx).

### <a name="result-sources"></a>Источники результатов

Источники результатов ограничить поиск для определенного контента или подмножество результатов поиска. Можно определить источник результатов, задав следующие:

- Результаты поиска поставщика или исходный URL-адрес для получения поиска из; Например индекс поиска локальной службы поиска SharePoint.
    
- Протокол, используемый для получения результатов поиска; Например, протокол [OpenSearch](http://www.opensearch.org/Home) .
    
- Преобразование запроса, которое может сузить результаты от заданного поставщика поиска или URL-адреса конкретный набор результатов; Например в набор результатов с определенным типом контента.
    
SharePoint 2013 предоставляет 16 источников предварительно настроенного результата, включая локальные результаты SharePoint, беседы и элементы связанные с текущим пользователем. Можно просмотреть сведения об источниках результатов на странице **Управления источниками результатов** . (**Параметры узла** > **поиска** > **Источники результатов**). Затем на странице **Управления источниками результатов** можно создать новые источники результатов одним из следующих двух способов:

- Выберите **Новый источник результатов** и выберите необходимый источник результатов. (Дополнительные сведения см. [Настройка источников результатов для поиска в SharePoint Server 2013](http://technet.microsoft.com/en-us/library/jj683115%28v=office.15%29.aspx)).
    
- Нажмите стрелку рядом с существующим источником результатов, выберите команду **Копировать**, изменить копию и сохраните его под новым именем.
    
Источник результатов определяет один из четырех протоколов для получения результатов поиска. Если источник результатов использует протокол, отличный от **Локального SharePoint**, источник результатов необходимо также указать URL-адрес для получения результатов поиска.

**Протоколы источника результатов и их поставщиков**

|**Протокол источник результатов**|**Поставщик**|**URL-адрес**|
|:-----|:-----|:-----|
|Локальные результаты SharePoint|Индекс поиска локальной службы поиска.|Н/д|
|Удаленный доступ к SharePoint|Индекс службы поиска, размещенной в другой ферме.|Адрес корневого семейства сайтов удаленной фермы SharePoint. |
|OpenSearch 1.0/1.1|Внешний поставщик поиска (например, удаленная поисковая система или канал), который использует протокол OpenSearch для получения результатов поиска.|URL-адрес RSS-канала поставщика поиска, использующего протокол OpenSearch.|
|Exchange|Веб-служб Exchange (EWS).|URL-адрес веб-служб Exchange.|

Дополнительные сведения см. в следующих статьях.

- [Общие сведения об источниках результатов поиска в SharePoint Server 2013](http://technet.microsoft.com/en-us/library/dn186229%28v=office.15%29.aspx)
    
- [Сведения об источниках результатов и федерации](http://technet.microsoft.com/en-us/library/jj219577%28v=office.15%29.aspx#Section12)
    
- [Общие сведения об источниках результатов](http://office.microsoft.com/en-us/sharepoint-server-help/understanding-result-sources-HA102848849.aspx?CTT=1)
    
- [Управление источниками результатов](http://office.microsoft.com/en-us/office365-sharepoint-online-enterprise-help/manage-result-sources-HA103639370.aspx)

### <a name="query-rules"></a>Правила запросов

Использование правил запросов для настройки интерфейса поиска для запросов, которые особенно важны для пользователей. В правило запроса укажите контекста, условия и соответствующих действий. Затем в указанном контексте, и если запрос удовлетворяет указанным условиям, поиска выполняет его соответствующих действий для повышения релевантности результатов поиска.

С учетом контекста можно ограничить запросы правила запросов, которые являются: 

- Выполнить на источник результатов указанного.
    
- Из указанного раздела категории.
    
- Выполнено пользователем, соответствующие указанному пользователю сегмента.
    
В следующей таблице перечислены условия, которые можно указать, вызвать выполнение правила запросов.

**Условия правила запроса**

|**Условие**|**Описание**|
|:-----|:-----|
|Запрос точно соответствует ключевому слову|Правило запроса применяется, когда запрос в точности соответствует слову или фразе, указан.|
|Запрос содержит термин действия|Правило запроса применяется, если запрос содержит термин в виде одно слово или фразу, которая указывает, что пользователь пытается выполнить другое. Термин должен быть в начале или конце запроса и может быть команды, команду или фильтр.|
|Запрос точно соответствует словарю|Правило запроса применяется, когда запрос точно соответствует записи словаря. Эта запись может быть терминов в банке терминов или запись в словаре имен людей. |
|Запрос, обычно в источнике|Правило запроса применяется, если запрос пользователя наиболее часто выполняется в источнике различных результатов от текущей. Это условие использует анализ запросов, пользователей, указанным в различных источниках результатов.|
|Тип результата часто используется для переходов|Правило запроса применяется, если запрос часто заканчивается на пользователей, выбрав результаты определенный тип результата. При создании нового типа результата, можно указать, что эти параметры, следует записать для использования в правила запросов.|
|Расширенное соответствие тексту запроса|Правило запроса применяется, если запрос соответствует регулярному выражению. Он также позволяет использовать варианты ключевое слово, термин действия и условия словаря описано ранее, но с несколько дополнительных элементов управления.|

Правило запроса можно задать три вида действий:

- Добавление **Результатов повышенного уровня** (ранее — **Наиболее подходящих элементов**), который появляется над ранжирования результатов. Например для запроса «Больничный» правило запроса указать определенного результатов повышенного уровня, например ссылка на узел, который содержит сведения о политике компании о времени не на работе.
    
- Добавьте одну или несколько групп результатов, называется блоки результатов. Блок результатов содержит небольшой набор результатов, которые связаны с запроса определенным образом. Как отдельные результаты можно повысить блока результатов или ранжирования с другими результатами поиска. 
    
- Изменение ранжирования результатов с помощью изменения запроса. Например для запроса, который содержит «загрузить панель элементов», правило запроса может распознавать со словом «загрузить» как термин действия и повышения с учетом результатов текущего момента сайт конкретной загрузки в интрасети.
    
Дополнительные сведения о правилах запроса можно [Управление правилами запросов в SharePoint Server 2013](http://technet.microsoft.com/en-us/library/jj871676.aspx).

### <a name="query-transforms"></a>Преобразований запросов

В некоторых случаях для получения результатов поиска, подходящие для пользовательского запроса, запрос необходимо изменить. Для этого с помощью преобразований запросов. Вертикали поиска по умолчанию, включенные в SharePoint 2013, такие как видео, людей и беседы, содержащих преобразований предварительно определенных запросов для Оптимизация работы поиска для этого по вертикали.

Настраивать преобразования запросов можно в трех местах:

- В веб-части, такие как веб-части результатов поиска. 
    
- В правила запроса, который указывает, что определенные действия будет выполняться только в том случае, если определенных условий. 
    
- В разделе источник результатов, в запросе используется для получения результатов поиска.
    
Запрос пользователя применяется сначала на веб-части, а затем правилами запросов, которые применяются, и, наконец, источник результатов. При настройке преобразования источник результатов, вы знаете, что изменения преобразования не будет удален или переопределения, так как источник результатов последнего преобразований запроса. Можно повторно использовать преобразования запроса источника результатов в веб-части или блоки результатов, а можно создать правила запросов или типов, которые применяются только к результатам из определенных источников результатов результатов.

Можно использовать построитель запросов для создания и тестирования преобразований запросов. Можно проверить запрос в построитель запросов, параметр временные тестовые значения для переменных запроса выполнения запроса и предварительный просмотр результатов поиска. Дополнительные сведения о преобразованиях запросов в разделе [Планирование преобразования запросов и упорядочивания результатов в SharePoint 2013](http://technet.microsoft.com/en-us/library/60a1110d-27dc-45d0-86e2-cddc72d072b2%28v=office.15%29).

### <a name="result-types-and-display-templates"></a>Типы результатов и шаблонов отображения

Поиска SharePoint 2013 включает в себя новые рамки результатов, который позволяет легко настраивать способ отображения результатов поиска. Теперь вместо написания настраиваемое преобразование XSLT, чтобы изменить способ отображения результатов поиска, можно настроить внешний вид важные типы результатов с помощью типов результатов и шаблонов отображения.

#### <a name="result-types"></a>Типы результатов

Для отображения результатов поиска по-разному, нужно сортироваться в разных результатов типы результатов поиска. Тип результата — классификация результат поиска, который отличает один результатов поиска из другого. Оно включает в себя коллекции из следующих:

- **Правила** - одно или несколько характеристики или условия для сравнения каждого результата поиска по, например источник результата или тип контента из результатов поиска. Условия правила может быть присоединен с помощью равенства, сравнения и логические операторы.
    
- **Свойства** — список управляемых свойств для результатов поиска. Управляемые свойства необходимо добавить в список свойств перед Сопоставление управляемого свойства для шаблона для отображения.
    
- **Шаблоны для отображения** - позволяет определить способ отображаются все результаты, которые соответствуют условиям и ведут себя на странице результатов поиска.
    
Поиск SharePoint содержит несколько типов результатов по умолчанию. Для их просмотра перейти к **Параметрам сайта** > **Администрирование семейства веб-сайтов** > **Типы результатов поиска**. Типы результатов по умолчанию изменять нельзя. Путем копирования существующей из них и изменения их можно создавать новые типы результатов. Дополнительные сведения о типах результатов по умолчанию, включенные в SharePoint 2013 можно [типы результатов и шаблоны для отображения, которые используются для отображения результатов поиска в SharePoint Server 2013](http://technet.microsoft.com/en-us/library/dn386874%28v=office.15%29.aspx).

#### <a name="display-templates"></a>Шаблоны отображения

Шаблоны для отображения определите макет и поведением окна результатов поиска. Они контролировать, какие управляемые свойства отображаются в результатах поиска и как они отображаются. SharePoint сохраняет шаблоны для отображения во вложенной папке поиска папки шаблонов отображения в коллекции главных страниц. Каждый шаблон отображения состоит из двух файлов: 

- HTML-версии шаблона отображения, который можно изменить в редакторе HTML.
    
- JS-файла, используемом SharePoint. 
    
При работе с шаблонами отображения изменения HTML-файл. JS-файла, который изменил SharePoint. Не изменяйте этот файл на всех.

Существует два основных типа шаблонов отображения:

- **Шаблоны отображения элемента управления** - определение Общая структура как представлены результаты.
    
- **Шаблоны отображения элемента** — определите способ отображения каждого результата в наборе.
    
Шаблон отображения элемента управления содержит HTML-код будет осуществляться общий макет для способ отображения для отображения результатов поиска. Например шаблон отображения элемента управления предоставить HTML-код для заголовка и начало и конец списка. Шаблон отображения элемента управления отображается только один раз в веб-части.

Шаблон отображения элемента содержит HTML-код, который определяет способ отображения каждого элемента в результирующем наборе. Например, шаблон отображения элемента может предоставить HTML-код для элемента списка, содержащего рисунок и три строки текста, которые сопоставляются с различными управляемыми свойствами, связанными с элементом. Шаблон отображения элемента отображается один раз для каждого элемента в результирующем наборе. Если результирующий набор содержит 10 элементов, шаблон отображения элемента создает его HTML-раздел десять раз.

Шаблоны для отображения сведений и их структуры в разделе [Шаблоны отображения 2013 дизайнер SharePoint](http://msdn.microsoft.com/en-us/library/jj945138.aspx) и [веб-части на основе механизмов поиска и шаблоны для отображения](http://msdn.microsoft.com/en-us/library/jj191506.aspx) в [Обзор модели страниц SharePoint 2013](http://msdn.microsoft.com/en-us/library/jj191506.aspx).

Дополнительные сведения о доступных в SharePoint 2013 шаблоны для отображения [в SharePoint Server 2013 ссылка на шаблон для отображения](http://technet.microsoft.com/en-us/library/jj944947.aspx)см.

#### <a name="customize-display-templates"></a>Настройка шаблонов отображения

Если вы хотите настроить шаблоны отображения, включенные в SharePoint, создайте новый шаблон отображения, скопировав контент с тому, который требуется изменить и затем настроить новую версию. Начиная с копию существующего шаблона отображения — также это самый простой способ создать новую, как это гарантирует, что вы начинаете с все необходимые элементы.

Еще один совет при работе с шаблонами отображения — это сопоставление сетевого диска коллекции главных страниц. Дополнительные сведения см [как: сопоставление сетевого диска коллекции главных страниц SharePoint 2013](https://msdn.microsoft.com/en-us/library/office/jj733519.aspx).

HTML-файл, используемый для отображения шаблона — это полностью формат HTML-документ, с `head` и `body` элементы. В рамках `head` элемент, существует `title` элемент, который задает отображаемое имя для шаблона отображения. Текст в этот тег является то, что будут отображаться при выполнении конфигураций в Интерфейсе пользователя SharePoint, например, при настройке тип результата.

После `title` элемент, существует элемент свойства настраиваемого документа `mso:CustomDocumentProperties`. В области шаблоны отображения элемента этот элемент содержит `mso:ManagedPropertyMapping` элемент, который является, где управляемого свойства, используемые службой поиска SharePoint, сопоставляются с значения, используемые в шаблоне отображения. Ниже приведен синтаксис базы данных для: `<display template reference name>:<managed property name>`, как показано в следующем примере.

```HTML
<mso:ManagedPropertyMapping msdt:dt="string">'Title':'Title','Path':'Path','Description':'Description'
```

В рамках `body` элемент, существует `script` которых может включать внешние ресурсы, такие как CSS-файлы или файлы JavaScript за пределами шаблон отображения элемента. Обратитесь к разделу «Блок скрипта» в [Диспетчере оформления SharePoint 2013 шаблоны отображения](http://msdn.microsoft.com/en-us/library/jj945138.aspx) , примеры, показывающие, как включать внешние ресурсы в элементе скрипта.

— Это следующего элемента `div` элемент. Это расположения любой HTML или скрипта, который требуется как часть шаблона отображения. Хороший способ ознакомиться со структурой шаблон отображения — загружать копии шаблоны отображения по умолчанию для результатов поиска, Control_SearchResults.html, шаблон отображения элемента управления и Item_Default.html, шаблон отображения элемента.

#### <a name="additional-resources-for-result-types-and-display-templates"></a>Дополнительные ресурсы для типов результатов и шаблонов отображения

Ниже приведены некоторые дополнительные ресурсы для шаблонов отображения и типы результатов.

- [Настройка типов результатов поиска в SharePoint 2013](http://technet.microsoft.com/en-us/library/dn135239%28v=office.15%29.aspx)
    
- [Как изменить способ отображения результатов поиска в SharePoint Server 2013](http://technet.microsoft.com/en-us/library/dn794204%28v=office.15%29.aspx)
    
- [Общие сведения о способ отображения результатов поиска в SharePoint Server 2013](http://technet.microsoft.com/en-us/library/dn794212%28v=office.15%29.aspx)
    
- [Общие сведения о том, как шаблоны отображения элемента и выделение совпадений в SharePoint Server 2013](http://technet.microsoft.com/en-us/library/dn794249%28v=office.15%29.aspx)
    
- [Создание нового типа результатов в SharePoint Server 2013](http://technet.microsoft.com/en-us/library/dn794234%28v=office.15%29.aspx)
    
- [Способ отображения значений управляемых свойств в результатах поиска — вариант 1 в SharePoint Server 2013](http://technet.microsoft.com/en-us/library/dn794209%28v=office.15%29.aspx)
    
- [Способ отображения значений управляемых свойств в результатах поиска — вариант 2 в SharePoint Server 2013](http://technet.microsoft.com/en-us/library/dn794240%28v=office.15%29.aspx)
    
- [Отображение значений управляемых свойств в меняющейся панели в SharePoint Server 2013](http://technet.microsoft.com/en-us/library/dn794247%28v=office.15%29.aspx)

## <a name="query-apis-and-search-add-ins"></a>API-интерфейсы запроса и выполните поиск надстроек

Поиск SharePoint 2013 включает в себя клиентской объектной модели .NET и JavaScript и службу REST, которая обеспечивает доступ к Интернет-версия результаты поиска, в локальной и разработке для мобильных устройств. 

**API-интерфейсы запроса поиска**

|**API**|**Путь к библиотеке или схемы класс**|**Пример**|
|:-----|:-----|:-----|
|.NET CSOM|Microsoft.SharePoint.Client.Search.dll[Загрузить пакет SDK для SharePoint Server 2013 клиентских компонентов](http://www.microsoft.com/en-us/download/details.aspx?id=35585)%ProgramFiles%\Common Files\Microsoft Shared\web server extensions\15\ISAPI[Загрузить пакет SDK для SharePoint компонентов Online клиента](http://www.microsoft.com/en-us/download/details.aspx?id=42038)% ProgramFiles%\Common Files\Microsoft Shared\web server extensions\16\ISAPI|[SharePoint 2013: запрос поиска с управляемой клиентской](http://code.msdn.microsoft.com/Query-Search-with-the-649f1bc1) [Объектная модель (Коллекция примеров кода)](http://code.msdn.microsoft.com/Query-Search-with-the-649f1bc1)|
|JavaScript CSOM|Components\Scripts SP.search.js%ProgramFiles%\SharePoint клиента|[Запрос поиска с помощью JavaScript клиентской объектной модели](http://code.msdn.microsoft.com/SharePoint-2013-Querying-a629b53b) (Коллекция примеров кода)|
|Служба REST|http://Server/_api/Search/queryhttp://Server/_api/Search/ postqueryhttp://server/_api/search/suggest|[SharePoint 2013: использование поиска REST-службы из SharePoint Add-in](http://code.msdn.microsoft.com/sharepoint/SharePoint-2013-Perform-a-1bf3e87d) (Коллекция примеров кода)|

### <a name="search-query-net-csom"></a>Поисковый запрос .NET CSOM

Чтобы использовать .NET CSOM запрос, создайте новый экземпляр класса [T:Microsoft.SharePoint.Client.ClientContext](https://msdn.microsoft.com/en-us/library/office/microsoft.sharepoint.client.clientcontext.aspx) , который находится в пространстве имен [Microsoft.SharePoint.Client](https://msdn.microsoft.com/en-us/library/office/microsoft.sharepoint.client.aspx) в библиотеке Microsoft.SharePoint.Client.dll. Затем используйте объектной модели запросов в пространстве имен [Microsoft.SharePoint.Search.Client.Query](https://msdn.microsoft.com/en-us/library/office/microsoft.sharepoint.search.query.aspx) . Ниже приведен простой пример.

```C#
using Microsoft.SharePoint.Client; 
using Microsoft.SharePoint.Client.Search.Query;
â€¦
using (ClientContext clientContext = new ClientContext("http://intranet.contoso.com"))
{
    KeywordQuery keywordQuery = new KeywordQuery(clientContext);
    keywordQuery.QueryText = "Argument";
    SearchExecutor searchExecutor = new SearchExecutor(clientContext);
    ClientResult<ResultTableCollection> results = searchExecutor.ExecuteQuery(keywordQuery);
    clientContext.ExecuteQuery();
}
 
```

Теперь можно выполнять итерацию результатов поиска. Ниже приведен пример чтения Заголовок каждого результата.

```C#
foreach (var row in results.Value[0].ResultRows) 
{ 
    Console.WriteLine(row["Title"]); 
}
```

### <a name="search-query-rest-service"></a>Поискового запроса службы REST

Поискового запроса службы REST поддерживает запросов HTTP **POST** и **получить** . При внесении вызова службы поиска REST указании параметров запроса с запросом и поиска использует эти параметры запросов для создания запроса поиска. С помощью запроса на **Получение** указать параметры запроса в URL-адрес. Для запросов **POST** передайте параметров запроса в тексте запроса в формате JavaScript Object Notation (JSON).

**Получение JSON и POST запрашивает**

|Глагол|URI|
|:---|:---|
| Запросы **GET**| `http://server/_api/search/query`|
| Запросы **POST**| `http://server/_api/search/postquery`|

**Примеры запросов GET для службы поиска REST**

|**Тип запроса**|**URL-адрес запроса**|
|:-----|:-----|
|Ключевые слова|http://Server/Site/_api/Search/Query?querytext= '{запрос KQL}»|
|Выбор свойств|http://Server/Site/_api/Search/query?querytext= «test»&amp;selectproperties = «Заголовок, ранг»|
|сортировке;|http://Server/Site/_api/Search/query?querytext= «test»&amp;sortlist ='LastModifiedTime: по убыванию «http://server/site/_api/search/query?querytext=» test "&amp;sortlist ='LastModifiedTime: по убыванию ранг: по возрастанию"|

Полный список доступных параметров запроса и как их использовать содержатся в разделе [Обзор интерфейса API REST поиска SharePoint](http://msdn.microsoft.com/library/8a4f7863-e4c1-4099-9189-a1894db36930%28Office.15%29.aspx). Пример кода, в разделе [SharePoint 2013: использование поиска REST-службы из SharePoint Add-in](https://code.msdn.microsoft.com/sharepoint/SharePoint-2013-Perform-a-1bf3e87d).

### <a name="search-add-ins"></a>Поиск надстроек

SharePoint Add-ins (ранее называлась приложений для SharePoint), автономные функциональные элементы, расширяющие возможности веб-сайта SharePoint. Надстройки поиска (ранее называлась приложения поиска) — SharePoint Add-ins, используйте функции поиска. В поиск надстроек можно использовать API-интерфейсы запроса поиска для получения результатов поиска. Кроме того можно также использовать его для распространения конфигурации поиска с одной установки SharePoint в другую.

Сведения о настройке среды разработки для создания поиск надстроек, [Настройка локальной среды разработки для SharePoint надстройки](http://msdn.microsoft.com/library/b0878c12-27c9-4eea-ae3b-7e79e5a8838d%28Office.15%29.aspx) или [настроить среду разработки для SharePoint надстройки на Office 365](http://msdn.microsoft.com/library/b22ce52a-ae9e-4831-9b68-c9210af6dc54%28Office.15%29.aspx).

#### <a name="permissions"></a>Permissions

Надстройки поиска требуются разрешения на уровне доступа пользователя, где значение атрибута — _QueryAsUserIgnoreAppPrincipal_. Это разрешение позволяет запросов поиска надстройки на основе разрешений пользователя. Это означает, что поиск, возвращаются результаты, основанные на списки контроля доступа пользователя. Чтобы предоставить разрешения на надстройки COM для использования поиска:

1. В **Обозревателе решений**откройте **файл AppManifest.xml**.
    
2. На вкладке **разрешения** выберите **область поиска** , а затем выберите **QueryAsUserIgnoreAppPrincipal**.
    
Дополнительные сведения можно [Добавить разрешений в SharePoint 2013](http://msdn.microsoft.com/library/5f7a8440-3c09-4cf8-83ec-c236bfa2d6c4%28Office.15%29.aspx).

#### <a name="query-apis"></a>API-интерфейсы запроса

Можно использовать .NET CSOM, JavaScript CSOM или службы поиска REST для получения результатов поиска в надстройках поиска. Следующем примере показано, как использовать .NET CSOM запрос для получения результатов поиска в надстройках поиска.

```C#
var spContext = SharePointContextProvider.Current.GetSharePointContext(Context);
using (var clientContext = spContext.CreateUserClientContextForSPHost())
{
    KeywordQuery keywordQuery = new KeywordQuery(clientContext);
    keywordQuery.QueryText = "Argument";
    SearchExecutor searchExecutor = new SearchExecutor(clientContext);
    ClientResult<ResultTableCollection> results = searchExecutor.ExecuteQuery(keywordQuery);
    clientContext.ExecuteQuery();
}

```

## <a name="in-this-section"></a>В этом разделе:

- [Настройки поиска для SharePoint](search-customizations-for-sharepoint.md)

## <a name="additional-resources"></a>Дополнительные ресурсы
<a name="bk_addresources"> </a>

- [Надстройки SharePoint](http://msdn.microsoft.com/library/cd1eda9e-8e54-4223-93a9-a6ea0d18df70%28Office.15%29.aspx)
    
- [Надстройки поиска в SharePoint 2013](http://msdn.microsoft.com/library/21682e45-dd78-4f3c-8f1e-cdd48de3bde2%28Office.15%29.aspx)
    
- [Добавление возможностей поиска для вашей SharePoint надстройки](http://blogs.msdn.com/b/officeapps/archive/2013/05/30/add-search-capabilities-to-your-apps-for-sharepoint.aspx)

---
title: "Навигация по структуре данных SharePoint, представленной в службе REST"
description: "Узнайте, как с помощью конечной точки REST в элементе SharePoint получить доступ к связанным элементам, например родительским сайтам или структуре библиотеки, в которой находится этот элемент."
ms.date: 12/14/2017
ms.prod: sharepoint
ms.openlocfilehash: 30d64635d404e49d5aab5857146e1c2ea192f359
ms.sourcegitcommit: 202dd467c8e5b62c6469808226ad334061f70aa2
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/15/2017
---
# <a name="navigate-the-sharepoint-data-structure-represented-in-the-rest-service"></a>Навигация по структуре данных SharePoint, представленной в службе REST

При работе со службой REST SharePoint часто возникает ситуация, когда вам известен URL-адрес определенного элемента SharePoint, но требуется получить доступ к связанным элементам, например структуре папок и библиотек, в которой находится элемент. Допустим, вы создаете надстройку, в которой пользователь вводит URL-адрес документа в библиотеке SharePoint. После этого надстройка должна разобрать этот URL-адрес и определить фактический URL-адрес сайта SharePoint. После этого надстройка сможет отправлять с сайта дальнейшие запросы от имени пользователя, например на создание, обновление или удаление связанных элементов или ресурсов. 

Для этого надстройка должна запросить у SharePoint следующие сведения:

- Относительные URL-адреса сайта и семейства веб-сайтов, содержащих ресурс.
- Дайджест формы, позволяющий выполнять запросы, меняющие состояние ресурса, например **POST**, **PUT**, **MERGE** и **DELETE**.

### <a name="the-basic-process"></a>Простой процесс:

1. Используйте оператор `/contextinfo` с заданным URL-адресом для доступа к сайту и семейству веб-сайтов, а также дайджестом формы. Используйте оператор `/contextinfo` в следующем формате:
    
    `http://server/web/doclib/forms/_api/contextinfo`
    
    Чтобы усилить защиту от межсайтовых сценариев, оператор `/contextinfo` принимает только запросы **POST**.
    
2. Используйте [свойства объекта SPContextWebInformation](#bk_props), возвращаемые оператором `/contextinfo`, для доступа к дополнительным ресурсам по мере необходимости.
    
 
### <a name="try-it"></a>Попробуйте

1. Начните с URL-адреса определенного элемента SharePoint. Пример:
    
    `http://site/web/doclib/myDocument.docx`
    
2. Удалите имя ресурса в конце URL-адреса так, чтобы URL-адрес указывал на библиотеку документа, папку или список. В этом случае:
    
    `http://site/web/doclib/`
    
3. Добавьте указатель службы REST и оператор `/contextinfo` к URL-адресу:
    
    `http://site/web/doclib/_api/contextinfo`
    
4. Прочитайте дайджест формы и свойства **webFullUrl** из отклика.
 
5. Добавьте указатель службы REST `_api` в конец URL-адреса веб-сайта.

6. Используйте полученный URL-адрес и дайджест формы для отправки запросов о других нужных ресурсах.

При отправке запросов **GET** или отправке запросов с использованием проверенного маркера OAuth передавать дайджест формы не требуется.

<a name="bk_sites"> </a> 

## <a name="navigate-parent-and-child-sites"></a>Навигация по родительским и дочерним сайтам

При навигации по структуре сайтов с помощью серверной объектной модели SharePoint используются свойства **SPWeb.ParentWeb** и **SPWeb.Webs** для доступа к объектам, представляющим родительские и дочерние сайты.

Соответствующие ресурсы REST — `web/parentweb` и `web/webs` — не возвращают объекты, представляющие сайты. Это вызвано тем, что служба REST соответствует стандартам OData, а возврат готовых представлений сайтов сделал бы такие запросы неэффективными. Вместо этого они возвращают [объект WebInfo](#bk_webinfo), содержащий скалярные свойства сайта, но без связанных наборов сущностей, таких как коллекции или семейства полей.

Чтобы перейти к определенному родительскому или дочернему сайту, составьте подходящий URL-адрес REST этого сайта с помощью свойства **Id** или **Title**. После этого вы можете получить доступ к наборам сущностей, связанным с этим сайтом.

<a name="bk_folders"> </a> 

## <a name="navigate-folder-structure"></a>Навигация по структуре папок

Служба REST SharePoint не поддерживает обход иерархии папок сайта путем составления URL-адресов. Вместо этого можно использовать аналог метода **Web.GetFolderByServerRelativeUrl** в службе REST. Пример:

*Навигация, не поддерживаемая в службе REST:* 

`/_vti_bin/client.svc/web/lists/SharedDocuments/folder1/stuff/things/Recycle`
 
*Навигация, поддерживаемая в службе REST:* 
 
`/_vti_bin/client.svc/web/GetFolderByServerRelativeUrl('SharedDocuments/folder1/stuff/things')/Recycle`
 

<a name="bk_props"> </a>

## <a name="spcontextwebinformation-object-properties"></a>Свойства объекта SPContextWebInformation

|**Свойство SPContextWebInformation**|**Описание**|
|:-----|:-----|
|**webFullUrl**|Возвращает URL-адрес относительно сервера для ближайшего сайта.|
|**siteFullUrl**|Получает относительный URL-адрес корневого веб-сайта семейства, в котором содержится сайт.<br/>Если ближайшим веб-сайтом является корневой сайт семейства веб-сайтов, значения свойств **webFullUrl** и **siteFullUrl** одинаковы.|
|**formDigestValue**|Возвращает дайджест формы запроса сервера.|
|**LibraryVersion**|Возвращает текущую версию библиотеки REST.|
|**SupportedSchemaVersions**|Получает поддерживаемые версии схемы библиотеки REST/CSOM.|

<a name="bk_webinfo"> </a>

## <a name="webinfo-object"></a>Объект WebInfo

|**Свойство WebInfo**|**Описание**|
|:-----|:-----|
|**Created**|Возвращает значение, определяющее, когда был создан сайт.|
|**Description**|Возвращает или задает описание сайта.|
|**Id**|Возвращает значение, указывающее идентификатор сайта.|
|**Language**|Возвращает значение, указывающее код языка, используемого на сайте.|
|**LastItemModifiedDate**|Возвращает значение, определяющее, когда в последний раз был изменен элемент на сайте.|
|**Title**|Получает или задает название сайта.|
|**WebTemplateId**|Получает идентификатор шаблона сайта.|

## <a name="see-also"></a>См. также
<a name="bk_addresources"> </a>

- [Знакомство со службой REST в SharePoint](get-to-know-the-sharepoint-rest-service.md)
- [Справочные материалы по REST API и примеры](https://msdn.microsoft.com/library)
- [Получение версий списков документов с помощью значений ETag в службе REST](working-with-lists-and-list-items-with-rest.md#using-etag-values-to-determine-document-and-list-item-versioning)
- [Материалы по OData](get-to-know-the-sharepoint-rest-service.md#odata-resources)
- [Разработка надстроек SharePoint](develop-sharepoint-add-ins.md)
    
 

 

 


---
title: "Изучение структуры манифеста приложения и пакета надстройки SharePoint"
ms.date: 09/25/2017
ms.prod: sharepoint
ms.openlocfilehash: d178c11ac3cfaa0d53f8517bfa3fa7da21a354c2
ms.sourcegitcommit: 1cae27d85ee691d976e2c085986466de088f526c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/13/2017
---
# <a name="explore-the-app-manifest-structure-and-the-package-of-a-sharepoint-add-in"></a>Изучение структуры манифеста приложения и пакета надстройки SharePoint
В этой статье рассказывается о структуре пакета надстройки и файле манифеста для надстройки SharePoint.
 

 **Примечание.** В настоящее время идет процесс замены названия "приложения для SharePoint" названием "надстройки SharePoint". Во время этого процесса в документации и пользовательском интерфейсе некоторых продуктов SharePoint и средств Visual Studio может по-прежнему использоваться термин "приложения для SharePoint". Дополнительные сведения см. в статье [Новое название приложений для Office и SharePoint](new-name-for-apps-for-sharepoint.md#bk_newname).
 


## <a name="add-in-for-sharepoint-package-structure"></a>Структура пакета надстройки SharePoint
<a name="Package"> </a>

Пакет надстройки SharePoint это файл с расширением APP, который соответствует  [новому стандарту упаковки данных (OPC)](http://msdn.microsoft.com/en-us/magazine/cc163372.aspx). Пакет содержит следующие элементы.
 

 

-  **Манифест надстройки.** Это обязательный файл с именем appmanifest.xml. Он сообщает SharePoint некоторые важные свойства надстройки, такие как название и необходимые для запуска разрешения. Дополнительные сведения о содержимом этого файла можно найти в разделе [Файл манифеста надстройки для SharePoint](#AppManifest).
    
 
-  **Пакеты решений SharePoint.** Надстройка может дополнительно включать пакет решений SharePoint (WSP-файл), содержащий компоненты сайта надстройки. Эти компоненты могут включать страницы, экземпляры списков, представления, документы, компоненты на уровне **Web** и другие компоненты SharePoint. (Дополнительные сведения о том, какие компоненты SharePoint могут быть включены в надстройку SharePoint, можно найти в статье [Типы компонентов SharePoint, которые могут находиться в надстройке для SharePoint](host-webs-add-in-webs-and-sharepoint-components-in-sharepoint.md#TypesOfSPComponentsInApps).) WSP-файл может также содержать Надстройки Office. Компоненты из WSP-файла разворачиваются на сайте надстройки. Пример пакета надстройки, включающего пакет решений SharePoint, можно найти в статье  [Создание надстроек с размещением у поставщика, которые включают в себя пользовательский список SharePoint и тип контента](create-a-provider-hosted-add-in-that-includes-a-custom-sharepoint-list-and-conte.md).
    
 
-  **Компоненты хост-сайта с дополнительными действиями или веб-частями надстройки.** В дополнение к компонентам SharePoint, которые разворачиваются на сайте надстройки, Надстройка SharePoint может также разворачивать одно или несколько дополнительных действий (элементов контекстного меню или расширений ленты) на хост-сайте. Это выполняется путем включения в пакет надстройки компонента, не входящего в WSP-файл пакета и разворачивающего компоненты, которые попадут на хост-сайт. Этот "свободный" компонент называется компонентом хост-сайта. Веб-части надстройки разворачиваются на хост-сайте таким же образом. Компонент хост-сайта состоит из стандартного файла SharePoint feature.xml и одного или нескольких связанных файлов elements.xml. Например, файл elements.xml для дополнительного действия содержит разметку **CustomAction** для этого действия. Он также может включать разметку для веб-частей надстройки. В компоненте хост-сайта могут быть только эти два вида компонентов. Такие компоненты хост-сайта не перечисляются в манифесте надстройки. Однако они являются "частями" в контексте OPC, и существует явное отношение OPC между манифестом надстройки и каждым из этих файлов. Пример пакета надстройки, в котором имеется компонент хост-сайта, можно найти в статье [Выполнение пользовательских действий для развертывания надстроек для SharePoint](create-custom-actions-to-deploy-with-sharepoint-add-ins.md).
    
     **Примечание.** Администраторы клиента могут выполнять пакетную установку надстройки SharePoint на несколько веб-сайтов. Надстройка, установленная таким образом, называется надстройкой уровня **Tenant** (Клиент). Если надстройка устанавливается не в пакетном режиме, а отдельно на каждый веб-сайт, то это надстройка уровня **Web** (Интернет). Если компонент хост-сайта включает расширения ленты или части надстройки, то при пакетной установке надстройки они не развертываются на хост-сайтах, так что только элементы контекстного меню развертываются с надстройками на уровне клиента. Уровень надстройки не должен конфликтовать с уровнем компонента. Уровень компонента определяет, где следует развертывать элементы компонента. Возможные уровни: **Farm** (Ферма), **WebApplication** (Веб-приложение), **Site** (Сайт, т. е. семейство веб-сайтов) и **Web** (Интернет). Для компонентов в надстройках SharePoint (как компонентов хост-сайта, так и компонентов в WSP-файле пакета надстройки) разрешен только вариант **Web** (Интернет). Уровень надстройки относится к уровню, на котором установлена надстройка. Возможные уровни: **Web** (Интернет), когда надстройка установлена на одном или нескольких веб-сайтах по очереди, и **Tenant** (Клиент), когда надстройка установлена в пакетном режиме на несколько веб-сайтов в тенантности пользователя. Дополнительные сведения об уровнях **Tenant** (Клиент) и **Web** (Интернет) см. в статье [Тенантности и области развертывания для надстроек SharePoint](tenancies-and-deployment-scopes-for-sharepoint-add-ins.md).
-  **Файлы ресурсов (RESX-файлы) для локализации.** Это составляющие манифеста надстройки для локализации, которые включают название надстройки и составляющие компонентов хост-сайта в пакете надстройки. (Отдельные части пакета надстройки, находящиеся внутри собственных пакетов, таких как WSP-файлы, пакеты Веб-сайты Azure и манифесты надстройка, имеют свои собственные процессы локализации, которые применяются точно так же, как если бы элементы, о которых идет речь, не были частью надстройки SharePoint.) Пример пакета надстройки, содержащего RESX-файлы для компонента хост-сайта, можно найти в статье [Локализация надстроек для SharePoint](localize-sharepoint-add-ins.md).
    
 
-  **Манифесты надстроек Office.** При необходимости в пакете может быть один или несколько манифестов надстроек Office, при этом каждый пакет Надстройка Office. Эта часть может быть включена в пакет надстройки, только если надстройку планируется отправить в корпоративный каталог надстроек SharePoint, а не в общедоступный магазин. Дополнительные сведения можно найти в статье [Публикация надстроек для SharePoint](publish-sharepoint-add-ins.md).
    
 

## <a name="add-in-for-sharepoint-manifest-file"></a>Файл манифеста надстройки SharePoint
<a name="AppManifest"> </a>

Каждая надстройка SharePoint включает файл appmanifest.xml. Файл appmanifest.xml сообщает SharePoint, что он должен знать о надстройке и задает наиболее важные свойства надстройки. Далее приводятся некоторые элементы, которые задаются в манифесте.
 

 

- Внутреннее имя, идентификатор продукта и версия надстройки.
    
 
- URL-адрес начальной страницы, которая открывается при запуске надстройки. Это может быть страница на сайте надстройки, страница в облаке или страница на веб-сервере независимого поставщика ПО.
    
     **Примечание.** При определенных обстоятельствах могут существовать ограничения, из-за которых в элементе **StartPage** можно указывать не все типы файлов. Дополнительные сведения см. в статье [Элемент StartPage (complexType PropertiesDefinition, манифест надстройки SharePoint)](http://msdn.microsoft.com/library/3092674c-a6c3-9021-3d7e-e716562a4a4f%28Office.15%29.aspx). Когда вы сочетаете несколько параметров запроса в значении **StartPage**, необходимо использовать код амперсанда `&amp;amp;`, а не символ `&amp;` или точку с запятой для объединения параметров.
- Другие свойства надстройки. Сюда входит название и поддерживаемые надстройкой языки (оба параметра обязательные), URL-адреса служб, которые обрабатывают события после установки, после обновления и до удаления, и шаблон сайта, который должен использоваться при создании сайта надстройки.
    
 
- Запросы разрешений, необходимых надстройке для доступа к ресурсам SharePoint вне сайта надстройки.
    
 
- Идентификация субъекта надстройки в целях проверки подлинности и авторизации. Это субъект, который предоставляет разрешения. Для надстроек с размещением в SharePoint этот элемент не нужен.
    
 
- Список обязательных компонентов (если таковые имеются), которые должны быть доступны, чтобы можно было установить надстройку. Например, может требоваться установка, лицензирование и активация определенных компонентов или служб.
    
 

 **Примечание.** Файл манифеста надстройки — единственный обязательный элемент в пакете надстройки, при этом не все элементы в списке выше должны обязательно входить в этот файл. 
 

Дополнительные сведения о разметке манифеста надстройки можно найти в разделе  [Справочник по схеме для манифестов SharePoint Add-ins](http://msdn.microsoft.com/library/1f8c5d44-3b60-0bfe-9069-1df821220691%28Office.15%29.aspx). Эта статья не заменяет сведения из указанного раздела, в том числе сведения об обязательных элементах и атрибутах. Обратите внимание также на то, что схема манифестов надстроек SharePoint отличается от схемы манифестов надстроек Office. Дополнительные сведения можно найти в разделе  [Справка по схеме для приложений для манифестов Office (версия 1.1)](http://msdn.microsoft.com/library/7e0cadc3-f613-8eb9-57ef-9032cbb97f92%28Office.15%29.aspx).
 

 
Далее приводится пример файла appmanifest.xml. Обратите внимание, что в этом примере начальной страницей надстройки является страница ASP.NET, находящаяся на удаленном сервере, а не страница сайта SharePoint. URL-адрес для этой страницы включает строку запроса, которая передает в удаленное веб-приложение URL-адрес хост-сайта. Часть "{HostUrl}" строки является маркером, который разрешается при запуске надстройки. Надстройка запрашивает разрешение на запись во все списки на хост-сайте. Субъектом надстройки, которому необходимо предоставить это разрешение, является удаленное веб-приложение.
 

 
В манифесте надстройки вам необходимо использовать либо элемент **SupportedLocales**, либо элемент **SupportedLanguages**. Элемент **SupportedLanguages** устарел и теперь заменяется элементом **SupportedLocales**. Элемент **SupportedLanguages** будет работать даже после выпуска, однако следует воздерживаться от его использования. Дополнительные сведения об этих элементах см. в статьях [Элемент SupportedLocales (complexType PropertiesDefinition, манифест надстройки SharePoint)](http://msdn.microsoft.com/library/49bde91a-8d7a-be17-4c91-82c9c19f0f61%28Office.15%29.aspx) и [Элемент SupportedLanguages (complexType PropertiesDefinition, манифест надстройки SharePoint)](http://msdn.microsoft.com/library/7a8da886-5731-9abd-2911-5cd268bba4cf%28Office.15%29.aspx).
 

 

 **Примечание** Значения атрибута **Scope** элемента **AppPermissionRequest** структурированы как URI, но фактически это строковые литералы. Ни одна часть значения **Scope** в примере ниже не является заполнителем. Дополнительные сведения о разрешениях см. в статье [Разрешения для надстроек в SharePoint](add-in-permissions-in-sharepoint.md).
 




```XML
<?xml version="1.0" encoding="utf-8" ?>
<App xmlns="http://schemas.microsoft.com/sharepoint/2012/app/manifest"
     ProductID="{4a07f3bd-803d-45f2-a710-b9e944c3396e}"
     Version="1.0.0.0"
     SharePointMinVersion="15.0.0.0"
     Name="MySampleApp"
>
  <Properties>
    <Title>My Sample App</Title>
    <StartPage>http://MyRemoteWebApplicationServer/default.aspx/?SPHostUrl={HostUrl}</StartPage>
    <SupportedLocales>
      <SupportedLocale CultureName="en-US" />
    </SupportedLocales>        
  </Properties>

  <AppPermissionRequests>
    <AppPermissionRequest Scope="http://sharepoint/content/sitecollection/web/list" Right="Write"/>
  </AppPermissionRequests>

  <AppPrincipal>
    <RemoteWebApplication ClientId="1ee82b34-7c1b-471b-b27e-ff272accd564" />
  </AppPrincipal>
</App>

```


### <a name="url-tokens-in-the-add-in-manifest"></a>Маркеры URL-адресов в манифесте надстройки

В SharePoint имеется несколько маркеров, которые можно использовать в элементе **StartPage** и в других местах надстроек и их компонентов, чтобы представлять информацию, которая неизвестна до запуска надстройки. Инфраструктура SharePoint разрешает эти маркеры. Одни маркеры используются в начале URL-адреса, а другие можно использовать в URL-адресе в качестве значения параметра запроса. Эти маркеры и ряд других маркеров также можно использовать во многих контекстах разработки SharePoint. Подробные сведения обо всех этих маркерах и о том, где их можно использовать, см. в статье [Строки URL-адресов и маркеры в надстройках SharePoint](url-strings-and-tokens-in-sharepoint-add-ins.md). Общие сведения об остальных маркерах и URL-адресах в SharePoint см. в статье [URL-адреса и маркеры в SharePoint](http://msdn.microsoft.com/library/161418d7-8123-4c4e-91a1-97e43c17f0e6%28Office.15%29.aspx).
 

 

 **Примечание.** Эти маркеры не используются в атрибуте **Scope** элемента **AppPermissionRequest**.
 


## <a name="additional-resources"></a>Дополнительные ресурсы
<a name="SP15Exploreappmanifest_bk_addlresources"> </a>


-  [Разработка надстроек SharePoint](develop-sharepoint-add-ins.md)
    
 
-  [Важные аспекты разработки и архитектуры для надстроек SharePoint](important-aspects-of-the-sharepoint-add-in-architecture-and-development-landscap.md)
    
 
-  [Справочник по схеме для манифестов надстроек SharePoint](http://msdn.microsoft.com/library/1f8c5d44-3b60-0bfe-9069-1df821220691%28Office.15%29.aspx)
    
 
-  [Open Packaging Conventions (OPC)](http://msdn.microsoft.com/en-us/magazine/cc163372.aspx)
    
 
-  [Подключение приложения уровня данных (DAC)](http://msdn.microsoft.com/en-us/library/ee210546)
    
 
-  [Web Deploy 2.0](http://www.iis.net/download/WebDeploy)
    
 


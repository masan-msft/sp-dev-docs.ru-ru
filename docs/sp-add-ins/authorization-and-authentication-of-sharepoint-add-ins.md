# <a name="authorization-and-authentication-of-sharepoint-add-ins"></a><span data-ttu-id="6f027-101">Авторизация и проверка подлинности надстроек SharePoint</span><span class="sxs-lookup"><span data-stu-id="6f027-101">Authorization and authentication of SharePoint Add-ins</span></span>
<span data-ttu-id="6f027-102">Общие сведения о проверке подлинности и авторизации в SharePoint, используемых для авторизации запросов надстройки SharePoint на доступ к ресурсам SharePoint.</span><span class="sxs-lookup"><span data-stu-id="6f027-102">Get an overview of authentication and authorization in SharePoint, which is used to authorize requests by a SharePoint Add-in to access SharePoint resources. Watch a video about add-in identity.</span></span>
 

 <span data-ttu-id="6f027-p101">**Примечание.** Название "приложения для SharePoint" меняется на "надстройки SharePoint". Пока изменения не будут внесены полностью, в документации и пользовательском интерфейсе некоторых продуктов SharePoint и средств Visual Studio по-прежнему может встречаться термин "приложение". Дополнительные сведения см. в разделе [Новое название приложений для Office и SharePoint](new-name-for-apps-for-sharepoint#bk_newname).</span><span class="sxs-lookup"><span data-stu-id="6f027-p101">The name "apps for SharePoint" is changing to "SharePoint Add-ins". During the transition, the documentation and the UI of some SharePoint products and Visual Studio tools might still use the term "apps for SharePoint". For details, see [New name for apps for Office and SharePoint](new-name-for-apps-for-sharepoint#bk_newname).</span></span>
 

## <a name="add-in-authentication-in-sharepoint"></a><span data-ttu-id="6f027-106">Проверка подлинности надстроек в SharePoint</span><span class="sxs-lookup"><span data-stu-id="6f027-106">Add-in authentication in SharePoint</span></span>
<span data-ttu-id="6f027-107"><a name="AuthN"> </a></span><span class="sxs-lookup"><span data-stu-id="6f027-107"></span></span>

<span data-ttu-id="6f027-p102">Когда  *пользователь*  входит в SharePoint, проверяется его маркер безопасности. Маркер выдается поставщиком удостоверений. SharePoint поддерживает несколько видов аутентификации пользователя. Дополнительные сведения см. в статье [Проверка подлинности, авторизация и безопасность в SharePoint](http://msdn.microsoft.com/library/8734790c-eb75-4d78-9604-7cc23b33b693%28Office.15%29.aspx).</span><span class="sxs-lookup"><span data-stu-id="6f027-p102">When a  *user*  signs in to SharePoint, the user's security token is validated. The token is issued by an identity provider. SharePoint supports several kinds of user authentication. For more information, see [Authentication, authorization, and security in SharePoint](http://msdn.microsoft.com/library/8734790c-eb75-4d78-9604-7cc23b33b693%28Office.15%29.aspx).</span></span>
 

 
<span data-ttu-id="6f027-p103">Надстройки SharePoint это также субъекты безопасности, требующие проверки подлинности и авторизации. Проверку подлинности и авторизацию надстроек можно выполнить несколькими различными способами. Дополнительные сведения см. в статье  [Три системы авторизации для надстроек для SharePoint](three-authorization-systems-for-sharepoint-add-ins).</span><span class="sxs-lookup"><span data-stu-id="6f027-p103">SharePoint Add-ins are also security principals that need to be authenticated and authorized. Add-ins can be authenticated and authorized in several different ways. For more information, see  [Three authorization systems for SharePoint Add-ins](three-authorization-systems-for-sharepoint-add-ins).</span></span> 
 

 

## <a name="authorization-policies-user-only-policy-useradd-in-policy-or-add-in-only-policy"></a><span data-ttu-id="6f027-115">Политики авторизации: только для пользователей, для пользователей и надстроек или только для надстроек</span><span class="sxs-lookup"><span data-stu-id="6f027-115">Authorization policies: user-only policy, user+add-in policy, or add-in-only policy</span></span>
<span data-ttu-id="6f027-116"><a name="AuthZ"> </a></span><span class="sxs-lookup"><span data-stu-id="6f027-116"></span></span>

<span data-ttu-id="6f027-117">Процесс авторизации проверят, имеет ли прошедший проверку подлинности субъект (надстройка, пользователь или и то, и другое) разрешение на выполнение определенных операций или на доступ к конкретным ресурсам (например, к списку или к папке документов SharePoint).</span><span class="sxs-lookup"><span data-stu-id="6f027-117">The authorization process verifies that an authenticated subject (an add-in or a user or both) has permission to perform certain operations or to access specific resources (for example, a list or a SharePoint document folder).</span></span>
 

 
<span data-ttu-id="6f027-p104">В SharePoint используется три типа политик авторизации. Политика только для пользователя требует только того, чтобы вызов SharePoint включал удостоверение пользователя, прошедшее проверку подлинности. Политика только для надстройки требует только того, чтобы вызов включал удостоверение надстройки, прошедшее проверку подлинности. Политика для пользователя и надстройки требует, чтобы вызов включал удостоверения обоих видов, прошедшие проверку подлинности. Когда пользователь получает доступ к ресурсам SharePoint через пользовательский интерфейс SharePoint, а не через надстройку, SharePoint применяет политику только для пользователя. Тем не менее для вызовов, которые отправляет надстройка SharePoint, SharePoint всегда использует политику только для надстройки или политику для надстройки и пользователя. Надстройка SharePoint определяет используемую политику по типу маркера доступа, включенного в запрос к SharePoint. При отправке запроса для надстройки и пользователя SharePoint будет требовать, чтобы и у надстройки, и у пользователя были разрешения для ресурса, к которому надстройка получает доступ. В случае с запросом только для надстройки SharePoint требует, чтобы у надстройки были разрешения для ресурса. При этом не имеет значения, есть ли такие разрешения у пользователя (надстройка SharePoint может отправлять запросы только для надстройки, если ей заранее, обычно при установке, были предоставлены соответствующие разрешения).</span><span class="sxs-lookup"><span data-stu-id="6f027-p104">SharePoint users three types of authorization policies. The user-only policy requires only that the call to SharePoint include an authenticated user identity. Theadd-in-only policy requires only that the call include only an authenticated add-in identity. Theuser+add-in policy requires that the call include both kinds of authenticated identities. When a user accesses SharePoint resources through the SharePoint UI, instead of through an add-in, SharePoint uses the user-only policy. However, for calls from a SharePoint Add-in, SharePoint always uses either the add-in-only or the user+add-in policy. The SharePoint Add-in determines which policy is used by the type of access token that it includes in its request to SharePoint. If a user+add-in request is made, SharePoint will require that both the add-in and the user have permission to the resource the add-in is accessing. In the case of an add-in-only request, SharePoint requires that the add-in have permission to the resource, but it does not matter whether the user does or not. (a SharePoint Add-in can make add-in-only requests only if it has been given permission to do so in advance; typically, when it is installed.)</span></span>
 

 
<span data-ttu-id="6f027-128">Дополнительные сведения о политиках авторизации и принципе их работы см. в статье [Типы политик авторизации надстроек в SharePoint](add-in-authorization-policy-types-in-sharepoint-2013).</span><span class="sxs-lookup"><span data-stu-id="6f027-128">For more information about authorization policies and how they work, see  [Add-in authorization policy types in SharePoint](add-in-authorization-policy-types-in-sharepoint-2013).</span></span>
 

 

## <a name="add-in-permissions-and-add-in-permission-request-scopes"></a><span data-ttu-id="6f027-129">Разрешения и области запросов разрешений для надстроек</span><span class="sxs-lookup"><span data-stu-id="6f027-129">Add-in permissions and add-in permission request scopes</span></span>
<span data-ttu-id="6f027-130"><a name="Permissions"> </a></span><span class="sxs-lookup"><span data-stu-id="6f027-130"></span></span>

<span data-ttu-id="6f027-p105">Разработчик, создавший надстройку SharePoint, должен указать в файле манифеста надстройки разрешения, необходимые для ресурсов SharePoint за пределами сайта надстройки. (Надстройка автоматически получает полный доступ ко всему сайту надстройки.) Если надстройка предназначена для запуска из SharePoint, инфраструктура установки надстройки запрашивает у пользователя, устанавливающего ее, следует ли предоставить необходимые разрешения. После получения разрешений пользователи веб-сайта смогут работать с надстройкой без повторного предоставления разрешений. Тем не менее если надстройка должна запускаться за пределами SharePoint (то есть она не установлена в SharePoint), SharePoint спрашивает у пользователя, запускающего надстройку, следует ли предоставить необходимые разрешения при каждом ее запуске. Надстройки на мобильных устройствах и Надстройки Office это надстройки, которые могут получать доступ к среде SharePoint, но не устанавливаются в ней.</span><span class="sxs-lookup"><span data-stu-id="6f027-p105">The developer of a SharePoint Add-in must specify, through the add-in manifest file, the permissions an add-in needs to SharePoint resources outside the add-in web. (The add-in automatically has full control permission to the entire add-in web.) When the add-in is designed to be launched from within SharePoint, the add-in installation infrastructure prompts the user who installs the add-in to grant or deny the needed permissions. Once the permissions have been granted, users of the website can use the add-in without having to re-grant it permissions. However, when the add-in is designed to be launched outside of SharePoint; that is, it is not installed on SharePoint, then SharePoint will prompt the user who is executing the add-in to grant the needed permissions each time the add-in is run. Add-ins on mobile devices and Office Add-ins are examples of add-ins that can access SharePoint, but are not installed on it.</span></span>
 

 
<span data-ttu-id="6f027-p106">Только владелец веб-сайта может установить надстройку SharePoint на веб-сайте SharePoint (если не была создана настраиваемая роль с правами для установки надстроек). Пользователь может предоставить надстройке только те разрешения, которые есть у него самого. Поэтому пользователь не может установить надстройку, требующую разрешений, которых у него нет. Аналогично, пользователь не может запускать настройку, предназначенную для запуска из внешней среды, которой требуются разрешения, отсутствующие у пользователя. Но если Надстройка SharePoint установлена в SharePoint, она может запрашивать разрешение только на вызовы надстроек. Надстройка с таким разрешением может получать доступ к SharePoint способами, на которые нет разрешения у пользователя, запускающего ее.</span><span class="sxs-lookup"><span data-stu-id="6f027-p106">Only a website owner can install a SharePoint Add-in on a SharePoint website (unless a custom role has been created that has add-in installation rights). A user can grant an add-in only those permissions that the user himself or herself has. So a user cannot install an add-in that needs permissions the user doesn't have. Similarly, a user cannot run and externally launched add-in that needs permissions that the user does not have. However, when a SharePoint Add-in is installed on SharePoint, it can ask for permission to make add-in-only calls. An add-in that has that permission can access SharePoint in ways that the user running the add-in does not have permission to do.</span></span>
 

 
<span data-ttu-id="6f027-142">Администраторы клиентов SharePoint Online и ферм SharePoint также могут отзывать и предоставлять разрешения для надстроек.</span><span class="sxs-lookup"><span data-stu-id="6f027-142">Add-ins can also have permissions revoked or granted by SharePoint Online tenant administrators or SharePoint farm administrators.</span></span>
 

 
<span data-ttu-id="6f027-p107">В файле манифеста Надстройка SharePoint указывает разрешения, которые необходимы ей для правильной работы. В запросах на разрешения указываются как права, необходимые надстройке, так и область, в которой требуются эти права. Области указывают, где применяется запрос на разрешение в иерархии SharePoint. SharePoint поддерживает четыре различных области контента: клиент, семейство веб-сайтов, веб-сайт и список. Существуют также специальные области для выполнения поисковых запросов, доступа к данным таксономии, социальным функциям, возможностям Службы Microsoft Business Connectivity Services (BCS) и Project Server 2013. Дополнительные сведения см. в разделе  [Разрешения для надстроек в SharePoint](add-in-permissions-in-sharepoint-2013).</span><span class="sxs-lookup"><span data-stu-id="6f027-p107">In the add-in manifest file, a SharePoint Add-in specifies the permissions that it needs to function correctly. The permission requests specify both the rights that an add-in needs and the scope at which they need the rights. Scopes indicate where in the SharePoint hierarchy a permission request applies. SharePoint supports four different content scopes: tenancy, site collection, website, and list. There are also special scopes for performing search queries, accessing taxonomy data, social features, Microsoft Business Connectivity Services (BCS) features, and Project Server 2013 features. For more information, see  [Add-in permissions in SharePoint](add-in-permissions-in-sharepoint-2013).</span></span>
 

 

## <a name="when-is-oauth-used"></a><span data-ttu-id="6f027-149">В каких случаях используется OAuth?</span><span class="sxs-lookup"><span data-stu-id="6f027-149">When is OAuth used?</span></span>
<span data-ttu-id="6f027-150"><a name="FileName_uniquekeyword4"> </a></span><span class="sxs-lookup"><span data-stu-id="6f027-150"></span></span>

<span data-ttu-id="6f027-p108">Возможно, вы уже слышали, что OAuth 2.0 играет важную роль при проверки подлинности и авторизации надстроек SharePoint. Это действительно так, но Надстройка SharePoint может и не использовать этот протокол для авторизации. Если планируется создать надстройку SharePoint, работающую в удаленном веб-приложении и взаимодействующую с SharePoint с использованием кода на стороне сервера, то придется использовать OAuth. Если удаленное веб-приложение находится вне локальной среды, используется  [система авторизации с низким уровнем доверия](creating-sharepoint-add-ins-that-use-low-trust-authorization), в которой служба Azure ACS выступает поставщиком маркеров доступа. Если веб-приложение находится в локальной среде, обычно используется  [система с высоким уровнем доверия](creating-sharepoint-add-ins-that-use-high-trust-authorization), в которой сама надстройка и цифровой сертификат служат поставщиками маркеров доступа.</span><span class="sxs-lookup"><span data-stu-id="6f027-p108">You may have already heard that OAuth 2.0 plays an important role in the authentication and authorization of SharePoint Add-ins. It does, but it is not necessarily a part of the authorization story for every SharePoint Add-in. If you plan to build a SharePoint Add-in that runs in an remote web application and communicates back to SharePoint using server-side code, you will need to use OAuth. If the remote web application is off premise, then you would use  [the low-trust authorization system](creating-sharepoint-add-ins-that-use-low-trust-authorization) in which Azure ACS is the access token issuer. If it is on premise, then you would typically use [the high-trust system](creating-sharepoint-add-ins-that-use-high-trust-authorization) in which the add-in itself and a digital certificate are the access token issuers.</span></span>
 

 
<span data-ttu-id="6f027-p109">Не следует использовать OAuth для вызова JavaScript на странице в самом веб-сайте надстройки или с удаленной веб-страницы с помощью  [междоменной библиотеки](creating-sharepoint-add-ins-that-use-the-cross-domain-library). Дополнительные сведения о междоменных библиотеках см. в статье  [Создание надстроек для SharePoint, которые используют междоменную библиотеку](creating-sharepoint-add-ins-that-use-the-cross-domain-library).</span><span class="sxs-lookup"><span data-stu-id="6f027-p109">You would not use OAuth to make a call from JavaScript on a page in the add-in web itself or from a remote webpage using  [the cross-domain library](creating-sharepoint-add-ins-that-use-the-cross-domain-library). For more information on the cross-domain library, see  [Creating SharePoint Add-ins that use the cross-domain library](creating-sharepoint-add-ins-that-use-the-cross-domain-library).</span></span>
 

 

## <a name="additional-resources"></a><span data-ttu-id="6f027-158">Дополнительные ресурсы</span><span class="sxs-lookup"><span data-stu-id="6f027-158">Additional resources</span></span>
<span data-ttu-id="6f027-159"><a name="Filename_AdditionalResources"> </a></span><span class="sxs-lookup"><span data-stu-id="6f027-159"></span></span>


-  [<span data-ttu-id="6f027-160">Три системы авторизации для надстроек SharePoint</span><span class="sxs-lookup"><span data-stu-id="6f027-160">Three authorization systems for SharePoint Add-ins</span></span>](three-authorization-systems-for-sharepoint-add-ins)
    
 
-  [<span data-ttu-id="6f027-161">Разрешения надстроек в SharePoint</span><span class="sxs-lookup"><span data-stu-id="6f027-161">Add-in permissions in SharePoint</span></span>](add-in-permissions-in-sharepoint-2013)
    
 
-  [<span data-ttu-id="6f027-162">Надстройки SharePoint</span><span class="sxs-lookup"><span data-stu-id="6f027-162">SharePoint Add-ins</span></span>](sharepoint-add-ins)
    
 

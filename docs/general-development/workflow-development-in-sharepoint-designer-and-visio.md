---
title: "Разработка рабочих процессов в SharePoint Designer и Visio"
ms.date: 09/25/2017
ms.prod: sharepoint
ms.assetid: 496780d5-47d6-4a43-bf14-70aefb8d820c
ms.openlocfilehash: 7a6e5e4d3cff0289930a34da749fd8fa7ce10585
ms.sourcegitcommit: 1cae27d85ee691d976e2c085986466de088f526c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/13/2017
---
# <a name="workflow-development-in-sharepoint-designer-and-visio"></a>Разработка рабочих процессов в SharePoint Designer и Visio
Узнайте, как использовать Visio 2013 и SharePoint Designer 2013, чтобы создавать и публиковать рабочие процессы для сайта SharePoint без какого-либо кода.
## <a name="introduction"></a>Введение
<a name="VSSPD_Intro"> </a>

Visio 2013 и SharePoint Designer 2013 упрощают совместную работу и создание рабочих процессов для бизнес-аналитиков, консультантов и ИТ-специалистов. И Visio профессиональный 2013, и визуальный конструктор в SharePoint Designer 2013 используют расширенное представление рабочих процессов в формате, понятном программистов и далеким от программирования пользователям.
  
    
    

> **Примечание.** Инструкции по установке и настройке SharePoint и сервера Workflow Manager см. в статье [Настройка рабочих процессов в SharePoint](http://technet.microsoft.com/ru-RU/library/jj658586.aspx). 
  
    
    

С помощью Visio 2013 можно визуально создать рабочий процесс SharePoint, экспортировать его в SharePoint Designer 2013, а затем опубликовать на сайте SharePoint. После создания рабочего процесса в Visio 2013 его необходимо экспортировать в SharePoint Designer 2013. Затем владелец сайта SharePoint или ИТ-специалист добавляет параметры рабочего процесса, используя текстовый редактор и новый визуальный конструктор рабочих процессов, который представляет собой элемент управления ActiveX Visio 2013, размещенный в SharePoint Designer 2013. После завершения рабочего процесса он может быть опубликованы на сайте SharePoint.
  
    
    
Эти возможности идеально подходят для бизнес-аналитиков и консультантов по процессам, которые уже знакомы с блок-схемами в Visio, поскольку они позволяют создавать рабочие процессы, представляющие бизнес-логику. Пользователь, проектирующий рабочий процесс, может сосредоточиться исключительно на бизнес-аналитике, при этом не надо быть экспертом по декларативным рабочим процессам.
  
    
    

## <a name="about-creating-sharepoint-workflows-in-visio-2013-and-sharepoint-designer-2013"></a>Сведения о создании рабочих процессов SharePoint в Visio 2013 и SharePoint Designer 2013
<a name="VSSPD_About"> </a>

В Visio 2013 представлен шаблон рабочего процесса SharePoint, который можно использовать для создания рабочих процессов SharePoint. Шаблон рабочего процесса SharePoint связан с тремя наборами элементов: действиями рабочего процесса SharePoint, условиями рабочего процесса SharePoint и фигурами завершения рабочего процесса SharePoint. Фигуры в этих наборах элементов соответствуют определенным действиям и условиям, которые можно использовать в рабочем процессе SharePoint. Чтобы создать рабочий процесс, необходимо просто перетащить фигуры на полотно в Visio 2013 для моделирования бизнес-логики рабочего процесса.
  
    
    

### <a name="stages-loops-and-steps"></a>Стадии, циклы и этапы

Рабочие процессы в SharePoint Designer 2013 теперь используют понятия стадий, циклов иэтапов. Создатели рабочих процессов могут сгруппировать несколько отдельных действий и условий в единый блок, чтобы более четко определить процесс. Например, может существовать стадия или этап утверждения или запроса. Эта стадия или этап будут содержать все действия, необходимые для процесса. Сама стадия или этап могут быть узлом более крупного рабочего процесса, при этом пользователи будут видеть состояние стадии или этапа как единого целого, а не набора отдельных действий.
  
    
    
Шаблон рабочего процесса SharePoint, который входит в Visio 2013, также использует стадии, циклы и этапы как логические блоки для создания рабочего процесса. 
  
    
    

> **Внимание!** Из-за существенных различий шаблонов рабочего процесса Microsoft SharePoint 2010 и SharePoint вы не можете использовать фигуры из одного шаблона в схеме, созданной в другом шаблоне. Только фигуры из наборов элементов "Действия рабочего процесса SharePoint", "Условия рабочего процесса SharePoint" и "Фигуры завершения рабочего процесса в SharePoint" можно использовать для создания рабочего процесса SharePoint. 
  
    
    


### <a name="stage-shapes"></a>Фигуры стадий

Стадия может содержать любое число фигур, а также ветвления. Однако в стадии может быть только один вход в стадию (и этап) и один выход. Все действия в рабочем процессе должны входить в рабочую область. Фигуры стадии отображаются с помощью фигур контейнера. Для получения фигуры стадии необходимо добавить фигуру входа и выхода к краям контейнера, чтобы определить вход и выход из стадии. Visio 2013 и визуальный конструктор в SharePoint Designer 2013 добавляют фигуры входа и выхода автоматически после перетаскивания контейнера.
  
    
    
К стадиям также применяются следующие правила:
  
    
    

- По крайней мере одна стадия должна входить в каждую схему. Стадия с фигурами входа и выхода составляют шаблон рабочего процесса SharePoint по умолчанию.
    
  
- Если добавить новую стадию на полотно, Visio 2013 добавит соединители начала и окончания после перетаскивания стадии.
    
  
- У стадий могут быть только соединители, выходящие из фигур входа и выхода.
    
  
- Контейнеры стадий не могут быть вложенными. Если вам требуется вложить подпроцесс в стадию, используйте этап.
    
  
- В стадии можно разместить фигуры остановки рабочего процесса.
    
  
- Явная фигура начала должна быть расположена вне стадии для всей схеме. Явная фигура завершения вне стадии необязательна.
    
  
- На верхнем уровне рабочий процесс может содержать только стадии, условные фигуры, а также оконечные фигуры начала и завершения. Все другие фигуры должны входить в стадию.
    
  

### <a name="loop-shapes"></a>Фигуры циклов

Циклы  это ряд соединенных фигур, которые будут выполняться как цикл, возвращаясь из последней фигуры в первую, пока условие выполняется. 
  
    
    
Как и стадии, циклы представлены в виде фигуры контейнера, которая содержит фигуры входа и выхода (они добавляются при перетаскивании фигуры на полотно). Для фигуры цикла также требуется добавить фигуры входа и выхода к краям контейнера для определения входа и выходы из цикла.
  
    
    
Visio 2013 и SharePoint Designer 2013 поддерживают два типа циклов: цикл  *n*  раз и цикл, пока *значение1*  равно *значение2*  .
  
    
    
Циклы также должны соответствовать следующим требованиям:
  
    
    

- циклы должны находиться в стадии, стадии не могут входить в цикл;
    
  
- этапы могут входить в цикл;
    
  
- у цикла может быть только одна точка входа и одна точка выхода.
    
  

### <a name="step-shapes"></a>Фигуры этапов

Этапы представляют ряд сгруппированных последовательных действий. Этапы содержаться в стадии. У фигуры стадии также должны быть фигуры входа и выхода, определяющие пути входа и выхода. Обе фигуры добавляются по умолчанию при перетаскивании фигуры на полотно.
  
    
    

## <a name="creating-a-workflow-in-visio-2013"></a>Создание рабочего процесса в Visio 2013
<a name="VSSPD_Creating"> </a>

Все образцы фигур в наборе элементов SharePoint соответствуют действиям, условиям и другим логическим конструкциям в рабочем процессе SharePoint. Для создания рабочего процесса можно перетащить фигуры на полотно так же, как и для любой другой блок-схемы в Visio. После завершения создания рабочего процесса в Visio 2013 сохраните свою работу, чтобы его можно было открыть в SharePoint Designer 2013.
  
    
    
Чтобы открыть шаблон рабочего процесса SharePoint в Visio 2013, выполните следующие действия.
  
    
    

### <a name="to-open-the-sharepoint-workflow-template-in-visio-2013"></a>Открытие шаблона рабочего процесса SharePoint в Visio 2013


1. Откройте Visio 2013.
    
  
2. Нажмите кнопку **Создать**.
    
  
3. В разделе **Категории шаблонов** выберите **Блок-схема**.
    
  
4. В окне **Выберите шаблон** щелкните **Рабочий процесс SharePoint** и выберите **Создать**.
    
    Откроется шаблон, а на полотно будут добавлены фигуры начала и стадии. Фигура стадии содержит фигуры входа и выхода, объединенные одним соединителем.
    
  
Перетащите действия, условия и другие фигуры на полотно открытого шаблона рабочего процесса SharePoint, чтобы создать рабочий процесс. Дополнительные сведения об отдельных фигурах и их значении см. в статье  [Фигуры в шаблоне рабочего процесса SharePoint Server в Visio](shapes-in-the-sharepoint-server-workflow-template-in-visio.md).
  
    
    

> **Совет.** При создании рабочего процесса учитывайте указанные ниже дополнительные факторы.
>  - Чтобы быстро создать рабочий процесс, перетащите фигуры действий и условий на внутренний соединитель, который есть в новых фигурах стадии. Visio 2013 автоматически делит соединитель на дополнительные соединители, сохраняя рабочий процесс соединенным с фигурами входа и выхода.
>  - Не используйте фигуры из наборов элементов, отличных от "Действия рабочего процесса SharePoint", "Условия рабочего процесса SharePoint" и "Фигуры завершения рабочего процесса в SharePoint". Чтобы добавлять соединения между фигурами, используйте только средство создания соединителей, доступное в шаблоне рабочего процесса SharePoint. Все другие фигуры соединителей недопустимы для рабочего процесса SharePoint.
>  - Фигуры действий, циклы и стадии должны всегда входить в фигуру стадии. Некоторые условные фигуры могут находиться вне стадии.
>  - У фигуры стадии должна быть только одна фигура входа и одна фигура выхода. Подпроцесс рабочего процесса, который содержится в стадии, должен начинаться с фигуры входа и заканчиваться фигурой выхода.
>  - Из фигуры условия должны выходить два соединителя. Один из них должен быть помечен как "Да", другой — как "Нет". Щелкните соединитель правой кнопкой, чтобы выбрать **Да** или **Нет**. 
>  - В рабочем процессе должна быть только одна фигура начала, которая располагается вне стадии.
>  - Вы можете добавлять текст к фигурам в рабочем процессе, но он не влияет на рабочий процесс.
  
    
    


  
    
    
Проверка рабочего процесса в Visio 2013 аналогична проверке других соединенных схем: Visio проверяет схему на соответствие набору правил и возвращает список ошибок, найденных в схеме. Сведения об устранении обнаруженных проблем см. в статье  [Диагностика ошибок проверки рабочих процессов SharePoint Server в Visio](troubleshooting-sharepoint-server-workflow-validation-errors-in-visio.md).
  
    
    

### <a name="to-validate-a-sharepoint-workflow-in-visio-2013"></a>Проверка рабочего процесса SharePoint в Visio 2013


1. На вкладке **Процесс** в группе **Проверка схемы** нажмите кнопку **Проверить схему**.
    
  
2. Если в рабочем процессе найдены ошибки, под схемой откроется область **Проблемы**. Выберите каждый элемент в списке, чтобы выделить фигуру на схеме, вызвавшую ошибку.
    
  
3. Устраните все ошибки, указанные в списке **Проблемы**. После этого нажмите кнопку **Проверить схему** еще раз. Дополнительные сведения об устранении проблем при проверке в Visio 2013 см. в статье [Диагностика ошибок проверки рабочих процессов SharePoint Server в Visio](troubleshooting-sharepoint-server-workflow-validation-errors-in-visio.md).
    
  
4. Если ошибки в рабочем процессе не найдены, Visio отображает сообщение об успешном завершении проверки схемы.
    
  
После проверки процесса в Visio 2013 вы можете сохранить файл и импортировать его в SharePoint Designer 2013. В отличие от шаблона рабочего процесса Microsoft SharePoint 2010 можно сохранить копию схемы рабочего процесса SharePoint в формате Visio 2013 по умолчанию (VSDX), а SharePoint Designer 2013 сможет открыть файл. 
  
    
    
Используйте следующую процедуру, чтобы сохранить рабочий процесс SharePoint в Visio 2013 как VSDX-файл Visio 2013, который можно открыть в SharePoint Designer 2013:
  
    
    

### <a name="to-save-a-workflow-in-visio-2013"></a>Сохранение рабочего процесса в Visio 2013


1. В меню **Файл** щелкните **Сохранить как**.
    
  
2. В окне **Сохранить как** нажмите кнопку **Сохранить**, а затем нажмите **Обзор**.
    
  
3. В диалоговом окне **Сохранить как** выберите папку для сохранения файла и введите имя файла ("My SP Workflow").
    
  
4. Нажмите кнопку **Сохранить**.
    
  

## <a name="customizing-and-publishing-a-workflow-in-sharepoint-designer-2013"></a>Настройка и публикация рабочего процесса в SharePoint Designer 2013
<a name="VSSPD_Customizing"> </a>

После создания базовой бизнес-логики для рабочего процесса SharePoint в Visio 2013 и сохранения схем вы можете открыть VSDX-файл Visio в SharePoint Designer 2013 и приступить к настройке рабочего процесса для вашего сайта SharePoint. VSDX-файл содержит XML-документы, которые SharePoint Designer 2013 может преобразовать в рабочие процессы.
  
    
    
Используйте следующую процедуру, чтобы открыть сайт SharePoint в SharePoint Designer 2013:
  
    
    

### <a name="to-open-a-sharepoint-site-in-sharepoint-designer-2013"></a>Открытие сайта SharePoint в SharePoint Designer 2013


1. Откройте SharePoint Designer 2013.
    
  
2. В окне **Открыть сайт SharePoint** нажмите кнопку **Открыть сайт**.
    
  
3. В диалоговом окне **Открытие сайта** выберите сайт, который требуется открыть.
    
  
4. Нажмите кнопку **Открыть**.
    
  
После открытия сайта SharePoint вы можете открыть VSDX-схему Visio 2013 в SharePoint Designer 2013.
  
    
    

### <a name="to-open-a-visio-professional-2013-workflow-in-sharepoint-designer-2013"></a>Открытие рабочего процесса Visio профессиональный 2013 в SharePoint Designer 2013


1. В меню **Файл** щелкните **Добавить элемент**.
    
  
2. Чтобы создать рабочий процесс списка, выполните следующие действия.
    
1. В разделе **Рабочие процессы** выберите **Рабочий процесс списка**.
    
  
2. В области слева в разделе **Рабочий процесс списка** введите имя рабочего процесса (Мой первый рабочий процесс SP2013) и выберите список на сайте, на котором вы хотите опубликовать рабочий процесс.
    
  
3. В списке **Выберите платформу рабочего процесса для нового рабочего процесса** выберите элемент **Рабочий процесс SharePoint**.
    
  
4. Выберите пункт **Создать**.
    
  
3. Чтобы создать рабочий процесс сайта, выполните следующие действия.
    
1. В разделе **Рабочие процессы** выберите **Рабочий процесс сайта**.
    
  
2. В области слева в разделе **Рабочий процесс сайта** введите имя рабочего процесса (Мой первый рабочий процесс SP2013).
    
  
3. В списке **Выберите платформу рабочего процесса для нового рабочего процесса** выберите элемент **Рабочий процесс SharePoint**.
    
  
4. Выберите пункт **Создать**.
    
  
4. На вкладке **Рабочий процесс** в группе **Управление** щелкните **Параметры рабочих процессов**.
    
  
5. На вкладке **Параметры рабочего процесса** в группе **Управление** щелкните **Импортировать из Visio**.
    
  
6. В диалоговом окне **Импорт рабочего процесса из документа Visio** перейдите к папке, где находится VSDX-файл.
    
  
7. Выберите файл, который нужно открыть (My SP Workflow), а затем нажмите кнопку **Открыть**.
    
  
После открытия VSDX-файла в SharePoint Designer 2013 он отображается в визуальном конструкторе, элементе управления ActiveX Visio, который размещен в SharePoint Designer. Схема Visio 2013 сохраняет все фигуры и текст фигур, который был создан в Visio. 
  
    
    

> **Примечание.** Для переключения между визуальным и декларативным конструкторами в SharePoint Designer 2013 в группе **Управление** на вкладке **Рабочий процесс** щелкните **Вид**. Этот процесс может занять несколько секунд, так как SharePoint Designer 2013 проверяет рабочий процесс, а затем преобразовывает его данные из одного формата в другой. Во время этого процесса выполняется другая проверка на уровне фигур. Если будут обнаружены ошибки схемы, они будут отображаться в области ошибок (в нижней части полотна) точно так же, как в Visio. 
  
    
    

Фигуры, которые отображаются в визуальном конструкторе, также имеют теги действий (они отмечены значком параметров рабочего процесса в левом нижнем углу фигуры). При выборе тега действия в раскрывающемся меню отображаются атрибуты для этого действия или условия и свойство **Свойства**. Эти свойства определяют значения параметров для этого действия: из каких списков будут извлечены элементы, какой оператор вычисления будет использоваться или на какой адрес электронной почты будет отправлено сообщение. Если выбрать свойство, которое отображается в списке, появится диалоговое окно в котором можно настроить параметры для этого свойства.
  
    
    
Например, с фигурой **Отправить сообщение электронной почты** связано два свойства: **Создать сообщение электронной почты** и **Свойства**. Если выбрать свойство **Создать сообщение электронной почты**, откроется диалоговое окно **Определение сообщения электронной почты**, в котором можно создать сообщение, отправляемое действием. Если выбрать **Свойство** откроется диалоговое окно **Свойства отправки сообщения электронной почты**, в котором отображаются все параметры действия.
  
    
    

> **Примечание.** Дополнительные сведения об отдельных действиях, фигурах и их свойствах см. в статьях [Фигуры в шаблоне рабочих процессов SharePoint Server в Visio](shapes-in-the-sharepoint-server-workflow-template-in-visio.md) и [Краткий справочник по действиям рабочих процессов (платформа рабочих процессов в SharePoint)](workflow-actions-quick-reference-sharepoint-workflow-platform.md). 
  
    
    

После установки свойств в рабочем процессе и перед публикацией сначала следует проверить рабочий процесс на наличие ошибок в SharePoint Designer 2013. Если выбрать команду **Опубликовать** в **визуальном конструкторе** на ленте, SharePoint Designer 2013 автоматически проверяет рабочий процесс на наличие ошибок. При необходимости проверку можно запустить вручную.
  
    
    
Используйте следующую процедуру, чтобы проверить рабочий процесс SharePoint в SharePoint Designer 2013:
  
    
    

### <a name="to-manually-check-a-workflow-for-errors-in-sharepoint-designer-2013"></a>Проверка рабочего процесса на наличие ошибок вручную SharePoint Designer 2013


1. На вкладке **Визуальный конструктор** в группе **Сохранить** нажмите кнопку **Проверить**.
    
  
2. Если в рабочем процессе найдены ошибки, под визуальным конструктором откроется область **Проблемы**. Выберите каждый элемент в списке, чтобы выделить действие, условие, соединитель, оконечный элемент или контейнер на схеме, вызвавший ошибку.
    
  
3. Устраните все ошибки проверки, указанные в списке **Проблемы**. После этого нажмите кнопку **Проверить** еще раз.
    
  
4. Если ошибки в рабочем процессе не найдены, SharePoint Designer отображает сообщение об успешной проверке.
    
  
Если после проверки рабочего процесса проблемы не обнаружены, вы можете опубликовать рабочий процесс в списке SharePoint. Чтобы опубликовать рабочий процесс из SharePoint Designer 2013, на вкладке **Визуальный конструктор** в группе **Сохранить** нажмите кнопку **Опубликовать**. При возникновении ошибки во время публикации SharePoint Designer 2013 возвращается в визуальный конструктор и отображает ошибки в области **Проблемы**.
  
    
    

## <a name="additional-resources"></a>Дополнительные ресурсы
<a name="VSSPD_Additional"> </a>

Дополнительные сведения см. в следующих источниках:
  
    
    

-  [Краткий справочник по действиям рабочего процесса (платформа рабочих процессов в SharePoint)](workflow-actions-quick-reference-sharepoint-workflow-platform.md)
    
  
-  [Фигуры в шаблоне рабочего процесса SharePoint Server в Visio](shapes-in-the-sharepoint-server-workflow-template-in-visio.md)
    
  
-  [Диагностика ошибок проверки рабочих процессов SharePoint Server в Visio](troubleshooting-sharepoint-server-workflow-validation-errors-in-visio.md)
    
  
-  [Создание, импорт и экспорт рабочих процессов SharePoint в Visio 2010](http://office.microsoft.com/ru-RU/visio-help/create-import-and-export-sharepoint-workflows-in-visio-HA101888007.aspx)
    
  
-  [Центр по разработке для SharePoint](http://msdn.microsoft.com/ru-RU/sharepoint/default.aspx)
    
  
-  [Центр по разработке для Visio](http://msdn.microsoft.com/ru-RU/office/aa905478)
    
  


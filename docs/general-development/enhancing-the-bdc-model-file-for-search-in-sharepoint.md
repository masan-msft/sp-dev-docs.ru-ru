---
title: "Улучшение файла модели BDC для поиска в SharePoint"
ms.date: 09/25/2017
ms.prod: sharepoint
ms.assetid: 3c67b1cf-5fca-4805-a1b5-c9ac1ff8aede
ms.openlocfilehash: 26b06db6e478c15d47257b8a88de30da1f0bb0c1
ms.sourcegitcommit: 0a94e0c600db24a1b5bf5895e6d3d9681bf7c810
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/07/2017
---
# <a name="enhancing-the-bdc-model-file-for-search-in-sharepoint"></a>Улучшение файла модели BDC для поиска в SharePoint
Сведения о свойствах в модели метаданных BDC, которые могут быть применены соединители индексации BCS, позволяющие поиска в SharePoint для обхода внешних данных.
## <a name="search-properties-for-bdc-model-files"></a>Свойства поиска для файлов модели BDC
<a name="SearchBDCModelProperties_SearchProperties"> </a>

Платформа соединителей в Поиск позволяет обхода внешних данных, делая ее доступной в результатах поиска через соединители индексации BCS. Соединитель индексации BCS используется программой-обходчиком для взаимодействия с внешнего источника данных. Во время обхода контента программа-обходчик вызывает соединителя индексации BCS для извлечения данных из внешней системы и передать его программы-обходчика. 
  
    
    
Соединители индексации BCS состоят из следующих:
  
    
    


  
    
    
> **Файл модели BDC** Файл, который предоставляет данные для подключения к внешней системе и структуру данных.
    
  

  
    
    
> **Соединитель** Компонент, содержащий код, который подключается к внешней системе и анализ доступа идентификаторы URL-адреса и BCS.
    
  
Модель метаданных BDC включает несколько свойств, которые могут быть применены к Поиск, многие из которых требуются для поддержки соединителя индексации BCS обхода контента. 
  
    
    
В следующей таблице описываются свойства модели BDC, которые могут быть применены к Поиск.
  
    
    

**Таблица 1. Свойства поиска для файлов модели BDC**


|**Имя**|**Объект метаданных**|**Описание**|
|:-----|:-----|:-----|
|ShowInSearchUI  <br/> |Model  <br/> |Указывает, что элемент **LobSystemInstance** в файле модели должен отображаться в пользовательском интерфейсе поиска. Это значение для настраиваемых соединителей не учитывается.<br/> |
|InputUriProcessor  <br/> |Бизнес-системы  <br/> |Задает имя класса, который обрабатывает ввода URL-адреса перед передачей их в соединитель. Применяется к .NET и настраиваемые соединители индексации BCS. Для получения дополнительных сведений см  [Создание настраиваемого соединителя индексации](http://msdn.microsoft.com/library/ec2df34d-178c-4ae1-a2b0-a6af04ee57bd%28Office.15%29.aspx).<br/> |
|OutputUriProcessor  <br/> |Бизнес-системы  <br/> |Задает имя класса, который обрабатывает URL-адрес выходных данных перед передачей их в поисковой системе из соединитель. Применяется к .NET и настраиваемые соединители индексации BCS. Для получения дополнительных сведений см  [Создание настраиваемого соединителя индексации](http://msdn.microsoft.com/library/ec2df34d-178c-4ae1-a2b0-a6af04ee57bd%28Office.15%29.aspx).<br/> |
|SystemUtilityTypeName  <br/> |Бизнес-системы  <br/> |Указывает имя класса, реализующего класс **StructuredRepositorySystemUtility**. Применяется к настраиваемые соединители индексации BCS. Для получения дополнительных сведений см [Создание настраиваемого соединителя индексации](http://msdn.microsoft.com/library/ec2df34d-178c-4ae1-a2b0-a6af04ee57bd%28Office.15%29.aspx). <br/> |
|Название  <br/> |Entity  <br/> |Указывает заголовок внешнего типа контента, отображаемый в результатах поиска.  <br/> |
|DefaultLocale  <br/> |Entity  <br/> |Указывает строку языковых стандартов. Это значение можно переопределить с помощью свойства **LCIDField** или **CultureField**. <br/> |
|RootFinder  <br/> |Метод  <br/> |Указывает метод **Finder**, используемый для перечисления документов, предназначенных для обхода. Например, при подключении к базе данных это может быть инструкция **SELECT** или список таблиц для обхода. <br/> |
|DirectoryLink  <br/> |Метод  <br/> |Указывает, что BCS должен перейти связей. Требуется для иерархической обхода контента.  <br/> |
|DeletedCountField  <br/> |Метод  <br/> |Указывает количество удаленных элементов. Это свойство не учитывается, если его значение меньше или равно нулю.  <br/> |
|WindowsSecurityDescriptorField  <br/> |Метод  <br/> |Указывает для элемента дескриптор безопасности Windows. Если дескриптор не указан, вызывается метод **GetSecurityDescriptor**. Если метод **GetSecurityDescriptor** не определен, всем внешним элементам назначается список управления доступом (ACL) "Все". <br/> |
|AuthorField  <br/> |Метод  <br/> |Указывает имя автора, отображаемое в результатах поиска.  <br/> |
|DisplayUriField  <br/> |Метод  <br/> |Задает URL-адрес для отображения в результатах поиска. Если указан, то это свойство переопределяет предоставлено BCS URL-адрес страницы профиля. Если не указан, отображаются в результатах поиска URL-адрес начинается с **bdc3: / /** и не понятен обозревателя.<br/> |
|LastModifiedTimeStampField  <br/> |Метод  <br/> |Указывает отметку времени внешнего элемента, отображаемую в результатах поиска. Это значение также используется для добавочного обхода.  <br/> |
|DescriptionField  <br/> |Метод  <br/> |Указывает описание, отображаемое в результатах поиска.  <br/> |
|LCIDField  <br/> |Метод  <br/> |Указывает код языка (LCID) для **DescriptionField**. Если это значение не указано, используется средство разбиения текста на слова по умолчанию.<br/> |
|CultureField  <br/> |Метод  <br/> |Указывает культуру для **DescriptionField**.  <br/> |
|Расширение  <br/> |Метод  <br/> |Указывает расширение файла для потока, предназначенного для обхода. Если оно не указано, по умолчанию используется расширение **TXT**.<br/> |
|MimeType  <br/> |Метод  <br/> |Указывает тип MIME для потока, предназначенного для обхода. Если тип не указан, по умолчанию используется расширение **TXT**. Если задано и поле **Extension**, и поле **MimeType**, используется значение, указанное в поле **MimeType**. <br/> |
|UseClientCachingForSearch  <br/> |Метод  <br/> |Указывает, будет ли программа-обходчик кэширует контента во время перечисления. Если кэширования содержимого программа-обходчик не выполняет другой приема-передачи источник содержимого, обход отдельных элементов.  <br/> |
|EnumerateIdsOnly  <br/> |Дескриптор фильтра  <br/> |Указывает, следует ли возвращать идентификаторы только в объекте **IDEnumerator**.  <br/> |
|CrawlStartTime  <br/> |Дескриптор фильтра  <br/> |Содержит время начала последнего обхода.  <br/> |
|SynchronizationCookie  <br/> |Дескриптор фильтра  <br/> |Указывает, что внешний источник контента возвращает после обхода контента куки-файл, который повторно отправляется соединителем индексации во время следующего вызова перечисления. Внешний источник контента использует куки-файл для определения изменений, произошедших с момента последнего обхода контента. Это свойство используется с экземплярами методов **ChangedIDEnumerator** и **DeletedIDEnumerator**. <br/> |
|Свойство  <br/> |Дескриптор типа  <br/> | Указывает массив **struct**, используемый при поиске свойств. Этот массив состоит из следующих элементов:<br/> <ul><li>**PropertyName**</li><li>**PropertyValue**</li><li>**PropertyCulture**</li></ul> |
|Text  <br/> |Дескриптор типа  <br/> | Указывает массив **struct**, используемый при поиске вложений. Этот массив состоит из следующих элементов:<br/> <ul><li>**TextExtension**</li><li>**TextContentType**</li><li>**Текст**</li></ul> <br/> |
   

## <a name="bdc-model-file-changes-to-improve-performance-when-crawling-external-data"></a>Изменения файла модели BDC для повышения производительности при обходе контента внешних данных
<a name="SearchBDCModelProperties_Performance"> </a>

Если необходимо использовать для создания файла модели BDC для внешней системы, необходимо включить для поиска, можно улучшить файл модели для оптимизации производительности при обходе контента внешних систем. В этом разделе описываются способы изменения файла модели BDC и повышения производительности.
  
    
    

### <a name="use-inline-property-io-when-retrieving-large-scale-data"></a>Использование ввода-вывода встроенного свойства при извлечении больших объемов данных

В общем случае, если элемент возвращает большой объем данных, вместо метода **SpecificFinder** для извлечения данных следует использовать один из следующих специализированных методов:
  
    
    

- Метод **BinarySecurityDescriptorAccessor** используется при передаче списка управления доступом (ACL) вместо свойства **WindowsSecurityDescriptor**.
    
  
- Метод **StreamAccessor** используется при передаче потоков.
    
  
В условиях отсутствия высоких задержек в сети улучшенная производительность как правило важнее, чем затраты на дополнительное обращение к внешней системе.
  
    
    

### <a name="enumeration-optimization-when-crawling-external-systems"></a>Оптимизация перечисления при обходе контента внешних систем

Не выполняйте перечисление более 100000 элементов за одно обращение к внешней системе. При продолжительных перечислениях могут возникать периодические прерывания связи, препятствующие завершению обхода контента. Рекомендуется, чтобы модель BDC структурировала данные в логические папки, для которых можно выполнить перечисление по отдельности, как показано в следующем примере. 
  
    
    
В этом примере показано перечисление для таблицы базы данных с миллионом строк, но с фиксированным набором значений в столбце ColumnA. В таком сценарии можно считать столбец ColumnA внешним типом контента и написать перечислитель для этого набора значений, используя следующую инструкцию SQL. 
  
    
    



```sql

SELECT DISTINCT( ISNULL(ColumnA,'unknown')) as ColumnA  FROM table
```

Затем с помощью следующей инструкции SQL определяется специальный метод поиска. 
  
    
    



```sql
SELECT DISTINCT( ISNULL(ColumnA,'unknown')) as ColumnA  FROM table where ColumnA = @Value
```

Наконец, необходимо определить операцию перехода по связям, как показано ниже. 
  
    
    



```sql
Select * from table where ColumnA=@value
```

Любой метод должен начинать возврат результатов в течение двух минут, иначе программа-обходчик отменит вызов. Например, сложная инструкция SQL, использующая предложение **LIKE**, может выполняться более двух минут и, таким образом, привести к отмене вызова обходчиком.
  
    
    

### <a name="improving-crawl-speed-with-the-useclientcachingforsearch-property"></a>Увеличение скорости обхода контента с помощью свойства UseClientCachingForSearch

Свойство **UseClientCachingForSearch** увеличивает скорость полного обхода контента, кэшируя элементы во время перечисления. Использование этого свойства также рекомендуется при реализации добавочного обхода контента, основанного на журналах изменений, так как это увеличит скорость добавочного обхода контента.
  
    
    

> **Важные:** Если средний размер элементов превышает 30 килобайт в среднем, это свойство не задано, как его можно было привести к значительному количеству промахов кэша и сведет выигрыш в производительности. 
  
    
    


## <a name="security-in-bdc-model-files"></a>Безопасность в файлах модели BDC
<a name="SearchBDCModelProperties_Security"> </a>

Если репозиторий использует проверку подлинности NTLM, рекомендуется задать для обхода контента сквозную проверку подлинности.
  
    
    
Страницы профиля могут требовать использования Служба Secure Store из-за проблемы многозвенного делегирования от интерфейсного веб-сервера. При возникновении этой проблемы можно оптимизировать обход и контента в то же время сохранить использование страниц профиля, создав два похожих экземпляра **LobSystemInstance**. Первый экземпляр должен использовать учетные данные из проверки подлинности Служба Secure Store. Этот экземпляр не должен содержать свойство **ShowInSearchUI**. Второй экземпляр должен использовать сквозную проверку подлинности и должен содержать свойство **ShowInSearchUI**. Страницы профиля используют первый экземпляр **LobSystemInstance**, а программа-обходчик  второй.
  
> [!NOTE]
> [!Примечание] Для этого необходимо задать свойство **ShowInSearchUI** на уровне **LobSystemInstance**, а не на уровне **LobSystem**.


## <a name="see-also"></a>См. также
<a name="SP15enhanceBDC_addlresources"> </a>


-  [Инфраструктура соединителей поиска в SharePoint](search-connector-framework-in-sharepoint.md)
    
  
-  [Инфраструктура модели подключения к бизнес-данным](http://msdn.microsoft.com/library/2818ebdd-6cda-4d8f-82b2-7fde9fbf2633%28Office.15%29.aspx)
    
  
-  [Создание моделей подключения к бизнес-данным](http://msdn.microsoft.com/library/170d1cfd-cf19-4162-b79f-ba6d3b4ad23b%28Office.15%29.aspx)
    
  
-  [Настройка среды разработки для BCS в SharePoint](setting-up-a-development-environment-for-bcs-in-sharepoint.md)
    
  
-  [Практическое руководство. Использование SharePoint Designer для создания файла модели подключения к бизнес-данным для настраиваемого соединителя](http://msdn.microsoft.com/library/8f239482-0c82-4b60-817d-b0c4392e7e2e%28Office.15%29.aspx)
    
  


---
title: "Оптимизация производительности страниц в SharePoint"
ms.date: 11/01/2017
ms.prod: sharepoint
ms.assetid: 262caeef-64fd-4e02-b947-d772faf01159
ms.openlocfilehash: 02b95e8c2b30c5236af293cde9c5b213f24c0d5e
ms.sourcegitcommit: 0a94e0c600db24a1b5bf5895e6d3d9681bf7c810
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/07/2017
---
# <a name="optimize-page-performance-in-sharepoint"></a>Оптимизация производительности страниц в SharePoint

Узнайте о возможностях для повышения производительности в страниц в SharePoint. Эти компоненты можно использовать для улучшения в географически распределенные реализации.

**Автор:** Дэвид Кроуфорд, корпорация Майкрософт

В этой статье приведены инструкции по оптимизации производительности в SharePoint. SharePoint включает в себя функции, которые помогут оптимизировать загрузку страниц на региональной сети (сети). Разработка страниц в них небольшой и быстро как возможные дополняет эти улучшения производительности.

## <a name="minimal-download-strategy-mds"></a>Стратегия минимальной загрузки (MDS)
<a name="MDS"> </a>

Стратегия минимальной загрузки (MDS) полагается на возможность загружать только определенные части страницы, отображаемой полностью на сервере. Загрузка только определенных частей предоставляет модель очень эффективным загрузки. Полностью отображаемой страницы не возвращением клиенту. Сервер должен иметь возможность точно определить компоненты, которые должны быть частью ответа и те, которые не нужны. Компоненты, которые могут быть или не быть части ответа включают скрипты, стили и разметки.

В следующей таблице перечислены некоторые преимущества использования MDS.

<br/>

**В таблице 1. Преимущества использования MDS**

|**Производительность**|**Визуальные элементы**|
|:-----|:-----|
|Не более чем объемов данных загружены за один запрос страницы.|Браузер не обновления по перезагрузки страницы.|
|Браузер должен обновить только области страницы, изменены с момента последнего запроса.|Легко определить анимации.|
|Небольшой объем обработки на стороне клиента.<br/><br/>**Примечание:** Вдвое клиента 1 время загрузки страницы (PLT1) — из-за chrome каскадных таблиц стилей стилей (CSS) визуализации и JavaScript синтаксического анализа и выполнения. |Изменения на странице привлечения внимания пользователя. |

<br/>

AJAX и MDS, технологий, запрашивающих только разделы страницы для сведения к минимуму данных Загрузка и повысить скорость отклика страницы. На следующем рисунке показана архитектура MDS.

<br/>

*На рисунке 1. Архитектура MDS*   
    
![Архитектура MDS](../images/OptimizePage_Fig01_MDSArchitecture.png)

Платформа MDS предполагается, что главная страница определяет хром и области содержимого. В MDS, SharePoint переход на страницу означает, что разрешения на запрос только содержимое для этих областей и ресурсы, от которых зависит страницы. Как только файлы для загрузки, что содержимое в браузере, код сценария применяет разметки или ресурсы на страницу соответствующим образом. Браузер работает так, как если бы запрошенную страницу загружен полностью с сервера.

<br/>

*На рисунке 2. Хром и регионы на странице SharePoint*

![Хром и регионы на странице SharePoint](../images/OptimizePage_Fig02_PageStructure.png)
 
Когда пользователи просмотра веб-сайта SharePoint в режиме MDS, они не приведет к страницам обратных передач и перезагружает целую страницу. Вместо этого URL-адрес страницы, просматриваемой не изменится и идентификатор фрагмента (знак «#») изменится на содержат страницы, просматриваемой. Имеет формат URL-адрес: `[Path to site (spweb)] + /_layouts/15/start.aspx# + [path to page] + [query string]`.
  
Ниже приведены некоторые примеры URL-адресов в режиме MDS формате.

<br/>

**В таблице 2. URL-адреса, отформатированные в режиме MDS**

|**URL-адрес не MDS**|**URL-АДРЕС MDS**|
|:-----|:-----|
|`http://server/SitePages/`  <br/> |`http://server/_layouts/15/start.aspx#/SitePages/`  <br/> |
|`http://server/subsite/SitePages/home.aspx`  <br/> |`http://server/subsite/_layouts/15/start.aspx#/SitePages/home.aspx`  <br/> |
|`http://server/_layouts/15/viewlsts.aspx?BaseType=0`  <br/> |`http://server/_layouts/15/start.aspx#/_layouts/viewlsts.aspx?BaseType=0` <br/> |

<br/>

Объект, используемый для навигации AJAX  **AjaxNavigate**. По умолчанию остается экземпляр **AjaxNavigate** необходимо использовать именованные **ajaxNavigate**. Чтобы использовать экземпляр **ajaxNavigate**:

```cs

ajaxNavigate.update(serverRelativeURL, null);
```

Если необходимо, элемент управления или веб-части на прослушивание события переходов, можно использовать **Добавьте\_перейдите** обработчика. При вызове обработчика функции обратного вызова получает ссылку на объект навигации и проанализированного хэш-значения в словаре. Элемент управления или веб-части можно получить значение параметра интересов из словаря, сравнивать с текущим значением и решить, какое действие необходимо выполнить. Общие действия — Отправить запрос AJAX к серверу для получения данных или изменение порядка элементов в представлении. По завершении элемент управления прослушивание события переходов, можно использовать **Удаление\_перейдите** обработчика.

MDS также поддерживает несколько хэш-символы в пары "ключ значение". MDS добавляет знак решетки после URL-адрес. Имеет формат метки хэш-функции в URL-адрес: `http://server/_layouts/15/start.aspx#/SitePages/page.aspx#key1=value1#key2=value2`. В следующем примере кода показано, как обновить метки хэш-функции.

```
var updateParts;
updateParts = {key1: "value1", key2: "value2", keyn: "valuen"}
ajaxNavigate.update(null, updateParts);

```

Если в том, что страницы в веб-сайте постоянно не используют для загрузки полной страницы, можно отключить функцию MDS. Можно также отключить функцию MDS, если необходимо использовать другой метод для повышения производительности.

Конкретного элемента на странице убедитесь, что критические ресурсы, необходимые для работы известно, что инфраструктура MDS во время отрисовки сервера. Чтобы преобразовать существующий проект для использования MDS, вам потребуется обновить следующие файлы и компоненты:

- Эталонные страницы.
- ASP.NET страниц
- Настраиваемые главные страницы для ошибки
- файлы JavaScript;
- Элементы управления и веб-частей

### <a name="master-pages"></a>Эталонные страницы.

Основные изменения на главной странице является заключите областей разметки HTML, который будут отправляться клиенту с специальный элемент управления с именем **SharePoint:AjaxDelta**. Наиболее распространенные компоненты, которые должны быть заключены в элемент управления **SharePoint:AjaxDelta** являются элементы управления, встроенные в chrome главной страницы и владельцев контента месте. Если элемент управления не то же самое, на всех страницах веб-узла, его следует оболочку не **SharePoint:AjaxDelta** управления. В следующей разметке показана видимым заполнитель контента, заключенной в элемент управления **SharePoint:AjaxDelta**.


```HTML

<SharePoint:AjaxDelta id="DeltaPlaceHolderMain" IsMainContent="true" runat="server">
    <asp:ContentPlaceHolder id="PlaceHolderMain" runat="server" />
</SharePoint:AjaxDelta>
```

Элементы управления с содержимым, зависящие от текущего URL-адреса должны быть заключены в элемент управления **SharePoint:AjaxDelta**. В следующей разметке показана меню, заключенной в элемент управления **SharePoint:AjaxDelta**.

```HTML

<SharePoint:AjaxDelta id="DeltaBreadcrumbDropdown" runat="server">
    <SharePoint:PopoutMenu
        runat="server"
        ID="GlobalBreadCrumbNavPopout"
        IconUrl=IMGCLUSTER_FG_IMG
        IconAlt=LOC_ATTR_WSS(master_breadcrumbIconAlt)
        IconOffsetX=IMGCLUSTER_FG_LEFT(BREADCRUMBBUTTON)
        IconOffsetY=IMGCLUSTER_FG_TOP(BREADCRUMBBUTTON)
        IconWidth=IMGCLUSTER_FG_WIDTH(BREADCRUMBBUTTON)
        IconHeight=IMGCLUSTER_FG_HEIGHT(BREADCRUMBBUTTON)
        AnchorCss="s4-breadcrumb-anchor"
        AnchorOpenCss="s4-breadcrumb-anchor-open"
        MenuCss="s4-breadcrumb-menu">
    </SharePoint:PopoutMenu>
</SharePoint:AjaxDelta>

```

> [!NOTE]
> [!Примечание] Элемент управления **SharePoint:AjaxDelta** не должен быть вложенным сам в себя. Укажите этот элемент управления на верхнем уровне обязательным.

Если необходимо включить файла каскадных таблиц стилей (CSS), необходимо использовать элементы управления **SharePoint:CssLink** и **SharePoint:CssRegistration**. Для работы в режиме MDS и не являющиеся MDS были обновлены следующие элементы управления. Следующая разметка демонстрируется использование элементов управления **SharePoint:CssLink** и **SharePoint:CssRegistration**.

```HTML

<SharePoint:CssLink runat="server" Version="15"/>
<SharePoint:CssRegistration Name="my_stylesheet.css" runat="server" />
```


> [!CAUTION]
> [!Внимание!] Может иметь только один элемент управления **SharePoint:CssLink** на каждой странице. В режиме MDS сообщение об ошибке при наличии более одного элемента управления **SharePoint:CssLink** на странице. Включая CSS-файла с помощью стиля HTML-элемент не поддерживается в режиме MDS, так как логика сервер не может определить файл как обязательный ресурс при отображении ответа.

Чтобы включить файл JavaScript, используйте элемент управления **SharePoint:ScriptLink**. Следующая разметка показано, как использовать элемент управления **SharePoint:ScriptLink**.

```HTML

<SharePoint:ScriptLink language="javascript" name="my_javascriptfile.js" runat="server" />
```

> [!CAUTION]
> [!Внимание!] Включая файл JavaScript, с помощью скрипта HTML-тег не поддерживается в режиме MDS, так как логика сервер не может определить файл как обязательный ресурс при отображении ответа. 

Чтобы отобразить элемент заголовка в элемент head на странице, мы используем специальные шаблон с помощью элемента управления **SharePoint:PageTitle**. Следующая разметка показано, как использовать элемент управления **SharePoint:PageTitle**.
  

```HTML
<SharePoint:PageTitle runat="server">
    <asp:ContentPlaceHolder id="PlaceHolderPageTitle" runat="server" />
</SharePoint:PageTitle>

```

> [!NOTE]
> [!Примечание] Каждую отдельную страницу необходимо переопределить заголовок с указанием замены для управления **asp: ContentPlaceHolder** внутри элемента управления **SharePoint:PageTitle**.
  

### <a name="aspnet-pages"></a>ASP.NET страниц

Чтобы включить JavaScript или CSS-файла, используйте же **SharePoint:ScriptLink** и **SharePoint:CssLink** элементы управления описано в предыдущем разделе.

В предыдущих версиях SharePoint некоторые страницы запись контента с помощью свойства **Response.Output**. При использовании MDS это больше не допускается. Вам необходимо изменить вызовы **Response.Output** новый интерфейс API. В следующей таблице показаны интерфейсы API, которые часто используются в страницах SharePoint и новые API MDS жалоб.

<br/>

**В таблице 3. Часто используемые интерфейсы API и спецификации MDS списков**

|**Часто используемые API**|**Альтернатива, совместимая с MDS**|
|:-----|:-----|
| [NoEncode()](https://msdn.microsoft.com/library/Microsoft.SharePoint.Utilities.SPHttpUtility.NoEncode.aspx) <br/> | [WriteNoEncode()](https://msdn.microsoft.com/library/Microsoft.SharePoint.Utilities.SPHttpUtility.WriteNoEncode.aspx) <br/> |
| [HtmlEncode()](https://msdn.microsoft.com/library/Microsoft.SharePoint.Utilities.SPHttpUtility.HtmlEncode.aspx) <br/> | [WriteHtmlEncode()](https://msdn.microsoft.com/library/Microsoft.SharePoint.Utilities.SPHttpUtility.WriteHtmlEncode.aspx) <br/> |
| [EcmaScriptStringLiteralEncode()](https://msdn.microsoft.com/library/Microsoft.SharePoint.Utilities.SPHttpUtility.EcmaScriptStringLiteralEncode.aspx) <br/> | [WriteEcmaScriptStringLiteralEncode()](https://msdn.microsoft.com/library/Microsoft.SharePoint.Utilities.SPHttpUtility.WriteEcmaScriptStringLiteralEncode.aspx) <br/> |
| [HtmlEncodeAllowSimpleTextFormatting()](https://msdn.microsoft.com/library/Microsoft.SharePoint.Utilities.SPHttpUtility.HtmlEncodeAllowSimpleTextFormatting.aspx) <br/> | [WriteHtmlEncodeAllowSimpleTextFormatting()](https://msdn.microsoft.com/library/Microsoft.SharePoint.Utilities.SPHttpUtility.WriteHtmlEncodeAllowSimpleTextFormatting.aspx) <br/> |
| [HtmlUrlAttributeEncode()](https://msdn.microsoft.com/library/Microsoft.SharePoint.Utilities.SPHttpUtility.HtmlUrlAttributeEncode.aspx) <br/> | [WriteHtmlUrlAttributeEncode()](https://msdn.microsoft.com/library/Microsoft.SharePoint.Utilities.SPHttpUtility.WriteHtmlUrlAttributeEncode.aspx) <br/> |
| [UrlKeyValueEncode()](https://msdn.microsoft.com/library/Microsoft.SharePoint.Utilities.SPHttpUtility.UrlKeyValueEncode.aspx) <br/> | [WriteUrlKeyValueEncode()](https://msdn.microsoft.com/library/Microsoft.SharePoint.Utilities.SPHttpUtility.WriteUrlKeyValueEncode.aspx) <br/> |
| [UrlPathEncode()](https://msdn.microsoft.com/library/Microsoft.SharePoint.Utilities.SPHttpUtility.UrlPathEncode.aspx) <br/> | [WriteUrlPathEncode()](https://msdn.microsoft.com/library/Microsoft.SharePoint.Utilities.SPHttpUtility.WriteUrlPathEncode.aspx) <br/> |

<br/>

Если страница, элемент управления или веб-части направляет его выходные данные в свойстве **Response.Output** , то MDS восстановление после сбоя. При сбое обратно MDS, оно выполняет полного перехода на запрошенную страницу. Можно найти оскорбительного элемента управления с помощью **DeltaPage.\_ shipRender** свойство при отладке серверного компонента.

Необходимо заменить элементы сценария встроенного HTML с элементами управления **SharePoint:ScriptBlock** . Ниже приведен встроенный сценарий элемент HTML и его альтернатива, совместимая с MDS **SharePoint:ScriptBlock** элемента управления.

- **Элемент script встроенного HTML** 
    
    `<script type="text/javascript">`<br/>&nbsp;&nbsp;&nbsp;`// Your JavaScript code goes here.`<br/>`</script>`

- **Альтернатива, совместимая с MDS** 
    
    `<SharePoint:ScriptBlock runat="server">`<br/>&nbsp;&nbsp;&nbsp;`// Your JavaScript code goes here.`<br/>`</SharePoint:ScriptBlock>`

Введение в **SharePoint:ScriptBlock** на странице можно изменить область переменных на странице. В некоторых случаях требуется переместить объявления переменных из `<% %>` `<script runat="server"> <script>`. Чтобы проверить это, загрузите страницу в браузере после выполнения обновления.
  
> [!NOTE]
> [!Примечание] Инфраструктура MDS не поддерживает VBScript, так как он не может быть зарегистрирована как сценарий в ASP.NET. Сценарии должны быть преобразованы в JavaScript. 

Гиперссылки на страницах ASP.NET необходимо обновить для использования **SPUpdatePage** типа. Ниже показана гиперссылки на страницах ASP.NET и те же ссылки, обновлены с использованием типа **SPUpdatePage** .  

- **Гиперссылки в ASP.NET** 
    
    `<a`<br/>&nbsp;&nbsp;&nbsp;`id=<%_STSWriteHTML("viewlist" + spList.BaseTemplate.ToString());%>`<br/>&nbsp;&nbsp;&nbsp;`href=<%_STSWriteURL(listViewUrl);%>`<br/>`>`

- **Альтернатива, совместимая с MDS** 
    
    `<a`<br/>&nbsp;&nbsp;&nbsp;`id=<%_STSWriteHTML("viewlist" + spList.BaseTemplate.ToString());%>`<br/>&nbsp;&nbsp;&nbsp;`href=<%_STSWriteURL(listViewUrl);%>`<br/>&nbsp;&nbsp;&nbsp;`onclick="if (typeof(SPUpdatePage) !== 'undefined') return SPUpdatePage(this.href);"`<br/>`>`

### <a name="custom-master-pages-for-errors"></a>Настраиваемые главные страницы для ошибки

Вы можете отобразить сообщения об ошибках в режиме MDS даже в том случае, если вы используете настраиваемой главной страницы ошибок. Чтобы использовать настраиваемую главную страницу ошибок в режиме MDS, необходимо определить **AjaxDelta** на главной странице ошибка, которая имеет свойство **id**, строка **"DeltaPlaceHolderMain"**. Содержимое сообщения об ошибке должно отображаться в **AjaxDelta**. При возвращении на страницу ошибки в браузере с сервера, обозреватель указывает, что основное содержимое для отображения данный и отображает для пользователя.

Несмотря на то, что главная страница для страницы ошибок и Главная страница для **start.aspx** не явные совпадение, браузер можно обнаружить, что произошла ошибка. Браузер позволяет MDS для использования содержимого сообщения ошибки в рамках существующей главной страницы для сохранения согласованную и легко пользовательского интерфейса.

### <a name="javascript-files"></a>файлы JavaScript;

файлы JavaScript должна включать только объявления функций. Тем не менее существует множество сценарии прежних версий, которые содержат инициализации глобальных переменных. Для повторной инициализации при отображении новой страницы в режиме MDS необходимости глобальных переменных. **ExecuteAndRegisterBeginEndFunctions** можно использовать для инициализации глобальных переменных. В следующем примере кода показано, как использовать **ExecuteAndRegisterBeginEndFunctions**.

```
function ExecuteAndRegisterBeginEndFunctions(tag, beginFunc, endFunc, loadFunc)
```

**ExecuteAndRegisterBeginEndFunctions** имеет следующие параметры:

-  _tag_: имя файла, которая регистрирует обратных вызовов; она используется только для целей отладки.     
-  _beginFunc_: функция, которая вызывается перед запросить дельты страницы.    
-  _endFunc_: функции, который вызывается после получения дельты, но до применения HTML и JavaScript новой страницы.
-  _loadFunc_: функции, который вызывается после HTML и JavaScript для применения новой страницы.

### <a name="controls-and-web-parts"></a>Элементы управления и веб-частей

Чтобы использовать MDS, элементы управления веб-частей и наличие для регистрации ресурсы страниц с помощью объекта **SPPageContentManager**. Наиболее часто зарегистрированных ресурсы, с помощью **SPPageContentManager**, JavaScript фрагменты (функций и переменных JSON) и скрытых полей. В следующей таблице показаны общие шаблоны для вставки скрытых полей и JavaScript фрагменты кода и сделать это с помощью объекта **SPPageContentManager**. 
    
<br/>    

**В таблице 4. Общие рекомендации для отображения содержимого и их MDS-совместимые альтернативы**

|**Принято для отображения содержимого**|**Альтернатива, совместимая с MDS**|
|:-----|:-----|
|`output.Write("<input type=\\"hidden\\" name=\\"");`<br/>`output.Write(SPHttpUtility.NoEncode("HiddenField));`<br/>`output.Write("\\" value=\\"");`<br/>`output.Write(DigestValue);`<br/>`output.Write("\\" />");`|`SPPageContentManager.RegisterHiddenField(this, "HiddenField", DigestValue);`|
|`Page.ClientScript.RegisterClientScriptBlock(typeof(MyType), "MyKey", "var myvar=1", true);`|`SPPageContentManager.RegisterClientScriptBlock(this, typeof(MyType), "MyKey", "var myvar=1");`|

<br/>

> [!NOTE]
> [!Примечание] Функции **RegisterHiddenField** и **RegisterClientScriptBlock** в объекте **SPPageContentManager** привести объект типа **элемента управления** или **страницы** в качестве первого параметра.

Модуль MDS использует первого параметра для фильтрации сценарии. Ниже приведены правила для фильтрации при отображении в режиме дельты MDS:

- Если первый аргумент имеет тип **страницы**, сценарии будет выполняться в браузере.

- Если первый аргумент не типа **страницы** и элемента управления попадает в разделе **SharePoint:AsyncDelta**, сценарии будет выполняться в браузере.

- Если первый аргумент веб-части, сценарии будет выполняться в браузере.

Многие интерфейсы API в предыдущих версиях SharePoint не предоставил текущего элемента управления в качестве аргумента. Открытую объектную модель в SharePoint был разработан для предоставления в качестве альтернативного метода для регистрации в ресурсах. Методы, которые не предоставляют текущего элемента управления в качестве аргумента, по-прежнему в интерфейсе API для обеспечения обратной совместимости.

Могут переходить между двумя страницами с помощью новой функции с именем **SPUpdatePage**. При отображении элемента управления или веб-части в режиме дельты MDS элементы управления **HyperLink** необходимо добавить обработчик **onclick** и вызова **SPUpdatePage**.
 
Необходимо обновить XSLT, используемых веб-частей, так как все ресурсы, добавляемых с помощью объекта **SPPageContentManager** чтобы сделать их MDS спецификации. Можно добавить JavaScript фрагменты кода для преобразования XSLT с помощью методов **RegisterScriptLink** и **RegisterScriptBlock** объекта **SPPageContentManager**.

## <a name="optimize-page-downloads"></a>Оптимизация загрузки страницы
<a name="MDS"> </a>

После формирования страницы понять, можно использовать различные методы для Оптимизация работы файл для загрузки для этой страницы. В общем случае цель — для сведения к минимуму число полных обходов между клиентских и серверных компьютеров и для сокращения объема данных, который переходит по сети. В этой статье руководствоваться рекомендации, которые будут применяться в широком на множество различных реализаций SharePoint.

В таблице 5 приведен пример загрузки времени, которые иллюстрируют различие между первого, во-вторых, и загружает последующие страницы.   

**В таблице 5. Время загрузки страницы**

|||
|:-----|:-----|
|Загрузки первой страницы  <br/> |3-4 секунд  <br/> |
|Второй загрузки страницы  <br/> |15 сек  <br/> |
|Загружает последующие страницы  <br/> |1 с  <br/> |

> [!NOTE]
> [!Примечание] Загрузка времени может отличаться в конкретного сценария. Время загрузки, влияют много переменных, в том числе размер страницы, задержку и нагрузку на сервер. 

Методы оптимизации страницы следует разделить на две категории: первый запрос страницы и последующие запросы страницы. Оптимизация для первого запроса страницы (время загрузки страницы 1 или PLT1)  это этих видов оптимизации, которые действуют в первый раз запросе страницы, но это не оказывает на обязательно последующие запросы страницы. Ниже приведены некоторые процессы оптимизации PLT1.

- Оптимизация разметки HTML.
- Использовать консолидированный изображений и файлов. Например, для объединения нескольких файлов CSS в одну. Объединение изображений в полосу изображения или кластера.
- Использование методов сжатия (уплотнения). Для получения дополнительных сведений см  [Сжатие (уплотнение) JavaScript и CSS-файлов](optimize-page-performance-in-sharepoint.md#OptimizingPagePerformance_Crunch).
- Убедитесь в том, что вы ссылаетесь рабочей версии общие библиотеки JavaScript, такие как jQuery, а не отладочные версии.
- Подумайте об использовании сети известных доставки содержимого (CDN) например  [Сети доставки содержимого Ajax Microsoft](http://www.asp.net/ajaxlibrary/cdn.ashx). Файлы, требуемые на страницах уже могут кэшироваться браузером клиента.

Оптимизация для последующие запросы страницы  это списки, которые могут улучшить взаимодействие с пользователем для загрузки последующие страницы. Ключ  это, необходимо сбалансировать потери в функциональные возможности с достигнуть прибыли. Если рост реализуется только первый раз пользователь нажимает клавишу сайта, оптимизация не стоит потеря функциональности.

## <a name="compress-crunch-javascript-and-css-files"></a>Сжатие (уплотнение) JavaScript и CSS-файлов
<a name="OptimizingPagePerformance_Crunch"> </a>

Файлы, содержащие стили и JavaScript может значительно уменьшается размер путем удаления пробельные символы, наследование стилей и повторное использование кода. Некоторые библиотеки поступают в регулярных (Отладка) и сжатые версии (crunched). Можно найти множество средств для автоматизации файл уплотнение, выполняя поиск в Интернете.

Убедитесь, что сжатые версии развертываются на рабочем сервере. В этом примере показано, как можно сократить CSS-файла размером до сравнительно легко переопределение.

```
.article-ByLine  {
  font-family: Tahoma,sans-serif; 
  font-size: 9.5pt; 
  font-style: normal; 
  line-height: normal; 
  font-weight: normal; 
  color: #000000
}
.article-Caption { 
  font-family: Tahoma,sans-serif; 
  font-size: 8pt; 
  font-style: normal; 
  line-height: normal; 
  font-weight: normal; 
  color: #000000
}
.article-Headline { 
  font-family: Tahoma,sans-serif; 
  font-size: 14pt; 
  font-style: normal; 
  line-height: normal; 
  font-weight: bold; 
  color: #000000
}
.article-SubHead  { 
  font-family: Tahoma, sans-serif; 
  font-size: 11pt; 
  font-style: normal; 
  line-height: normal; 
  font-weight: normal; 
  color: #000000
}
.article-Text {
  font-family: Tahoma, sans-serif; 
  font-size: 10pt; 
  font-style: normal; 
  line-height: normal; 
  font-weight: normal; 
  color: #000000
}

```

<br/>

Обычно можно найти способы достижения же стиля и уменьшения размера файлов с эффективно переопределение CSS-файлы. Следующем примере показано, как для оптимизации предыдущий размер CSS путем наследования стилей от родительского элемента.

```
BODY {font:100% Tahoma,sans-serif}
.art-By {font: 79%}
.art-Cap {font: 67%}
.art-Head {font: bold 117%}
.art-Sub {font: 92%}
.art-Txt {font: 83%}
```

Первая версия CSS  783 символов, а вторая  140 символов.

## <a name="entity-tags"></a>Тегов объектов
<a name="OptimizingPagePerformance_Crunch"> </a>

Теги сущностей (теги eTag) может привести к клиенту без необходимости перезагрузки файлы. Теги eTag предназначены для уникальной идентификации файлов с помощью номер, который создает сервер. В кластеров серверов каждый сервер создаст другой номер. Например браузер отправляет **Get** метод с **Изменения в том случае, если** поле заголовка для файла, обнаруженных в кэш. Если имеется только один сервер, файл, возможно, будет соответствовать и состояния http **304 Not-Modified** будут отправляться. Однако, если пользователь получает доступ к крупная ферма серверов, оно, вероятно, попадания на другой сервер с тегом другое лицо, вызывающие этот сервер для отправки файла в браузере.

## <a name="cache-settings"></a>Параметры кэширования
<a name="OptimizingPagePerformance_Crunch"> </a>

Используйте Fiddler или аналогичное средство для проверки, является ли кэш служебные запросы. Наиболее распространенные причины, кэширование не запросы на обслуживание включают:

- Ресурсы не имеют значение даты окончания срока действия.
- Строка запроса постоянно изменяется.
- Суммы заголовка директива, а также **last-modified** управления кэшем **max-age** приводит к до текущей даты.
- Прокси-серверы не поддерживают свойства **max-age**.
- Заголовок **элемента управления кэша** имеет значение **Нет кэша**. Значение **закрытого** кэширует ресурсов только для пользователя, который отправляет запрос.

## <a name="number-and-size-of-images"></a>Числа и размера изображений
<a name="OptimizingPagePerformance_Crunch"> </a>

Следует свести к минимуму число образов на вашем сайте. Чтобы упростить этот объем работ, можно вставить несколько изображений в одном файле и затем отдельных изображений на странице ссылку. Не только уменьшается размер загружаемого файла, но меньше файлов привести снижение объема сетевого трафика. Это более сложный для разработки страниц с помощью этой технологии, но в ситуациях, где каждый время приема-передачи и размер файла счетчиков, он может оказаться ценных способ повышения производительности. 

На рисунке 3 показан пример один файл изображения, содержащий несколько изображений.   

*На рисунке 3. Один файл изображения, содержащий несколько изображений*
    
![Один файл изображения, содержащий несколько изображений](../images/OptimizePage_Fig03_SingleImage.png)

<br/>

На рисунке 4 показано, как будет изменен файл изображения для отображения как отдельного изображения в таблице.

*На рисунке 4. Несколько изображений, показанных в таблице*

![Несколько изображений, показанных в таблице](../images/OptimizePage_Fig04_ImageTable.png)
     
Манипуляция изображениями полностью выполняется с помощью классов таблиц стилей. В элементах **div** и **img** каждой ячейки таблицы использовались два основных класса. К этим классам относятся:

```
BODY {font:100% Tahoma,sans-serif}
.art-By  {font: 79%}
.art-Cap {font: 67%}
.art-Head {font: bold 117%}
.art-Sub  {font: 92%}
.art-Txt {font: 83%}


.cluster { 
   height:50px; 
   position:relative; 
   width:50px; 
} 
.cluster img { 
   position:absolute; 
}
```

С каждым изображением связан класс, для связи используется идентификатор (ID) изображения. Этот стиль обрезает изображение и определяет смещение от первоначального изображения в кластере. К этим классам относятся:

```
#person {
   border:none; 
   clip:rect(0, 49, 49, 0); 
} 
#keys { 
   clip:rect(0, 99, 49, 50); 
   left:-50px; 
} 
#people { 
   clip: rect(0, 149, 49, 100); 
   left:-100px; 
} 
#lock { 
   clip:rect(0, 199, 49, 150); 
   left:-150px; 
} 
#phone { 
   clip:rect(0,249, 49, 200); 
   left:-200px; 
}
#question {
    clip: rect(0, 299, 49, 250);
    left: -250px;
}
```


## <a name="list-view-pages"></a>Страницы представления списка
<a name="OptimizingPagePerformance_Crunch"> </a>

Корпорация Майкрософт работает для количественной оценки и повышения производительности время отрисовки страницы представления списка. Страницы представления списка  это страницы AllItems.aspx, используемый каждого списков и библиотек для включения просмотра содержимого. Время отображения страницы может зависеть от широко формат столбцов и число столбцов, отображаемые в представлении. Например параметры отображения и включение значки присутствия может сильно повлиять на время отображения. Свернутые группировки заняло значительно больше времени на отображение чем параметр расширенной группировки и оба были более медленными, чем параметр не группирования всех.

Такого рода особенности, поэтому важно тщательно проанализируйте, как представления, созданные в страницы представления списка, особенно при медленных сетевых соединений. При работе со списками, содержащих большое количество данных, важно тщательно проектирование всех представлений, особенно в представление по умолчанию. В общем случае можно ускорить время отображения страницы представления списка, используя следующие рекомендации:

- Отображение только обязательно столбцов.
- Если это возможно исключение столбцов, содержащих сведения о присутствии.
- Используйте ссылки вместо меню "Правка" для просмотра сведений об элементе.

В следующей таблице описываются настройки, сокращающие время, необходимое для отображения представления.

<br/>

**В таблице 6. Настройки, сокращающие время, необходимое для отображения представления**

|**Элемент**|**Описание**|
|:-----|:-----|
|Тип представления  <br/> |Создание представления в виде табличного, а не стандартного представления.<br/>|
|Представление: ограничение числа элементов  <br/> |Что-либо более 1000 скорее всего будут отображаться медленно.<br/>Через медленное подключение не важно, чтобы проверить, найти правильный баланс между<br/>количество данных, отображаемых во время и число полных обходов необходимо отобразить все данные.<br/>Увеличение количества строк, в которых отображаются во время, меньшее количество полных обходов, но размер страниц.  <br/> |
|Представление: фильтр  <br/> |Используйте **[Сегодня]** и **[я]** ключевые слова для фильтрации элементов по актуальности или назначения.<br/>Использование состояние поля для отображения только активные элементы в используемых по умолчанию для просмотра. <br/> |
|Представление: столбцы  <br/> |Включите наименьшее число столбцов.<br/>Создание представления по умолчанию с несколькими столбцами, что позволит высокоуровневый обзор, после которого пользователи могут перемещаться по уровням вниз.  <br/> |

<br/>

В следующей таблице описываются настройки, увеличивающие время, требуемое для отображения представления. Каждый дополнительный столбец немного увеличивает время отображения: до половины секунды на каждый столбец при быстром сетевом соединении и длине списка в 1000 элементов. Некоторые столбцы, как отмечено в таблице, увеличивают время отображения сильнее других.

<br/>

**В таблице 7. Настройки, увеличивающая время, необходимое для отображения представления**

|**Элемент**|**Описание**|
|:-----|:-----|
|Группировать  <br/> |Группирование добавляет HTML и JScript замедляет работу визуализации для больших списков.<br/>Отображение всех групп, свернуты по умолчанию фактически увеличивает время отображения дальнейшей<br/>из-за дополнительных операций в объектной модели браузера.  <br/> |
|Столбец  заголовок с ссылкой на элемент с меню правки  <br/> |Вариант «с ссылкой на элемент с меню правки» оказывается самым длинным.<br/>Такой же параметр «связанный с элементом» не увеличивает заметно время отображения.  <br/> |
   
<br/>

## <a name="developer-dashboard"></a>Панель мониторинга разработчика
<a name="DeveloperDashboard"> </a>

Информационная панель разработчика перестроение для SharePoint предоставить дополнительную информацию, включая MDS. Запускается в отдельном окне, чтобы предотвратить снижение визуализации фактические страницы, а также запрос на подробные сведения на каждой странице с представлением диаграммы. Он также включает выделенной вкладки для записи в журнале единой ведения журналов (ULS) определенного запроса. Дополнительные сведения для анализа запроса. Он используется выделенного Windows Communication Foundation (WCF) служба (diagnosticsdata.svc) предназначена для предоставления сведений трассировки.
 
Для получения дополнительных сведений о панели мониторинга разработчика:

-  [Общие сведения о SharePoint обновленной панели мониторинга разработчиков](http://www.microsoft.com/resources/technet/en-us/office/media/video/videol?cid=stc&amp;amp;from=mscomstc&amp;amp;VideoID=505bdd61-1fcc-4125-97fc-b5f0dda72cbc) (видео).
-  [Обновленной панели мониторинга разработчиков](http://download.microsoft.com/download/7/7/3/773CA2C2-579B-408C-808E-A6F561194E20/Ig15_SP_IT_M10V3_devdash.pptx) (Панель слайдов PowerPoint).
     
Чтобы включить панель разработчика, используйте следующий фрагмент кода Windows PowerShell.

```
$content = ([Microsoft.SharePoint.Administration.SPWebService]::ContentService)
$appsetting =$content.DeveloperDashboardSettings
$appsetting.DisplayLevel = [Microsoft.SharePoint.Administration.SPDeveloperDashboardLevel]::On
$appsetting.Update() 

```

<br/>

На рисунке 5 показана панель мониторинга разработчиков.

*На рисунке 5. Информационная панель разработчика*

![Панель разработчика](../images/OptimizePage_Fig05_DevDashboard.png)

<br/>

Важно понимать, как эти запросы и число изображений и запросы влияют на производительность. Существуют сходства, когда речь идет о представлений отрисовки списка на сервере (XSL или CAML), как они следовать рекомендациям же размер как представления списков отображаемой со стороны клиента. Тем не менее представление списка серверов, руководство заключается в создании только представлений списка необходимый для выполнения требований, когда ваша цель — оптимальной производительности, как тысячи представлений будет привести к снижению больше производительности из-за управление кэшем компиляции. Характеристики физического компьютера, например, скорость процессора и памяти, будет выделения в общей скорости. 

Имеется также возмещение маршрутов запросов или их распределения. Чтобы лучше понять, как SharePoint маршрутизирует и распространять запросы, можно использовать средство диспетчера запросов. Тем не менее посвященные запрашивающие рассылки выходит за рамки данной статьи. Дополнительные сведения можно [Настроить диспетчер запросов в SharePoint](http://technet.microsoft.com/library/jj712708.aspx).

## <a name="conclusion"></a>Заключение
<a name="bk_conclusion"> </a>

Большая часть рекомендации по оптимизации производительности страниц SharePoint 2010 относится к SharePoint. В этой статье приводятся некоторые элементы руководство по SharePoint 2010 при Освоение новой области, которые специально бы преимущества в отношении производительности. Мы рассматриваются некоторые очевидны изменения и улучшения, например, MDS и улучшенные информационная панель разработчика. Мы оболочку с классической руководство: уплотнения вниз JavaScript и каскадные таблицы стилей, используйте CDN для общие библиотеки JavaScript, если это возможно для кэширования, объединять и сжатия изображений по возможности, ограничить или удалить ненужные данные из представления и построение внимательно представления списка. Методики и компоненты, обсуждаемые в этой статье "участие" для поддержки целей производительности.

## <a name="see-also"></a>См. также
<a name="bk_addresources"> </a>

-  [Создание сайтов для SharePoint](build-sites-for-sharepoint.md)  
-  [Дизайнер SharePoint изображений](sharepoint-design-manager-image-renditions.md)
-  [Обзор Дизайнера в SharePoint](overview-of-design-manager-in-sharepoint.md)
-  [Обзор модели страниц в SharePoint](overview-of-the-sharepoint-page-model.md)
    
  

---
title: "Добавление фрагмента кода \"Зона веб-частей\" в SharePoint"
ms.date: 09/25/2017
ms.prod: sharepoint
ms.assetid: 7583b217-200c-4569-8f88-fe975c8ebd72
ms.openlocfilehash: 3fcccf3e3be505706bc97a7f7b343e4a2f48027a
ms.sourcegitcommit: 0a94e0c600db24a1b5bf5895e6d3d9681bf7c810
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/07/2017
---
# <a name="add-a-web-part-zone-snippet-in-sharepoint"></a>Добавление фрагмента кода "Зона веб-частей" в SharePoint

Зона веб-частей  это фрагмент, который можно добавить к макету страницы, чтобы авторы контента могли добавлять, редактировать и удалять веб-части в этой зоне.

## <a name="introduction-to-the-web-part-zone-snippet"></a>Общие сведения о фрагменте зоны веб-частей
<a name="Introduction"> </a>

Веб-часть  это элемент управления сервера, который предоставляет некоторые функции SharePoint, а зона веб-частей  это контейнер, который определяет макет, поведение и другие свойства веб-частей в этой зоне. Например, зона веб-частей может указывать, будут ли веб-части в этой зоне:
  
    
    

- упорядочены по горизонтали или по вертикали; 
    
  
- отображать распространенные элементы пользовательского интерфейса, например строку заголовка или границу;
    
  
- доступны для настройки авторами контента при редактировании страницы в браузере;
    
  
- доступны для персонализации посетителями сайта, которые создают личное представление веб-части при просмотре страницы в браузере.
    
  
На сайте публикации авторы контента с необходимыми разрешениями могут создавать или редактировать страницы, которые хранятся в библиотеке "Страницы". Как разработчик вы можете добавить зону веб-частей к макету страницы. Когда автор контента создает или редактирует страницу на основе ее макета, он может добавлять, редактировать или удалять веб-части в этой зоне. Например, вы можете добавить зону веб-частей к макету страницы, чтобы авторы контента могли:
  
    
    

- отображать результаты поискового запроса с помощью веб-части поиска контента. Авторы могут обновлять или изменять поисковый запрос, если веб-часть на основе поиска хранится в зоне веб-частей;
    
  
- встраивать видеоролики и аудиофайлы в веб-страницу с помощью веб-части "Мультимедиа";
    
  
- создавать списки гиперссылок, которые легко редактировать, группировать и упорядочивать, с помощью веб-части "Сводная ссылка";
    
  
- создать карту сайта, которая содержит список всех страниц на сайте и автоматически обновляется при добавлении, удалении, переименовании или перемещении страницы, с помощью веб-части "Оглавление".
    
  

### <a name="when-to-use-web-part-zones"></a>Когда использовать зоны веб-частей

Если макет страницы включает одну или несколько зон веб-частей, то они доступны на всех страницах, использующих этот макет, что позволяет авторам вставлять веб-части в эти зоны. Позволяя авторам вставлять веб-части на страницы, вы ослабляете свой контроль над пользовательским интерфейсом сайта. Например, автор может вставить веб-часть "Оглавление" на страницу, которая отображает части вашего сайта, на которые пользователи не должны переходить с текущей страницы.
  
    
    
Если вам нужен полный контроль над внешним видом веб-части на вашем сайте и эта веб-часть должна отображаться на всех страницах определенного типа, добавьте веб-часть непосредственно на эталонную страницу.
  
> [!NOTE]
> Зоны веб-частей доступны на макетах страниц, но недоступны на эталонных страницах — зоны позволяют авторам изменять веб-части, а авторы обычно не меняют эталонную страницу. 
  
    
    

Вы также можете добавлять зоны веб-частей к макетам страниц, но ограничивать их использование. Например, вы можете добавить веб-части к зоне, а затем задать свойство этой зоны, чтобы авторы контента могли редактировать свойства существующих веб-частей, но не могли добавлять и удалять веб-части в зоне. Зоны веб-частей имеют ряд свойств, которые служат для двух целей. Один набор свойств можно использовать для организации макета и форматирования веб-частей на странице. Другой позволяет обеспечить дополнительный уровень защиты от изменения (или "блокирование") веб-частей в зоне.
  
    
    
Для различных уровней контроля над внешним видом веб-частей на сайте вы можете:
  
    
    

- добавить веб-части непосредственно на эталонную страницу или макет страницы. Это означает, что авторы контента не могут изменять веб-части;
    
  
- добавить веб-части к зонам на макетах страниц, но ограничить эти зоны только веб-частями по умолчанию, которые вы добавляете;
    
  
- добавить зоны веб-частей на макеты страниц и предоставить авторам контента полный контроль над внешним видом и конфигурацией веб-частей в этих зонах.
    
  
Свойства зоны веб-частей могут указывать, разрешается ли авторам контента изменять:
  
    
    

- макеты веб-частей в зоне путем добавления, удаления, изменения размеров и перемещения веб-частей;
    
  
- параметры веб-частей для всех пользователей (общее представление веб-части);
    
  
- личные параметры веб-частей (личное представление веб-части).
    
  
В таблице 1 показаны важные свойства, которые следует учитывать, если требуется ограничить зону веб-частей.
  
    
    

**Таблица 1. Свойства зоны веб-частей, используемые для ограничения авторов контента**


|**Имя свойства**|**Описание**|
|:-----|:-----|
|**AllowLayoutChange** <br/> |Указывает, можно ли закрывать, сворачивать, удалять и восстанавливать веб-части в зоне.  <br/> Если задано значение **False**, то пользователи не могут закрывать, сворачивать, удалять и восстанавливать веб-части в зоне, перетаскивать веб-части и другие зоны, а также перемещать веб-части и менять их местами. Пользователи также не могут добавлять веб-части из каталога, а несколько свойств, влияющих на пользовательский интерфейс веб-частей в зоне, отключено. Это свойство не влияет на возможность менять макет программным образом.<br/> Если задано значение **True**, то пользователи с соответствующими разрешениями могут выполнять эти действия.  <br/> |
|**LockLayout** <br/> |Указывает, можно ли добавлять, удалять и перемещать веб-части в зоне, а также менять их размеры.<br/>  Если задано значение **True**, то затрагиваются следующие свойства каждой веб-части в зоне: **Зона (ZoneID)**, **Порядок частей (PartOrder)**, **Видимость на странице (IsVisible)**, **Высота (Height)**, **Ширина (Width)**, **Разрешить закрытие (AllowRemove)** и **IsIncluded** (команда **Закрыть** в меню **Веб-часть**). Остальные свойства веб-частей остаются без изменений.  <br/> Если задано значение **False**, то свойства веб-частей определяют, можно ли выполнять изменения (а также соответствующие разрешения на сайте).  <br/> |
|**AllowCustomization** <br/> |Указывает, можно ли менять значения общих свойств веб-частей в зоне.  <br/> Если задано значение **True**, то пользователи с соответствующими разрешениями могут изменять веб-части в зоне для всех пользователей.  <br/> Если задано значение **False**, то пользователи не могут изменять веб-части в зоне пользовательского интерфейса в общем представлении. Тем не менее, эти изменения можно выполнить программным способом и на странице "Управление веб-частями".<br/> |
|**AllowPersonalization** <br/> |Указывает, можно ли менять значения личных свойств веб-частей в зоне.  <br/> Если задано значение **True**, то пользователи с соответствующими разрешениями могут выполнять личные изменения веб-частей в зоне.  <br/> Если задано значение **False**, то пользователи не могут выполнять изменения веб-частей через пользовательский интерфейс, если эта веб-часть не является личной и у них нет соответствующих разрешений.  <br/> |
   
> [!NOTE]
> Зону веб-части невозможно вставить на панели канала устройства. Если вы хотите, чтобы авторы могли добавлять веб-части на страницу, и вас не беспокоит вес страницы для мобильных устройств, можете добавить поле страницы "Редактор форматированного текста" на панель канала устройства, а затем сообщить авторам, что веб-части следует добавлять туда. Вы можете добавлять веб-части непосредственно на панель канала устройства (без зоны веб-частей). Дополнительные сведения см. в статье [Сведения о том, как добавить фрагмент кода для панели канала устройства в SharePoint](how-to-add-a-device-channel-panel-snippet-in-sharepoint.md). 
  
    
    


## <a name="inserting-a-web-part-zone-snippet"></a>Вставка фрагмента кода для зоны веб-частей
<a name="InsertSnippet"> </a>

Как и все фрагменты, этот фрагмент добавляется из коллекции. Чтобы перейти в коллекцию фрагментов, необходимо сначала выбрать макет страницы для редактирования. Зоны веб-частей можно добавлять к макетам страниц, но нельзя добавлять к эталонным страницам.
  
    
    

### <a name="to-insert-a-web-part-zone-snippet"></a>Вставка фрагмента зоны веб-частей


1. Перейдите на сайт публикации.
    
  
2. Нажмите значок шестеренки "Параметры" в правом верхнем углу страницы, а затем выберите **Дизайнер**.
    
  
3. В Дизайнере в левой области панели навигации выберите команду **Изменить макеты страниц**.
    
  
4. Выберите имя макета страницы, к которому нужно добавить фрагмент.
    
  
5. Чтобы открыть коллекцию фрагментов, выберите **Фрагменты** в правом верхнем углу страницы предварительного просмотра на стороне сервера.
    
  
6. На вкладке ленты **Конструктор** нажмите **Зона веб-частей**.
    
  
7. В разделе **Об этом компоненте** в правой части коллекции фрагментов щелкните или выберите заголовок раздела, чтобы развернуть или свернуть группу свойств, а затем настройте все нужные настраиваемые параметры.
    
    Раздел под названием **Важное** содержит ключевые свойства, необходимые для работы конкретного фрагмента. Идентификатор фрагмента является уникальным для зоны веб-частей. После копирования фрагмента на макет страницы не следует повторно использовать этот идентификатор. Если вам нужно добавить еще один фрагмент зоны веб-частей, нажмите **Обновить**, чтобы создать новый идентификатор для следующего фрагмента.
    
    Описания свойств, необходимых для ограничения зоны веб-частей (**LockLayout**, **AllowCustomization** и **AllowPersonalization**), см. в таблице 1.
    
    > [!NOTE]
    > Вы можете заметить, что имена некоторых свойств выделены полужирным шрифтом в таблице свойств коллекции фрагментов. Эти свойства имеют значения, которые были изменены по сравнению со значениями по умолчанию для этого компонента, но эти свойства могут быть необязательными для вашего сценария. 

8. Настроив свойства, нажмите **Обновить**. При этом обновляется фрагмент HTML в левой части страницы, чтобы разметка отражала настраиваемые параметры. Вы всегда можете нажать кнопку **Сбросить**, чтобы восстановить исходные значения всех свойств.
    
  
9. В разделе **Фрагмент HTML** в левой части коллекции фрагментов выберите команду **Копировать в буфер обмена**.
    
  
10. В редакторе HTML откройте сопоставленный сетевой диск на своем компьютере, а затем откройте HTML-файл для эталонной страницы или макета, к которым добавляется фрагмент.
    
    Дополнительные сведения см. в статье  [Как: сопоставление сетевого диска коллекции главных страниц SharePoint](how-to-map-a-network-drive-to-the-sharepoint-master-page-gallery.md).
    
  
11. Вставьте фрагмент в том месте HTML-файла, где должна отображаться разметка.
    
    При добавлении фрагмента к макету страницы необходимо добавить его в блок **PlaceHolderMain**.
    
  
12. Замените **<div>** в разделе `class="DefaultContentBlock"` собственным контентом.
    
  
13. Если вам нужно предварительно заполнить зону веб-частями (например, если в зоне авторам контента разрешено только менять существующие веб-части и запрещено создавать новые), вставьте фрагменты веб-частей после тега **<!--DC … -->**.
    
  
14. Сохраните страницу, а затем обновите страницу предварительного просмотра на стороне сервера в Дизайнере, чтобы страница приняла ожидаемый вид.
    
  

## <a name="understanding-the-snippet-markup"></a>Сведения о разметке фрагментов
<a name="UnderstandMarkup"> </a>

Две важнейших части фрагмента зоны веб-частей  свойство **ID** и комментарий **<!--DC … -->**. У каждой зоны должен быть уникальный идентификатор. Если вам нужно добавить к макету страницы несколько веб-частей, обязательно нажимайте кнопку **Обновить** в коллекции фрагментов перед копированием каждого фрагмента, чтобы создать новый идентификатор. Комментарий **<!--DC … -->** необходимо заменить веб-частями, которые должны отображаться в зоне по умолчанию.
  
    
    
Дополнительные свойства, которые позволяют ограничить использование зон авторами контента ( **AllowCustomization**, **AllowPersonalization** и **LockLayout**), приводятся в следующем коде.
  
> [!NOTE]
> Свойства **AllowCustomization**, **AllowPersonalization** и **LockLayout** отображаются в разметке, только если изменить их значения по умолчанию в сетке свойств.
  
    
    




```HTML

<div data-name="WebPartZone">
    <!--CS: Start Web Part Zone Snippet-->
    <!--SPM:<%@Register Tagprefix="WebPartPages" Namespace="Microsoft.SharePoint.WebPartPages" Assembly="Microsoft.SharePoint, Version=15.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c"%>-->
    <div xmlns:ie="ie">
        <!--MS:<WebPartPages:WebPartZone runat="server" ID="x0e5f5212505f48a9aac43df13eeae4f9" AllowCustomization="True" AllowPersonalization="False" FrameType="TitleBarOnly" LockLayout="True" Orientation="Vertical">-->
            <!--MS:<ZoneTemplate>-->
               <!--DC: Replace this comment with default web parts for new pages. -->
            <!--ME:</ZoneTemplate>-->
        <!--ME:</WebPartPages:WebPartZone>-->
    </div>
    <!--CE: End Web Part Zone Snippet-->
</div>

```


## <a name="see-also"></a>См. также
<a name="AdditionalResources"> </a>


-  [Фрагменты кода дизайнер SharePoint](sharepoint-design-manager-snippets.md)
    
  
-  [Класс WebPartZone](http://msdn.microsoft.com/ru-RU/library/system.web.ui.webcontrols.webparts.webpartzone.aspx)
    
  
-  [Свойства WebPartZoneBase](http://msdn.microsoft.com/ru-RU/library/335sw9k3.aspx)
    
  
-  [Создание сайтов для SharePoint](build-sites-for-sharepoint.md)
    
  
-  [Разработка макета сайта в SharePoint](develop-the-site-design-in-sharepoint.md)
    
  


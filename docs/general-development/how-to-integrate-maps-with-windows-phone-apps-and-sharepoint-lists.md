---
title: "Как интегрировать карт с помощью приложения Windows Phone и списков SharePoint"
ms.date: 09/25/2017
ms.prod: sharepoint
ms.assetid: 7e0550bc-92d1-407f-b8ba-1371c63bd16e
ms.openlocfilehash: edaa7fc078ced8ed4b99503346ddd9d1a8a9d4ca
ms.sourcegitcommit: 1cae27d85ee691d976e2c085986466de088f526c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/13/2017
---
# <a name="how-to-integrate-maps-with-windows-phone-apps-and-sharepoint-lists"></a>Как: интеграция карт с приложения Windows Phone и списков SharePoint
Узнайте, как интегрировать в списки SharePoint сведения о местонахождении и карты, а также веб-приложения и мобильные Надстройки SharePoint на основе местонахождения с использованием нового поля географического положения и путем создания собственных типов полей на основе географического положения.
SharePoint представлен новый тип поля с именем географического расположения, которая позволяет добавлять комментарии к списки SharePoint, содержащие сведения о расположении. В столбцах типа географического расположения можно ввести сведения о расположении в виде пары Широта и долгота координат в десятичное градусов или получить координаты текущее расположение пользователя в браузере, если браузер реализует интерфейс API географического расположения W3C. В списке SharePoint расположение на карте корневых объектов на базе службы Bing Maps. Друг с другом поля географического расположения и представления карты позволяют предоставить Пространственные контекста какие-либо сведения по интеграции данных из SharePoint в сопоставления качества и позволяют пользователям вступать в новых способов в web и мобильных приложений и решений. Мы будем для создания простого Windows 7, сопоставляет мобильного приложения, который использует функцию тип поля географического расположения SharePoint для использования возможностей сопоставления может отображать для мобильных устройств надстройки SharePoint элементов списка.
  
    
    


> **Важные:** При разработке приложения для Windows Phone 8, должны использовать Visual Studio Express 2012 г., а не в Visual Studio 2010 Express. За исключением среды разработки все сведения в этой статье применимы к созданию приложений для Windows Phone 8 и Windows Phone 7. > Для получения дополнительных сведений см [как: Настройка среды разработки мобильных приложений для SharePoint](how-to-set-up-an-environment-for-developing-mobile-apps-for-sharepoint.md). 
  
    
    


## <a name="prerequisites-for-creating-a-map-based-windows-phone-app"></a>Необходимые условия для создания приложения на основе карты Windows phone
<a name="SP15Integratemaps_prereeq"> </a>

Убедитесь в том, что у вас есть следующие компоненты:
  
    
    

- SharePoint
    
  
- Visual Studio 2012
    
  
- Visual Studio Express 2010 с помощью новых шаблонами телефонов SharePoint из  [SDK Microsoft SharePoint для Windows Phone 7.1](http://www.microsoft.com/en-us/download/details.aspx?id=30476)
    
  
- Доступ к списку SharePoint, имеющего достаточные права для добавления столбца
    
  
- Ключ Bing Maps, развернут сервер; просмотреть [как: задать ключ карт Bing на уровне веб-серверы и фермы в SharePoint](how-to-set-the-bing-maps-key-at-the-web-and-farm-level-in-sharepoint.md)
    
  

## <a name="step-1-create-a-sharepoint-field-by-using-the-geolocation-feature"></a>Шаг 1: Создание поля SharePoint с помощью компонента географического расположения
<a name="HowToCreateMapBasedPhoneApp_Step1"> </a>

В столбце географического расположения недоступен в списки SharePoint по умолчанию. Потребуется написать код для добавления столбца к списку SharePoint. Мы покажем, как добавить поля географического расположения в список программным путем с помощью клиентской объектной модели SharePoint. После добавления поля в списке поля географического расположения как компонент можно добавить в список.
  
    
    

### <a name="to-create-the-visual-studio-project"></a>Создание проекта Visual Studio


1. Выполните вход с правами администратора на сервере SharePoint.
    
  
2. Запустите **Visual Studio** и выберите **файл**, **Создать проект**. Откроется диалоговое окно **Новый проект**.
    
  
3. В диалоговом окне **Создать проект** выберите **Visual C#**, выберите пункт **SharePoint**и затем выберите тип проекта **SharePoint** .
    
  
4. Назовите проект. В этом примере мы используем **GeoList**. Нажмите кнопку « **ОК** ».
    
  
5. В окне **Мастер настройки SharePoint** введите URL-адрес семейства веб-сайтов, которое использует тот же список SharePoint, который требуется получить доступ к для разработки приложений для телефонов.
    
  
6. В **Обозревателе решений** откройте контекстное меню для проекта **GeoList** и затем выберите команду **Добавить** **Новый элемент**.
    
  
7. В диалоговом окне **Добавление нового элемента** выберите **список**. Имя списка. В этом примере мы используем **ServiceCalls**.
    
  
8. В диалоговом окне **Выбор параметров списка** добавьте отображаемое имя. В этом примере используется **Служба звонки**. **Выберите для настройки на основе списка** выберите **по умолчанию (пусто)**, как показано на рисунке 1.
    
    Нажмите **Готово**.
    

   **На рисунке 1. Добавление списка SharePoint с помощью мастера создания списка SharePoint**

  

  ![Добавление списка SharePoint с помощью мастера](../images/SP15Con_HowToCreateMapBasedPhoneApp_Fig1.png)
  

  

  

### <a name="to-add-a-feature-to-the-sharepoint-list"></a>Добавление компонента в список SharePoint


1. В **Обозревателе решений** выберите и разверните узел **компоненты**.
    
  
2. Откройте контекстное меню для узла **Feature1** и нажмите кнопку **Добавить**, **Добавить приемник событий**.
    
  
3. Раскомментируйте метод **FeatureActivated** и метод **FeatureDeactivating** и затем добавьте следующий код.
    
```cs
  
public override void FeatureActivated(SPFeatureReceiverProperties properties)
{
    SPWeb site = properties.Feature.Parent as SPWeb;
    SPList list = site.Lists.TryGetList("Service Calls");
    if (list != null)
    {
        list.Fields.AddFieldAsXml(
            "<Field Type='Geolocation' DisplayName='Location'/>", 
            true, 
            SPAddFieldOptions.Default);
        list.Update();
    }
}
public override void FeatureDeactivating(
                     SPFeatureReceiverProperties properties)
{
    SPWeb site = properties.Feature.Parent as SPWeb;
    SPList list = site.Lists.TryGetList("Service Calls");
    if (list != null)
    {
        list.Delete();
    }
}
```

4. Построение решения, нажав клавишу F6.
    
  

## <a name="step-2-deploy-the-list-and-enter-data-into-the-location-based-sharepoint-list"></a>Шаг 2: Развертывание списка и ввести данные в список SharePoint на основе расположения
<a name="HowToCreateMapBasedPhoneApp_Step2"> </a>

На этом этапе развертывания только что созданный список из Visual Studio и использование нового поля расположения в SharePoint. 
  
    
    

### <a name="to-deploy-the-sharepoint-list"></a>Развертывание списка SharePoint


- В **Обозревателе решений** откройте контекстное меню для проекта **GeoList** и нажмите кнопку **Развернуть**.
    
  

### <a name="to-enter-data-in-the-new-sharepoint-list-with-the-geolocation-field"></a>Для ввода данных в списке SharePoint с использованием поля географического расположения


1. После списка успешно развертывает, откройте сайт, который используется для разработки приложений для телефонов.
    
  
2. Выберите **Дополнительные** и выберите в списке **Вызовов служб**.
    
  
3. Нажмите кнопку **Добавить новый элемент**.
    
  
4. Укажите название в поле **Название**. В данном примере используйте **Новый элемент географического расположения**.
    
  
5. Нажмите кнопку **Использовать текущее расположение** в поле **расположение** или выберите **Укажите расположение** и затем введите значения для **широта** и **долгота**.
    
  
6. Нажмите кнопку **Сохранить**.
    
  

## <a name="step-3-build-a-phone-app-for-the-location-based-list"></a>Шаг 3: Создание приложения с телефона для списка на основе расположения
<a name="HowToCreateMapBasedPhoneApp_Step3"> </a>

На этом этапе вы создадите Phone, которое использует список SharePoint, созданного ранее в шаге 1 и 2. 
  
    
    

1. Войдите в среду разработки приложений для телефонов на стороне клиента.
    
  
2. Запустите Visual Studio 2010 Express с новыми шаблонами SharePoint.
    
  
3. В строке меню последовательно щелкните **Файл**, **Создать проект**.
    
    Откроется диалоговое окно **Новый проект**.
    
  
4. В диалоговом окне **Создать проект** выберите **Visual C#**, **Silverlight для Windows Phone**, **Приложения списка SharePoint для Windows Phone**.
    
  
5. Назовите проект. В этом примере мы используем GeoApp. Нажмите кнопку « **ОК** ».
    
  
6. В окне **Мастера приложений для телефона SharePoint** введите URL-адрес сайта SharePoint, где развернута в список в **Шаг 2. Развертывание списка и ввести данные в список SharePoint на основе расположения** и нажмите кнопку **Найти список**.
    
  
7. Выберите в списке **Вызовов службы** и нажмите кнопку **Далее**.
    
  
8. На странице " **Выбор представлений** " выберите **Все элементы** и нажмите кнопку **Далее**.
    
  
9. На странице **Выбор операций** выберите **отображения** и нажмите кнопку **Далее**.
    
  
10. На странице " **Выбор поля** " выберите поле, которое требуется просмотреть на ваше приложение телефона и нажмите кнопку **Далее**.
    
  
11. На странице " **Поля заказа** " изменить порядок полей, а затем нажмите кнопку **Готово**.
    
  

## <a name="step-4-test-and-validate-your-app"></a>Шаг 4: Тестирование и проверка приложения
<a name="HowToCreateMapBasedPhoneApp_Step4"> </a>

На этом этапе можно запустить приложение и проверить его.
  
    
    

1. В Visual Studio выберите **Отладка**, **Начать отладку**.
    
  
2. При получении запроса выполните вход, используя учетные данные, имеющие права администратора на сервере SharePoint.
    
  
3. В данном примере выберите первой записи **Брайан Cox**.
    
  
4. Выберите в поле **расположение** ссылку **Сопоставление**.
    
  
5. На экране политики конфиденциальности **Разрешить карт для доступа и использования своего местоположения** выберите **Разрешить**, как показано на рисунке 2.
    
   **На рисунке 2. Запрос мобильного приложения для предоставления доступа к текущее расположение**

  

  ![Разрешение политики конфиденциальности для схем](../images/SP15Con_HowToCreateMapBasedPhoneApp_Fig2.png)
  

    Откроется представление карты, как показано на рисунке 3.
    

   **На рисунке 3. путь для отображения мобильного приложения в карты Bing**

  

  ![Представление карты в мобильном приложении](../images/SP15Con_HowToCreateMapBasedPhoneApp_Fig3.png)
  

  

  

> **Примечание:** Взаимодействие с пользователем поля географического расположения может отличаться на мобильных устройствах, чем в браузерах. Параметр **Использовать определенное расположение** в браузере, недоступен для мобильных устройств. Для мобильных устройств, доступен только один параметр: **Использование личных расположения**. 
  
    
    


## <a name="additional-resources"></a>Дополнительные ресурсы
<a name="SP15Integmaps_addlresources"> </a>


-  [Построение приложений Windows Phone, обращающихся к SharePoint](build-windows-phone-apps-that-access-sharepoint.md)
    
  
-  [Интеграция расположение и карты функциональные возможности в SharePoint](integrating-location-and-map-functionality-in-sharepoint.md)
    
  
-  [Как: расширение типа поля географического расположения, с использованием обработки на стороне клиента](how-to-extend-the-geolocation-field-type-using-client-side-rendering.md)
    
  
-  [Как: Добавление столбца географического расположения списка программными средствами в SharePoint](how-to-add-a-geolocation-column-to-a-list-programmatically-in-sharepoint.md)
    
  
-  [Как: Настройка среды разработки мобильных приложений для SharePoint](how-to-set-up-an-environment-for-developing-mobile-apps-for-sharepoint.md)
    
  
-  [Пакет SDK для Windows Phone 7.1](http://www.microsoft.com/en-us/download/details.aspx?id=27570)
    
  
-  [Пакет SDK Microsoft SharePoint для Windows Phone 7.1](http://www.microsoft.com/en-us/download/details.aspx?id=30476)
    
  


---
title: "Работа с сайтами, в среде с несколькими географически"
ms.date: 11/03/2017
ms.openlocfilehash: cd7b3889a7299916d96e4e80bb65126c41733494
ms.sourcegitcommit: 0a94e0c600db24a1b5bf5895e6d3d9681bf7c810
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/07/2017
---
# <a name="work-with-sites-in-a-multi-geo-environment"></a><span data-ttu-id="f8efd-102">Работа с сайтами, в среде с несколькими географически</span><span class="sxs-lookup"><span data-stu-id="f8efd-102">Work with sites in a Multi-Geo environment</span></span>

> <span data-ttu-id="f8efd-103">**Важные:** OneDrive и SharePoint Online Multi-Geo в данный момент в предварительной версии и может быть изменен.</span><span class="sxs-lookup"><span data-stu-id="f8efd-103">**Important:** OneDrive and SharePoint Online Multi-Geo is currently in preview and is subject to change.</span></span>

<span data-ttu-id="f8efd-104">Сайты SharePoint охватывать расположения географически по умолчанию и вспомогательные несколькими географически клиента.</span><span class="sxs-lookup"><span data-stu-id="f8efd-104">SharePoint sites span the default and satellite geo locations of a Multi-Geo tenant.</span></span> <span data-ttu-id="f8efd-105">При необходимости пользовательского решения для работы с сайтами SharePoint, а при развертывании приложений, важно необходимо учитывать расположения географически несколькими географически клиента.</span><span class="sxs-lookup"><span data-stu-id="f8efd-105">When your custom solution needs to work with SharePoint sites, and when you deploy applications, it's important to be aware of the geo locations in your Multi-Geo tenant.</span></span> 

## <a name="deploying-applications-to-multi-geo-sharepoint-tenants"></a><span data-ttu-id="f8efd-106">Развертывание приложений к клиентам с несколькими географически SharePoint</span><span class="sxs-lookup"><span data-stu-id="f8efd-106">Deploying applications to Multi-Geo SharePoint tenants</span></span>
<span data-ttu-id="f8efd-107">При развертывании приложения, такие как надстройки SharePoint или со стороны клиента веб-частей SharePoint, в зависимости от среды SharePoint, которые необходимо выполнить в учетную запись, что приложения развертываются на уровне географического расположения.</span><span class="sxs-lookup"><span data-stu-id="f8efd-107">When you're deploying applications, such as SharePoint Add-ins or SharePoint client-side web parts based on the SharePoint Framework, you need to take in account that applications are deployed at the geo location level.</span></span> <span data-ttu-id="f8efd-108">После развертывания приложения по умолчанию, географически этого приложения не будет доступен в расположениях географически вспомогательных.</span><span class="sxs-lookup"><span data-stu-id="f8efd-108">When you deploy an application to the default geo location, that application will not be available in the satellite geo locations.</span></span> <span data-ttu-id="f8efd-109">Для получения дополнительных сведений о развертывании приложения в разделе [Управление приложений/Add-ins в географически нескольких клиентов](multigeo-apps.md) .</span><span class="sxs-lookup"><span data-stu-id="f8efd-109">See [Managing Apps/Add-ins in a Multi-Geo tenant](multigeo-apps.md) for more details on app deployment.</span></span>

<span data-ttu-id="f8efd-110">Мы рекомендуем, развертывание и обновление к корпоративным приложениям во всех расположениях.</span><span class="sxs-lookup"><span data-stu-id="f8efd-110">We recommend that you deploy and update your enterprise applications in all locations.</span></span> <span data-ttu-id="f8efd-111">Это гарантирует, что приложение будет доступно всем пользователям.</span><span class="sxs-lookup"><span data-stu-id="f8efd-111">This will ensure that the application is available to all users.</span></span>

## <a name="enumerating-site-collections"></a><span data-ttu-id="f8efd-112">Перечисление семейств веб-сайтов</span><span class="sxs-lookup"><span data-stu-id="f8efd-112">Enumerating site collections</span></span>
<span data-ttu-id="f8efd-113">Для перечисления всех семейств сайтов клиента, используйте [метод CSOM GetSitePropertiesFromSharePointByFilters](https://msdn.microsoft.com/en-us/library/microsoft.online.sharepoint.tenantadministration.tenant.getsitepropertiesfromsharepointbyfilters.aspx) на `Tenant` экземпляра объекта.</span><span class="sxs-lookup"><span data-stu-id="f8efd-113">To enumerate all tenant site collections, use the [CSOM GetSitePropertiesFromSharePointByFilters method](https://msdn.microsoft.com/en-us/library/microsoft.online.sharepoint.tenantadministration.tenant.getsitepropertiesfromsharepointbyfilters.aspx) on a `Tenant` object instance.</span></span> <span data-ttu-id="f8efd-114">Так как каждого географически из центра администрирования клиента, вам потребуются для перечисления семейств веб-сайтов одного географического расположения и объединения результатов для получения единого клиента всей список семейств веб-сайтов.</span><span class="sxs-lookup"><span data-stu-id="f8efd-114">Because each geo location has a tenant admin center,  you'll need to enumerate site collections per geo location and concatenate the results to get a single tenant-wide list of site collections.</span></span>

<span data-ttu-id="f8efd-115">Чтобы выполнить перечисление сайтов всей клиента:</span><span class="sxs-lookup"><span data-stu-id="f8efd-115">To perform a tenant-wide site enumeration:</span></span>

- <span data-ttu-id="f8efd-116">[Найти все географического расположения](multigeo-discovery.md) и их связанного клиента администрирования сайта URL-адреса.</span><span class="sxs-lookup"><span data-stu-id="f8efd-116">[Find all geo locations](multigeo-discovery.md) and their associated tenant admin site URLs.</span></span>
- <span data-ttu-id="f8efd-117">Используйте цикл, который выполняет итерацию географического расположения и создает `Tenant` объект с URL-адрес сайта администрирования географического расположения.</span><span class="sxs-lookup"><span data-stu-id="f8efd-117">Create a loop that iterates over the geo locations and creates a `Tenant` object with the geo location's admin site URL.</span></span>
    - <span data-ttu-id="f8efd-118">Использование `GetSitePropertiesFromSharePointByFilters` вызова метода в `Tenant` объекта для получения семейств сайтов для данного географического расположения.</span><span class="sxs-lookup"><span data-stu-id="f8efd-118">Use the `GetSitePropertiesFromSharePointByFilters` method call on the `Tenant` object to get the site collections for that geo location.</span></span>
    - <span data-ttu-id="f8efd-119">Добавьте в список семейств веб-сайтов.</span><span class="sxs-lookup"><span data-stu-id="f8efd-119">Append the site collections to a list.</span></span>
- <span data-ttu-id="f8efd-120">Возвращает список семейств веб-сайтов.</span><span class="sxs-lookup"><span data-stu-id="f8efd-120">Return the list of site collections.</span></span>

<span data-ttu-id="f8efd-121">Для получения дополнительных сведений см [MultiGeo.SiteEnumeration](https://github.com/SharePoint/PnP/tree/dev/Samples/MultiGeo.SiteEnumeration) .</span><span class="sxs-lookup"><span data-stu-id="f8efd-121">To learn more, see the [MultiGeo.SiteEnumeration](https://github.com/SharePoint/PnP/tree/dev/Samples/MultiGeo.SiteEnumeration) sample.</span></span>

> [!NOTE] 
> <span data-ttu-id="f8efd-122">Дополнительные сведения о разрешениях и настройке приложения см [несколькими географически примера приложения](multigeo-sampleapplicationsetup.md).</span><span class="sxs-lookup"><span data-stu-id="f8efd-122">For more information about permissions and how to configure your application, see [Set up a Multi-Geo sample application](multigeo-sampleapplicationsetup.md).</span></span>

## <a name="performing-tenant-level-operations"></a><span data-ttu-id="f8efd-123">Для выполнения операций на уровне клиента</span><span class="sxs-lookup"><span data-stu-id="f8efd-123">Performing tenant-level operations</span></span>
<span data-ttu-id="f8efd-124">`Tenant` Объекта также используется для настройки параметры на уровне клиента, таких как параметры CDN и параметры сайта на уровне клиента, такие как **ограничение географически расположение узла**.</span><span class="sxs-lookup"><span data-stu-id="f8efd-124">The `Tenant` object is also used to configure tenant-level settings, such as CDN settings, and tenant-level site settings, such as the **site geo location restriction**.</span></span> <span data-ttu-id="f8efd-125">Для выполнения операций на уровне клиента:</span><span class="sxs-lookup"><span data-stu-id="f8efd-125">To perform tenant-level operations:</span></span>

- <span data-ttu-id="f8efd-126">[Найти все географического расположения](multigeo-discovery.md) и их связанного клиента администрирования сайта URL-адреса.</span><span class="sxs-lookup"><span data-stu-id="f8efd-126">[Find all geo locations](multigeo-discovery.md) and their associated tenant admin site URLs.</span></span>
- <span data-ttu-id="f8efd-127">Чтобы обновить параметры на уровне клиента, итерации по географического расположения и внести изменения одного географического расположения.</span><span class="sxs-lookup"><span data-stu-id="f8efd-127">To update tenant-level settings, iterate over the geo locations and make the change per geo location.</span></span>
- <span data-ttu-id="f8efd-128">Чтобы обновить параметры сайта на уровне клиента:</span><span class="sxs-lookup"><span data-stu-id="f8efd-128">To update tenant-level site settings:</span></span> 
    - <span data-ttu-id="f8efd-129">Использование `GeoLocation` свойства `Site` для получения географического расположения сайта</span><span class="sxs-lookup"><span data-stu-id="f8efd-129">Use the `GeoLocation` property of the `Site` object to get the site's geo location</span></span> 
    - <span data-ttu-id="f8efd-130">Использование `GetSitePropertiesByUrl` владельца сайта, внесите изменения и вызов метода `Update` на извлеченных `SiteProperties` объекта.</span><span class="sxs-lookup"><span data-stu-id="f8efd-130">Use the `GetSitePropertiesByUrl` tenant method to get the site, make changes, and call `Update` on the retrieved `SiteProperties` object.</span></span>

<span data-ttu-id="f8efd-131">Для получения дополнительных сведений о том, как получить сайта с помощью `GetSitePropertiesByUrl` метод и затем запретить сайта происходит перемещение, задав `RestrictedToRegion` свойства, просмотрите образец [MultiGeo.RestrictSiteToGeoLocation](https://github.com/SharePoint/PnP/tree/dev/Samples/MultiGeo.RestrictSiteToGeoLocation) .</span><span class="sxs-lookup"><span data-stu-id="f8efd-131">For more details about how to get a site using the `GetSitePropertiesByUrl` method and then restrict the site from being moved by setting the `RestrictedToRegion` property, see the [MultiGeo.RestrictSiteToGeoLocation](https://github.com/SharePoint/PnP/tree/dev/Samples/MultiGeo.RestrictSiteToGeoLocation) sample.</span></span> 

## <a name="are-site-urls-a-good-way-to-identify-sites"></a><span data-ttu-id="f8efd-132">— URL-адреса сайтов хороший способ определить сайты?</span><span class="sxs-lookup"><span data-stu-id="f8efd-132">Are site URLs a good way to identify sites?</span></span>
<span data-ttu-id="f8efd-133">В географически нескольких клиентов сайтов можно перемещать между различными расположениями географически которых при значении, который URL-адрес этого сайта будет изменяться, поэтому хранение URL-адрес сайта, как уникальный ключ для идентификации сайта не рекомендуется.</span><span class="sxs-lookup"><span data-stu-id="f8efd-133">In a Multi-Geo tenant sites can be moved between the geo locations which implies that that the URL of that site will change, so storing the site URL as unique key to identify a site is not recommended.</span></span> <span data-ttu-id="f8efd-134">Рекомендуется сохранять идентификатор сайта, который будет не изменяются, независимо от того, в какой географического расположения размещается сайт.</span><span class="sxs-lookup"><span data-stu-id="f8efd-134">It's better to store the site ID as that will stay the same, regardless in which geo location the site is hosted.</span></span> 


## <a name="see-also"></a><span data-ttu-id="f8efd-135">См. также</span><span class="sxs-lookup"><span data-stu-id="f8efd-135">See also</span></span>
- [<span data-ttu-id="f8efd-136">Управление Apps надстройки в географически нескольких клиентов</span><span class="sxs-lookup"><span data-stu-id="f8efd-136">Managing Apps/Add-ins in a Multi-Geo tenant</span></span>](multigeo-apps.md)


---
title: "Обновление компонентов сайта с надстройкой в SharePoint"
description: "Обновление страниц, списков, типов контента и других компонентов сайта в надстройке SharePoint."
ms.date: 11/02/2017
ms.prod: sharepoint
ms.openlocfilehash: 6ca3450e48d62d3327dfe6302fcf58e7d9cbf84c
ms.sourcegitcommit: 655e325aec73c8b7c6b5e3aaf71fbb4d2d223b5d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/03/2017
---
# <a name="update-add-in-web-components-in-sharepoint"></a><span data-ttu-id="1420b-103">Обновление компонентов сайта с надстройкой в SharePoint</span><span class="sxs-lookup"><span data-stu-id="1420b-103">Update add-in web components in SharePoint</span></span>

<span data-ttu-id="1420b-104">Требования для обновления компонентов сайта надстройки:</span><span class="sxs-lookup"><span data-stu-id="1420b-104">Prerequisites for updating the add-in web components</span></span>

- <span data-ttu-id="1420b-105">Изучите статью [Обновление надстроек SharePoint](update-sharepoint-add-ins.md) и ознакомьтесь со списком необходимых компонентов и основными понятиями, описанными в этой статье.</span><span class="sxs-lookup"><span data-stu-id="1420b-105">Be familiar with  [Update SharePoint Add-ins](update-sharepoint-add-ins.md) and the prerequisites and core concepts included in it.</span></span>

- <span data-ttu-id="1420b-106">Предполагается, что вы разработали и протестировали последнюю версию надстройки, как это описано в разделе [Создайте и отладьте новую версию, как будто это новая надстройка](update-sharepoint-add-ins.md#DebugFirst).</span><span class="sxs-lookup"><span data-stu-id="1420b-106">This topic assumes that you have developed and tested the latest version of the add-in as described in the  [Create and debug the new version as if it were a brand new add-in](update-sharepoint-add-ins.md#DebugFirst).</span></span>

<span data-ttu-id="1420b-107"><a name="UpdatingAppWeb"> </a></span><span class="sxs-lookup"><span data-stu-id="1420b-107"></span></span>
## <a name="update-sharepoint-components-in-the-add-in-web"></a><span data-ttu-id="1420b-108">Обновление компонентов SharePoint на сайте надстройки</span><span class="sxs-lookup"><span data-stu-id="1420b-108">Update SharePoint components in the add-in web</span></span>

<span data-ttu-id="1420b-109">Все элементы SharePoint, развернутые на сайте надстройки, содержатся в **веб**-компонентах в пакете надстройки.</span><span class="sxs-lookup"><span data-stu-id="1420b-109">All of the SharePoint components that are deployed to the add-in web are contained in **Web**-scoped Features in the add-in package.</span></span> <span data-ttu-id="1420b-110">Поэтому для обновления этих элементов необходимо обновить один или несколько компонентов.</span><span class="sxs-lookup"><span data-stu-id="1420b-110">For that reason, updating these components is a matter of updating one or more of the Features.</span></span> <span data-ttu-id="1420b-111">Этот процесс не изменился со времени выпуска SharePoint 2010 и описан в статье [Добавление элементов к существующему компоненту](http://msdn.microsoft.com/library/b007f419-e0d6-4e3a-a3ae-b8e448656d02%28Office.15%29.aspx) в пакете SDK для SharePoint 2010.</span><span class="sxs-lookup"><span data-stu-id="1420b-111">This process has not changed since SharePoint 2010 and is documented in [Add Elements to an Existing Feature](http://msdn.microsoft.com/library/b007f419-e0d6-4e3a-a3ae-b8e448656d02%28Office.15%29.aspx) in the SharePoint 2010 SDK.</span></span> 

<span data-ttu-id="1420b-112">Также могут пригодиться и другие статьи, указанные в узле [Обновление компонентов](http://msdn.microsoft.com/library/e917f709-6491-4d50-adbe-2ab8f35da990%28Office.15%29.aspx), но учтите, что надстройки не должны включать пользовательский код на сервере SharePoint, поэтому некоторые аспекты обновления компонентов в SharePoint 2010 не относятся к обновлению надстроек. Например, вам не удастся использовать элемент [CustomUpgradeAction](http://msdn.microsoft.com/library/16a2182e-80aa-4184-8071-8f717ee5c572%28Office.15%29.aspx) при обновлении компонента надстройки SharePoint.</span><span class="sxs-lookup"><span data-stu-id="1420b-112">All of the SharePoint components that are deployed to the add-in web are contained in  Web-scoped Features in the add-in package. For that reason, updating these components is a matter of updating one or more of the Features. This process has not changed since SharePoint 2010 and is documented in  How to: Add Elements to an Existing Feature in the SharePoint 2010 SDK. Other articles in the [Upgrading Features](http://msdn.microsoft.com/library/e917f709-6491-4d50-adbe-2ab8f35da990%28Office.15%29.aspx) node may be helpful also, but consider that add-ins must not include custom code on the SharePoint server, so some aspects of Feature upgrading in SharePoint 2010 are not relevant to updating add-ins. For example, you can't use the [CustomUpgradeAction](http://msdn.microsoft.com/library/16a2182e-80aa-4184-8071-8f717ee5c572%28Office.15%29.aspx) element when you upgrade the Feature of a SharePoint Add-in.</span></span>

### <a name="what-can-and-cannot-be-done-declaratively"></a><span data-ttu-id="1420b-113">Действия, которые можно и которые нельзя выполнить декларативно</span><span class="sxs-lookup"><span data-stu-id="1420b-113">What can and cannot be done declaratively</span></span>

<span data-ttu-id="1420b-114">Чтобы обновить надстройку, размещенную в SharePoint, можно использовать только разметку XML. При этом возможности декларативного изменения надстройки будут ограничены.</span><span class="sxs-lookup"><span data-stu-id="1420b-114">With a SharePoint-hosted add-in, you can only use XML markup to update an add-in and there are some limits on how you can declaratively change an add-in in an update. In a provider-hosted add-in, you can implement a  UpdatedEventEndpoint handler to do things that can't be done declaratively.</span></span> <span data-ttu-id="1420b-115">Для надстройки с размещением у поставщика можно реализовать [обработчик UpdatedEventEndpoint](create-a-handler-for-the-update-event-in-sharepoint-add-ins.md), чтобы выполнить действия, которые нельзя сделать декларативно.</span><span class="sxs-lookup"><span data-stu-id="1420b-115">In a provider-hosted add-in, you can implement an [UpdatedEventEndpoint handler](create-a-handler-for-the-update-event-in-sharepoint-add-ins.md) to do things that can't be done declaratively.</span></span>

<span data-ttu-id="1420b-116">Вы можете с легкостью добавлять компоненты в надстройку.</span><span class="sxs-lookup"><span data-stu-id="1420b-116">Adding components to an add-in is easy.</span></span> <span data-ttu-id="1420b-117">Любой компонент, который можно включить в надстройку, можно также добавить в обновление. (Дополнительные сведения см. в разделе [Типы компонентов SharePoint, встречающиеся в надстройке SharePoint](host-webs-add-in-webs-and-sharepoint-components-in-sharepoint.md#TypesOfSPComponentsInApps).)</span><span class="sxs-lookup"><span data-stu-id="1420b-117">Adding components to an add-in is easy. Any component that is eligible to be included in an add-in can also be added in an update. (For details about what components can be in an add-in, see  [Types of SharePoint components that can be in a SharePoint Add-in](host-webs-add-in-webs-and-sharepoint-components-in-sharepoint.md#TypesOfSPComponentsInApps). ) But when you want to modify an existing component declaratively, consider the following points.</span></span> <span data-ttu-id="1420b-118">Но если вы хотите изменить существующий компонент декларативно, учтите вот какие сведения.</span><span class="sxs-lookup"><span data-stu-id="1420b-118">But when you want to modify an existing component declaratively, consider the following points.</span></span> 

- <span data-ttu-id="1420b-119">Тип данных поля (столбца) списка или типа контента в любом случае нельзя изменить после первоначального развертывания.</span><span class="sxs-lookup"><span data-stu-id="1420b-119">The data type of a list or content type field (column) cannot be changed after its initial deployment in any circumstance.</span></span> <span data-ttu-id="1420b-120">В частности, не меняйте тип данных поля при обновлении надстройки (*даже программно*).</span><span class="sxs-lookup"><span data-stu-id="1420b-120">In particular, do not change the data type of a field as part of an add-in update (*not even programmatically*).</span></span> <span data-ttu-id="1420b-121">В качестве альтернативного решения вы можете добавить новое поле.</span><span class="sxs-lookup"><span data-stu-id="1420b-121">As an alternative, you can add a new field.</span></span> <span data-ttu-id="1420b-122">Если надстройка содержит пользовательские формы для создания, редактирования или просмотра элементов, обязательно внесите в них соответствующие изменения.</span><span class="sxs-lookup"><span data-stu-id="1420b-122">If the add-in includes custom item create, edit, or view forms, be sure to make corresponding changes in these forms.</span></span> <span data-ttu-id="1420b-123">Например, добавьте элемент пользовательского интерфейса для нового поля и удалите его для старого.</span><span class="sxs-lookup"><span data-stu-id="1420b-123">For example, add UI for the new field and remove UI for the old one.</span></span> <span data-ttu-id="1420b-124">(В надстройке с размещением у поставщика можно программно переместить данные из старого поля в новое, а затем удалить старое.)</span><span class="sxs-lookup"><span data-stu-id="1420b-124">(In a provider-hosted add-in, you can programmatically move data from the old field to the new one and then delete the old.)</span></span>

- <span data-ttu-id="1420b-125">Вам не удастся удалить списки, экземпляры списков, типы контента или поля в разметке обновления.</span><span class="sxs-lookup"><span data-stu-id="1420b-125">Lists, list instances, content types, or fields cannot be deleted in the update markup.</span></span>

- <span data-ttu-id="1420b-p105">Вам не удастся удалить файлы с сайта надстройки в разметке обновления. Тем не менее вы можете изменить содержимое любого файла.</span><span class="sxs-lookup"><span data-stu-id="1420b-p105">Files cannot be deleted from the add-in web in update markup. However, you can change the contents of any file.</span></span>

- <span data-ttu-id="1420b-128">Элементы **CustomUpgradeAction** и **MapFile** невозможно использовать при обновлении надстройки SharePoint, хотя они могут быть доступными в IntelliSense для Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="1420b-128">The **CustomUpgradeAction** and **MapFile** elements cannot be used when updating a SharePoint Add-in, although they may appear available in Visual Studio intellisense.</span></span>

### <a name="update-the-add-in-web-for-the-first-time"></a><span data-ttu-id="1420b-129">Первое обновление сайта надстройки</span><span class="sxs-lookup"><span data-stu-id="1420b-129">Update the add-in web for the first time</span></span>

<span data-ttu-id="1420b-p106">В этом разделе описано, как добавлять или обновлять типы контента, списки, файлы и другие компоненты SharePoint на сайте надстройки. Чтобы было проще, предполагается, что все компоненты входят в один компонент на сайте надстройки. Но этот сайт может иметь несколько таких компонентов, и за один раз можно обновить несколько таких компонентов.</span><span class="sxs-lookup"><span data-stu-id="1420b-p106">The procedures in this section explain how to add or update content types, lists, files, and other SharePoint components in the add-in web. For simplicity, we assume that all the components are part of a single Feature in the add-in web, but add-in webs can have multiple Features and you can update more than one in the same update.</span></span>

<span data-ttu-id="1420b-132">Инструменты разработчика Microsoft Office для Visual Studio ориентированы на создание надстроек, поэтому стандартное поведение этих средств не всегда оптимально при обновлении надстройки.</span><span class="sxs-lookup"><span data-stu-id="1420b-132">The Microsoft Office Developer Tools for Visual Studio are oriented to creating new add-ins and the default behavior of the tools is sometimes not optimal when you are updating an add-in. To get more control over the process, you should begin by disabling the Feature Designer using the following procedure, so that you can directly edit the raw feature XML.</span></span> <span data-ttu-id="1420b-133">Для большего контроля над процессом сначала отключите конструктор компонентов, выполнив описанные ниже действия, чтобы непосредственно изменять неотформатированный XML компонента.</span><span class="sxs-lookup"><span data-stu-id="1420b-133">The vstolong are oriented to creating new apps and the default behavior of the tools is sometimes not optimal when you are updating an app. To get more control over the  process, you should begin by disabling the Feature Designer using the following procedure, so that you can directly edit the raw feature XML.</span></span> 

#### <a name="to-edit-the-feature-xml"></a><span data-ttu-id="1420b-134">Изменение XML компонента</span><span class="sxs-lookup"><span data-stu-id="1420b-134">To edit the Feature XML</span></span>

1. <span data-ttu-id="1420b-135">В **обозревателе решений** откройте файл _{ИмяКомпонента}_.features.</span><span class="sxs-lookup"><span data-stu-id="1420b-135">In  **Solution Explorer**, open the  _{FeatureName}_.features file. It opens in the Feature designer.</span></span> <span data-ttu-id="1420b-136">Он откроется в конструкторе компонентов.</span><span class="sxs-lookup"><span data-stu-id="1420b-136">In  Solution Explorer, open the  {FeatureName}.features file. It opens in the Feature designer.</span></span>

2. <span data-ttu-id="1420b-137">Откройте вкладку **Манифест** и разверните пункт **Параметры правки**.</span><span class="sxs-lookup"><span data-stu-id="1420b-137">Open the **Manifest** tab and expand **Edit Options**.</span></span>

3. <span data-ttu-id="1420b-138">Выберите **Перезаписать созданный XML и редактировать манифест в редакторе XML**.</span><span class="sxs-lookup"><span data-stu-id="1420b-138">Choose **Overwrite generated XML and edit manifest in the XML editor**.</span></span>

4. <span data-ttu-id="1420b-139">Когда отобразится соответствующий запрос, нажмите кнопку **Да**, чтобы отключить конструктор.</span><span class="sxs-lookup"><span data-stu-id="1420b-139">Choose  **Yes** to the prompt to disable the designer.</span></span>

5. <span data-ttu-id="1420b-140">В открывшемся представлении выберите пункт **Редактирование манифеста в XML-редакторе**.</span><span class="sxs-lookup"><span data-stu-id="1420b-140">On the view that opens, choose  **Edit manifest in the XML editor**. The  {FeatureName}.Template.xml file opens.</span></span> <span data-ttu-id="1420b-141">Откроется файл _{ИмяКомпонента}_.Template.xml.</span><span class="sxs-lookup"><span data-stu-id="1420b-141">The _{FeatureName}_.Template.xml file opens.</span></span> 

<span data-ttu-id="1420b-142">*Рис. 1. Открытие XML-редактора компонентов*</span><span class="sxs-lookup"><span data-stu-id="1420b-142">*Opening the Feature XML editor*</span></span>

![Этапы открытия XML-редактора компонентов](../images/UpdateAppOpenFeatureXML.png)

> [!CAUTION]
> <span data-ttu-id="1420b-144">Не добавляйте комментарии `"<!-- -->"` в файл _{ИмяКомпонента}_.features.</span><span class="sxs-lookup"><span data-stu-id="1420b-144">Do not add `"<!-- -->"` comments to the _{FeatureName}_.features file.</span></span> <span data-ttu-id="1420b-145">Комментарии не поддерживаются инфраструктурой обновления, и вам не удастся выполнить обновление, если в файле есть комментарии.</span><span class="sxs-lookup"><span data-stu-id="1420b-145">Comments are not supported by the upgrade infrastructure, and the upgrade fails if comments are in the file.</span></span> <span data-ttu-id="1420b-146">Комментарии используются в примерах разметки в этой статье, только чтобы показать вам, куда следует поместить разметку.</span><span class="sxs-lookup"><span data-stu-id="1420b-146">They are used in the markup examples of this article only to indicate to you where your markup should go.</span></span>

#### <a name="to-update-the-add-in-web-feature-the-first-time"></a><span data-ttu-id="1420b-147">Первое обновление компонента сайта надстройки</span><span class="sxs-lookup"><span data-stu-id="1420b-147">To update the add-in web Feature the first time</span></span>

1. <span data-ttu-id="1420b-148">Увеличьте на единицу значение атрибута **Version** (Версия) для элемента [Feature](http://msdn.microsoft.com/library/265cd648-1a7e-410f-a1d7-0da8c64b4006%28Office.15%29.aspx) (Компонент), если пакет "Инструменты разработчика Office для Visual Studio" еще не сделал это при увеличении номера версии в манифесте надстройки. (Данный пакет делает это не в каждом сценарии, поэтому необходимо выполнять соответствующую проверку.)</span><span class="sxs-lookup"><span data-stu-id="1420b-148">Increment the **Version** attribute of the [Feature](http://msdn.microsoft.com/library/265cd648-1a7e-410f-a1d7-0da8c64b4006%28Office.15%29.aspx) element, if the Office Developer Tools for Visual Studio did not already do so when you incremented the version number in the add-in manifest (the tools don't do this in every scenario, so you need to verify).</span></span> 

   <span data-ttu-id="1420b-149">Следует использовать тот же номер версии, что и для надстройки.</span><span class="sxs-lookup"><span data-stu-id="1420b-149">You should use the same version number that you use for the add-in.</span></span> <span data-ttu-id="1420b-150">Вам даже следует рассмотреть вопрос об увеличении версии компонента при обновлении других компонентов надстройки, но не самого компонента сайта надстройки.</span><span class="sxs-lookup"><span data-stu-id="1420b-150">You should even consider raising the Feature version when other components of the add-in are being updated, but not the add-in web Feature itself.</span></span> <span data-ttu-id="1420b-151">Логикой элемента [VersionRange](http://msdn.microsoft.com/library/cd715e38-6ec3-43b2-8007-6d0ed8865d91%28Office.15%29.aspx) (который рассматривается в разделе [Последующие обновления сайта надстройки](#SubsequentUpgrades)) легче управлять, если версии надстройки и компонента всегда одинаковы.</span><span class="sxs-lookup"><span data-stu-id="1420b-151">The logic of the [VersionRange](http://msdn.microsoft.com/library/cd715e38-6ec3-43b2-8007-6d0ed8865d91%28Office.15%29.aspx) element (which is discussed in the section [Subsequent updates of the add-in web](#SubsequentUpgrades)) is easier to manage when the add-in version and the Feature version are always the same.</span></span> 

2. <span data-ttu-id="1420b-152">Никогда и ничего не удаляйте в разделе [ElementManifests](http://msdn.microsoft.com/library/d8d4db7e-2bc2-40c6-958b-d5683bdee87a%28Office.15%29.aspx)</span><span class="sxs-lookup"><span data-stu-id="1420b-152">Don't delete anything in the  [ElementManifests](http://msdn.microsoft.com/library/d8d4db7e-2bc2-40c6-958b-d5683bdee87a%28Office.15%29.aspx) section of the file. Nothing is ever deleted from this section.</span></span> <span data-ttu-id="1420b-153">файла.</span><span class="sxs-lookup"><span data-stu-id="1420b-153">Nothing is ever deleted from this section.</span></span>

3. <span data-ttu-id="1420b-154">Добавьте вот какие элементы в файл (если они еще не добавлены):</span><span class="sxs-lookup"><span data-stu-id="1420b-154">If they are not already present, add the following elements to the file:</span></span> 
    
   - <span data-ttu-id="1420b-155">Дочерний элемент [UpgradeActions](http://msdn.microsoft.com/library/5af24ac1-a290-454d-b32b-bc7f7a4634f0%28Office.15%29.aspx) в элемент **Feature**.</span><span class="sxs-lookup"><span data-stu-id="1420b-155">An  [ApplyElementManifests](http://msdn.microsoft.com/library/5af24ac1-a290-454d-b32b-bc7f7a4634f0%28Office.15%29.aspx) child element in the **VersionRange** element.</span></span> <span data-ttu-id="1420b-156">*Не* добавляйте в элемент атрибуты **ReceiverAssembly** или **ReceiverClass**.</span><span class="sxs-lookup"><span data-stu-id="1420b-156">Do *not* add **ReceiverAssembly** or **ReceiverClass** attributes to the element.</span></span> <span data-ttu-id="1420b-157">Они не используются при обновлении надстройки SharePoint.</span><span class="sxs-lookup"><span data-stu-id="1420b-157">These have no use when you are updating a SharePoint Add-in.</span></span> <span data-ttu-id="1420b-158">(Эти атрибуты ссылаются на пользовательскую сборку, которая не поддерживается в надстройках SharePoint. Если вы включите пользовательскую сборку в надстройку, она не будет установлена в SharePoint.)</span><span class="sxs-lookup"><span data-stu-id="1420b-158">An  UpgradeActions child element in the Feature element. Do not  add ReceiverAssembly or ReceiverClass attributes to the element. These have no use when you are updating a SharePoint Add-in. (These attributes refer to a custom assembly, which is not supported in SharePoint Add-ins. If you include a custom assembly in an add-in, SharePoint will not install the add-in.)</span></span>

   - <span data-ttu-id="1420b-p114">Дочерний элемент **VersionRange** в элемент **UpgradedActions**. Не добавляйте атрибуты **BeginVersion** или **EndVersion** в элемент. Это бесполезно, когда надстройка обновляется впервые. Их использование обсуждается в разделе [Последующие обновления сайта надстройки](#SubsequentUpgrades).</span><span class="sxs-lookup"><span data-stu-id="1420b-p114">A **VersionRange** child element in the **UpgradedActions** element. Do not add **BeginVersion** or **EndVersion** attributes to the element. These serve no purpose when an add-in is being updated for the first time. Their use is discussed in the section [Subsequent updates of the add-in web](#SubsequentUpgrades).</span></span>

   - <span data-ttu-id="1420b-163">Дочерний элемент [ApplyElementManifests](http://msdn.microsoft.com/library/c087a0c3-1e27-4034-b4da-e025991454d6%28Office.15%29.aspx) в элемент **VersionRange**.</span><span class="sxs-lookup"><span data-stu-id="1420b-163">An  [ApplyElementManifests](http://msdn.microsoft.com/library/c087a0c3-1e27-4034-b4da-e025991454d6%28Office.15%29.aspx) child element in the **VersionRange** element.</span></span>

<span data-ttu-id="1420b-164">Сейчас файл должен выглядеть приблизительно так:</span><span class="sxs-lookup"><span data-stu-id="1420b-164">At this point the file should resemble the following example.</span></span>
    
> [!IMPORTANT]
> <span data-ttu-id="1420b-165">Возможно, в качестве примера пакет "Инструменты разработчика Office для Visual Studio" уже добавил указанную выше разметку и скопировал некоторые элементы из раздела **ElementManifests** в раздел **ApplyElementManifests**.</span><span class="sxs-lookup"><span data-stu-id="1420b-165">The Office Developer Tools for Visual Studio may have already added the above markup and copied some elements from the **ElementManifests** section to the **ApplyElementManifests** section as an illustration.</span></span> <span data-ttu-id="1420b-166">*Удалите их.*</span><span class="sxs-lookup"><span data-stu-id="1420b-166">*Delete these.*</span></span> <span data-ttu-id="1420b-167">Не исключено, что вам придется в дальнейшем возвращать некоторые из них обратно. Но намного легче и безопаснее начать работу с пустого раздела **ApplyElementManifests**.</span><span class="sxs-lookup"><span data-stu-id="1420b-167">Although you may end up putting some of them back in later steps, it is easier and safer to start with an empty **ApplyElementManifests** section.</span></span> <span data-ttu-id="1420b-168">Лишние записи для компонентов, которые не изменялись, могут иметь плохие последствия. Например, длительность процесса обновления может увеличиться настолько, что будет превышено время ожидания и обновление завершится ошибкой.</span><span class="sxs-lookup"><span data-stu-id="1420b-168">Redundant entries for components that have not changed can have bad consequences, including possibly lengthening the update process enough that it times-out and fails.</span></span>

```XML
 <Feature <!-- Some attributes omitted --> 
                Version="2.0.0.0">
   <ElementManifests>
     <!-- ElementManifest elements omitted -->
   </ElementManifests>
   <UpgradeActions>
    <VersionRange>
      <ApplyElementManifests>

      </ApplyElementManifests>
    </VersionRange>
   </UpgradeActions>
 </Feature>
```

#### <a name="to-add-components-to-the-add-in"></a><span data-ttu-id="1420b-169">Добавление элементов в надстройку</span><span class="sxs-lookup"><span data-stu-id="1420b-169">To add components to the add-in</span></span>

1. <span data-ttu-id="1420b-170">Добавьте все новые элементы в компонент точно так же, как при создании проекта надстройки SharePoint.</span><span class="sxs-lookup"><span data-stu-id="1420b-170">Add any new components to the Feature exactly as you would if you were creating a new SharePoint Add-in project.</span></span>

2. <span data-ttu-id="1420b-171">Когда вы добавляете компонент типа, который отсутствовал в предыдущей версии надстройки (например, добавляете в надстройку список, которого раньше не было), пакет "Инструменты разработчика Office для Visual Studio" добавляет файл elements.xml в проект.</span><span class="sxs-lookup"><span data-stu-id="1420b-171">When you add a component of a type that wasn't in the previous verison of the add-in, such as adding a list to an add-in that did not previously have a list, the Office Developer Tools for Visual Studio adds an elements.xml file to the project.</span></span> <span data-ttu-id="1420b-172">Это манифест элементов для компонента.</span><span class="sxs-lookup"><span data-stu-id="1420b-172">This is the elements manifest for the component.</span></span> <span data-ttu-id="1420b-173">К этому файлу следует добавить номер новой версии надстройки (например, elements.2.0.0.0.xml).</span><span class="sxs-lookup"><span data-stu-id="1420b-173">You should add the new version number of the add-in to this file (for example, elements.2.0.0.0.xml).</span></span> <span data-ttu-id="1420b-174">Это может пригодиться при устранении неполадок.</span><span class="sxs-lookup"><span data-stu-id="1420b-174">This can be helpful in troubleshooting.</span></span> <span data-ttu-id="1420b-175">Обязательно внесите изменения в **обозревателе решений**, чтобы соответствующим образом изменить ссылки на файл (например, в CSPROJ-файле и XML компонента).</span><span class="sxs-lookup"><span data-stu-id="1420b-175">Be sure to make the change in **Solution Explorer** to ensure that references to the file, such as in the csproj file and the feature XML, are changed accordingly.</span></span>

3. <span data-ttu-id="1420b-176">Для каждого нового манифеста элементов добавьте дочерний элемент [ElementManifest](http://msdn.microsoft.com/library/5a6a2865-5d31-45a2-a402-6da6e0f5567a%28Office.15%29.aspx) в элементы **ElementManifests** и **ApplyElementManifests** в XML компонента (тот же элемент **ElementManifest** в обоих случаях).</span><span class="sxs-lookup"><span data-stu-id="1420b-176">For each new element manifest, add an [ElementManifest](http://msdn.microsoft.com/library/5a6a2865-5d31-45a2-a402-6da6e0f5567a%28Office.15%29.aspx) element as a child to both the **ElementManifests** and the **ApplyElementManifests** elements of the feature xml (the exact same **ElementManifest** element in both places).</span></span> <span data-ttu-id="1420b-177">Атрибут **Location** элемента должен указывать на относительный путь к файлу elements.2.0.0.0.xml.</span><span class="sxs-lookup"><span data-stu-id="1420b-177">The **Location** attribute of the element should point to the relative path of the elements.2.0.0.0.xml file.</span></span> <span data-ttu-id="1420b-178">Например, если вы добавили список с именем MyCustomList, элемент **ElementManifest** будет выглядеть вот так:</span><span class="sxs-lookup"><span data-stu-id="1420b-178">For example, if you added a list named MyCustomList, the **ElementManifest** element would look like the following:</span></span>
    
    ```XML
      <ElementManifest Location="MyCustomList\elements.2.0.0.0.xml" />
    ```

4. <span data-ttu-id="1420b-179">Некоторые виды компонентов добавляют файлы к проекту.</span><span class="sxs-lookup"><span data-stu-id="1420b-179">Some kinds of components add files to the project.</span></span> <span data-ttu-id="1420b-180">Например, при добавлении списка создается файл schema.xml. Когда вы добавляете страницу, создается файл подкачки.</span><span class="sxs-lookup"><span data-stu-id="1420b-180">For example, a schema.xml file is created when you add a list; when you add a page, a page file is created.</span></span> <span data-ttu-id="1420b-181">Добавьте дочерний элемент [ElementFile](http://msdn.microsoft.com/library/bd43638e-8f18-4a0d-b122-1c055f97aa71%28Office.15%29.aspx) в элемент **ElementManifests** для каждого такого файла (не добавляйте его в элемент **ApplyElementManifests**).</span><span class="sxs-lookup"><span data-stu-id="1420b-181">For each such file, add an [ElementFile](http://msdn.microsoft.com/library/bd43638e-8f18-4a0d-b122-1c055f97aa71%28Office.15%29.aspx) element as a child to the **ElementManifests** element (do not add it to the **ApplyElementManifests** element).</span></span> <span data-ttu-id="1420b-182">Атрибут **Location** должен указывать на относительный путь к файлу.</span><span class="sxs-lookup"><span data-stu-id="1420b-182">The **Location** attribute should point to the relative path of the file.</span></span> <span data-ttu-id="1420b-183">Например, если вы добавили список, элемент **ElementFile** файла schema.xml будет выглядеть вот так:</span><span class="sxs-lookup"><span data-stu-id="1420b-183">For example, if you added a list, the **ElementFile** element for the schema.xml would look like the following:</span></span>
    
    ```XML
      <ElementFile Location="MyCustomList\Schema.xml" />
    ```

5. <span data-ttu-id="1420b-184">Если добавить другой элемент типа, который уже использовался в предыдущей версии надстройки, пакет "Инструменты разработчика Office для Visual Studio" может добавить ссылку на новый элемент в существующий манифест элементов, а не создавать новый.</span><span class="sxs-lookup"><span data-stu-id="1420b-184">When you add another item of a type that was already in the previous version of the add-in, the Office Developer Tools for Visual Studio may add a reference to the new item to an existing elements manifest instead of creating a new one.</span></span> <span data-ttu-id="1420b-185">Например, чтобы добавить страницу на сайт надстройки, обычно нужно щелкнуть правой кнопкой мыши узел **Страницы** в **обозревателе решений**, а затем последовательно выбрать пункты **Добавить** > **Новый элемент** > **Страница** > **Добавить**.</span><span class="sxs-lookup"><span data-stu-id="1420b-185">For example, the standard way to add a page to an add-in web is to right-click the **Pages** node in **Solution Explorer** and then go to **Add** > **New Item** > **Page** > **Add**.</span></span> <span data-ttu-id="1420b-186">Вместо того чтобы создавать новый манифест элементов, пакет "Инструменты разработчика Office для Visual Studio" добавит новый элемент **File** (Файл) в модуль **Pages** (Страницы) в существующий файл манифеста элементов (обычно он называется elements.xml).</span><span class="sxs-lookup"><span data-stu-id="1420b-186">The Office Developer Tools for Visual Studio will add a new **File** element to the **Pages** module in the existing elements manifest file (usually called elements.xml) rather than create a new element manifest.</span></span>
    
    <span data-ttu-id="1420b-p120">Это нежелательное действие. По возможности не изменяйте существующие файлы манифеста элементов для предыдущих версий надстройки при ее обновлении. Как правило, новые элементы должны находиться в новых файлах манифеста элементов (на которые ссылается элемент **ApplyElementManifests** XML компонента). (Есть несколько исключений, они описаны ниже.) Например, чтобы добавить новую страницу, выполните следующие действия:</span><span class="sxs-lookup"><span data-stu-id="1420b-p120">This is not desirable. The best practice is to avoid, when possible, editing any existing element manifest files when updating an add-in (that is, any element manifests from previous versions of the add-in). In general, new items should be in new element manifest files (which are themselves referenced in the **ApplyElementManifests** element of the Feature XML). (A few of exceptions to this practice are described later.) For example, to add a new page, take these steps:</span></span>
    
   1. <span data-ttu-id="1420b-191">Создайте модуль с именем **Pages.2.0.0.0**.</span><span class="sxs-lookup"><span data-stu-id="1420b-191">Create a new module named Pages.2.0.0.0</span></span>

   2. <span data-ttu-id="1420b-192">Удалите из него файл sample.txt, который Инструменты разработчика Office для Visual Studio добавили автоматически.</span><span class="sxs-lookup"><span data-stu-id="1420b-192">Remove the sample.txt file from it that theOffice Developer Tools for Visual Studio add automatically.</span></span>

   3. <span data-ttu-id="1420b-193">Переименуйте манифесты элементов в новом модуле на **elements.2.0.0.0.xml**.</span><span class="sxs-lookup"><span data-stu-id="1420b-193">Rename the elements manifest in the new module to elements.2.0.0.0.xml.</span></span>

   4. <span data-ttu-id="1420b-194">Щелкните правой кнопкой мыши модуль **Pages.2.0.0.0** и последовательно выберите пункты **Добавить** > **Новый элемент** > **Страница** > **Добавить**.</span><span class="sxs-lookup"><span data-stu-id="1420b-194">Right-click the **Pages.2.0.0.0** module and then go to **Add** > **New Item** > **Page** > **Add**.</span></span> <span data-ttu-id="1420b-195">Будет создана страница, на которую будет ссылаться манифест элементов для модуля **Pages.2.0.0.0**, а не **Pages**.</span><span class="sxs-lookup"><span data-stu-id="1420b-195">Right-click the Pages.2.0.0.0 module and then navigate through Add | New Item | Page | Add. The new page is created and it is referenced in the elements manifest for **Pages.2.0.0.0** instead of **Pages**.</span></span>

   5. <span data-ttu-id="1420b-196">Убедитесь, что элемент **ElementManifests** XML компонента имеет элемент **ElementsFile** для новой страницы, а также что существует элемент **ElementManifest** для файла elements.2.0.0.0.xml в разделах **ElementManifests** и **ApplyElementManifests**.</span><span class="sxs-lookup"><span data-stu-id="1420b-196">Ensure that there is an **ElementsFile** element for the new page in the **ElementManifests** element of the feature XML, and ensure that there is an **ElementManifest** element for the elements.2.0.0.0.xml file in both the **ElementManifests** and **ApplyElementManifests** sections.</span></span>
    
      <span data-ttu-id="1420b-197">В любой ситуации, когда пакет "Инструменты разработчика Office для Visual Studio" изменил существующий манифест элементов, можно использовать еще один вариант: вручную создать файл elements.2.0.0.0.xml и переместить в него разметку, добавленную в старый манифест. (При желании вы можете поместить новый манифест в тот же узел в **обозревателе решений**, в котором находится старый манифест.)</span><span class="sxs-lookup"><span data-stu-id="1420b-197">Another option in any situation in which Office Developer Tools for Visual Studio has changed an existing elements manifest, is to manually create a new elements.2.0.0.0.xml and move the markup that was added to the old manifest to your new one. (You can put the new one in the same **Solution Explorer** node as the old one if you want.)</span></span>

6. <span data-ttu-id="1420b-198">Если вы добавляете поле в тип контента компонента, добавьте элемент [AddContentTypeField](http://msdn.microsoft.com/library/cb04a3ac-f41a-4ffe-aaa1-d4bf3fb6347d%28Office.15%29.aspx) в раздел **VersionRange**.</span><span class="sxs-lookup"><span data-stu-id="1420b-198">If you add a field to a content type in the Feature, add an [AddContentTypeField](http://msdn.microsoft.com/library/cb04a3ac-f41a-4ffe-aaa1-d4bf3fb6347d%28Office.15%29.aspx) element to the **VersionRange** section.</span></span> <span data-ttu-id="1420b-199">Убедитесь, что вы присвоили правильные значения атрибутам **ContentTypeId** и **FieldId**.</span><span class="sxs-lookup"><span data-stu-id="1420b-199">Be sure to assign the correct values to the **ContentTypeId** and **FieldId** attributes.</span></span> <span data-ttu-id="1420b-200">С помощью атрибута **PushDown** укажите, будет ли добавлено новое поле в какой-либо производный тип контента (необязательно).</span><span class="sxs-lookup"><span data-stu-id="1420b-200">Optionally, use the **PushDown** attribute to specify whether the new field should be added to any derived content types.</span></span> <span data-ttu-id="1420b-201">Ниже приведен пример.</span><span class="sxs-lookup"><span data-stu-id="1420b-201">The following is an example.</span></span>
    
    ```XML
     <VersionRange>
       <AddContentTypeField 
         ContentTypeId="0x0101000728167cd9c94899925ba69c4af6743e"
         FieldId="{CCDD361F-A3FB-40D8-A272-3A3C858F4116}"
         PushDown="TRUE" />
       <!-- Other child elements of VersionRange -->
     </VersionRange>
    ```

#### <a name="to-modify-existing-components-of-the-add-in"></a><span data-ttu-id="1420b-202">Изменение существующих компонентов надстройки</span><span class="sxs-lookup"><span data-stu-id="1420b-202">To modify existing components of the add-in</span></span>

<span data-ttu-id="1420b-203">Если вы изменили файл, на который имеется ссылка в файле манифеста элементов (например, файл Default.aspx), вам вообще не нужно изменять элемент **ElementFile** для файла.</span><span class="sxs-lookup"><span data-stu-id="1420b-203">If you have changed a file that is referenced in an elements manifest file, such as a Default.aspx file, you do not have to change the **ElementFile** element for the file at all.</span></span> <span data-ttu-id="1420b-204">Тем не менее необходимо сообщить инфраструктуре обновления, что старую версию файла следует заменить на новую.</span><span class="sxs-lookup"><span data-stu-id="1420b-204">But you do have to tell the update infrastructure to replace the old version of the file with the new one.</span></span> <span data-ttu-id="1420b-205">Это можно сделать, добавив элемент **ElementManifest** для модуля в раздел **ApplyElementManifests**.</span><span class="sxs-lookup"><span data-stu-id="1420b-205">You do this by adding an **ElementManifest** element for the module to the **ApplyElementManifests** section.</span></span> 

<span data-ttu-id="1420b-206">Так как в разделе **ElementManifests** уже есть такой элемент, иногда можно просто скопировать (а не переместить) его в **ApplyElementManifests**. Делайте это, только если изменены все файлы, на которые ссылается манифест.</span><span class="sxs-lookup"><span data-stu-id="1420b-206">Because there is already such an element in the **ElementManifests** section, simply copying (not moving) it to the **ApplyElementManifests** is sometimes an option, but this is only advisable if every file that is referenced in the manifest has been changed.</span></span> <span data-ttu-id="1420b-207">Обычно неизмененный файл не следует заменять его копией,</span><span class="sxs-lookup"><span data-stu-id="1420b-207">As a general practice, you shouldn't replace an unchanged file with a copy of itself.</span></span> <span data-ttu-id="1420b-208">так как в ряде сценариев это может иметь плохие последствия.</span><span class="sxs-lookup"><span data-stu-id="1420b-208">In some scenarios this can have bad effects.</span></span> <span data-ttu-id="1420b-209">Например, если страница настроена так, что пользователи могут изменять ее, то замена может привести к удалению внесенных изменений.</span><span class="sxs-lookup"><span data-stu-id="1420b-209">For example, if the page has been configured to allow users to customize it, replacing it can cause the customizations to be removed.</span></span> <span data-ttu-id="1420b-210">(Если вы изменили страницу, вам придется учитывать эти последствия, но не нужно без веской причины доставлять неудобства пользователям.)</span><span class="sxs-lookup"><span data-stu-id="1420b-210">(If you had changed the page, you'd have to accept this consequence, but you don't want to impose this inconvenience on your customers pointlessly.)</span></span>
    
1. <span data-ttu-id="1420b-211">Чтобы удостовериться, что заменены только измененные файлы модуля, создайте еще один манифест элементов для модуля, который будет ссылаться только на измененные файлы, и примените второй манифест в **ApplyElementManifests**. Для этого сделайте вот что:</span><span class="sxs-lookup"><span data-stu-id="1420b-211">To ensure that only the changed files in the module are replaced, create a second element manifest for the module that only references the changed files and apply the second manifest in the  **ApplyElementManifests** by following these steps.</span></span>
    
   1. <span data-ttu-id="1420b-212">Щелкните правой кнопкой мыши узел модуля в **обозревателе решений** и добавьте XML-файл (не страницу) с именем **elements.2.0.0.0.xml**.</span><span class="sxs-lookup"><span data-stu-id="1420b-212">Right-click the module's node in  Solution Explorer and add an XML file (not a page) named elements.2.0.0.0.xml.</span></span>

   2.  <span data-ttu-id="1420b-213">Выберите новый файл в области **Обозреватель решений**, чтобы его область свойств стала видимой, и измените свойство **Deployment Type** на **ElementManifest**.</span><span class="sxs-lookup"><span data-stu-id="1420b-213">Select the new file in **Solution Explorer** to make its property pane visible and change the **Deployment Type** property to **ElementManifest. This is important to ensure that the vstoshort handle the file properly.**</span></span> <span data-ttu-id="1420b-214">Обязательно сделайте это, чтобы удостовериться, что Инструменты разработчика Office для Visual Studio обрабатывают файл должным образом.</span><span class="sxs-lookup"><span data-stu-id="1420b-214">This is important to ensure that the Office Developer Tools for Visual Studio handles the file properly.</span></span>

   3. <span data-ttu-id="1420b-215">Скопируйте содержимое исходного манифеста в новый и удалите из нового манифеста все элементы меню [Файл](http://msdn.microsoft.com/library/c270e4ce-8110-4da7-b0e7-c223604bfce7%28Office.15%29.aspx), соответствующие **неизмененным** файлам.</span><span class="sxs-lookup"><span data-stu-id="1420b-215">Copy the contents of the original manifest to the new one, and then delete from the new manifest all the  [File](http://msdn.microsoft.com/library/c270e4ce-8110-4da7-b0e7-c223604bfce7%28Office.15%29.aspx) elements that correspond to files that have **not** changed.</span></span>

   4. <span data-ttu-id="1420b-216">Добавьте элемент **ElementManifest** в раздел **ApplyElementManifests**, который ссылается на новый файл манифеста, как в примере ниже.</span><span class="sxs-lookup"><span data-stu-id="1420b-216">Add an **ElementManifest** element to the **ApplyElementManifests** section that references the new manifest file such as in this example.</span></span>
    
       ```XML
             <ElementManifest Location="Pages\elements.2.0.0.0.xml" />
       ```

      > [!NOTE]
      > <span data-ttu-id="1420b-217">Не удаляйте исходный манифест.</span><span class="sxs-lookup"><span data-stu-id="1420b-217">Do not delete the original manifest.</span></span> <span data-ttu-id="1420b-218">В XML компонента используются как старый, так и новый манифесты.</span><span class="sxs-lookup"><span data-stu-id="1420b-218">Do not delete the original manifest. The Feature XML is using both of the old and new ones.</span></span> <span data-ttu-id="1420b-219">Не копируйте никаких элементов **ElementFile** из раздела **ElementManifests** в раздел **ApplyElementManifests**, даже если файл, на который имеются ссылки в **ElementFile**, был изменен.</span><span class="sxs-lookup"><span data-stu-id="1420b-219">Do not copy any **ElementFile** elements from the **ElementManifests** section to the **ApplyElementManifests** section even if the file that is referenced in the **ElementFile** has been changed.</span></span>
      
2. <span data-ttu-id="1420b-220">Откройте каждый файл манифеста элементов, на который указывают ссылки в разделе **ApplyElementManifests**, и удостоверьтесь, что у всех элементов [File](http://msdn.microsoft.com/library/c270e4ce-8110-4da7-b0e7-c223604bfce7%28Office.15%29.aspx) (Файл) есть атрибут **ReplaceContents** со значением **TRUE** (Истина).</span><span class="sxs-lookup"><span data-stu-id="1420b-220">Open every element manifest file that is referenced in the **ApplyElementManifests** section and ensure that any [File](http://msdn.microsoft.com/library/c270e4ce-8110-4da7-b0e7-c223604bfce7%28Office.15%29.aspx) elements have a **ReplaceContents** attribute that is set to **TRUE**.</span></span> 

   <span data-ttu-id="1420b-221">Ниже приведен пример.</span><span class="sxs-lookup"><span data-stu-id="1420b-221">The following is an example.</span></span> <span data-ttu-id="1420b-222">Возможно, это уже сделано с помощью пакета "Инструменты разработчика Office для Visual Studio", но вам следует убедиться в этом.</span><span class="sxs-lookup"><span data-stu-id="1420b-222">The Office Developer Tools for Visual Studio may have done this already, but you should verify it.</span></span> <span data-ttu-id="1420b-223">Проверьте даже манифесты элементов для предыдущих версий надстройки.</span><span class="sxs-lookup"><span data-stu-id="1420b-223">Do this even for the element manifests from previous versions of the add-in.</span></span> <span data-ttu-id="1420b-224">Это один из рекомендуемых способов изменить существующий файл манифеста элементов.</span><span class="sxs-lookup"><span data-stu-id="1420b-224">This is one of the few ways in which it is a good practice to edit an existing element manifest file.</span></span>
    
    ```XML
     <Module Name="Pages">
       <File Path="Pages\Default.aspx" Url="Pages/Default.aspx" ReplaceContent="TRUE" />
     </Module>
    ```

3. <span data-ttu-id="1420b-225">В страницы могут быть встроены веб-части, как описано в статье [Включение веб-части в веб-страницу сайта надстройки](include-a-web-part-in-a-webpage-on-the-add-in-web.md).</span><span class="sxs-lookup"><span data-stu-id="1420b-225">Pages can have Web Parts embedded in them as explained in [Include a Web Part in a webpage on the add-in web](include-a-web-part-in-a-webpage-on-the-add-in-web.md).</span></span> <span data-ttu-id="1420b-226">Если вы изменяете страницу со встроенной веб-частью (или изменяете свойства веб-части), потребуется выполнить дополнительное действие: добавить на страницу указанную ниже разметку, чтобы служба SharePoint не добавила вторую копию веб-части на страницу.</span><span class="sxs-lookup"><span data-stu-id="1420b-226">Pages can have Web Parts embedded in them as explained in  Include a Web Part in a webpage on the add-in web. If you change a page that has a Web Part on it (or change the properties of the Web Part), then there is an additional step: you have to add the following markup to the page to prevent the SharePoint from adding a second copy of the Web Part onto the page. The markup should be added to the  asp:Content element with the ID . (The Office Developer Tools for Visual Studio may have already added it when the page was first created, but you should verify that it is there.)</span></span> <span data-ttu-id="1420b-227">Разметку необходимо добавить к элементу **asp:Content** с идентификатором `PlaceHolderAdditionalPageHead`.</span><span class="sxs-lookup"><span data-stu-id="1420b-227">The markup should be added to the **asp:Content** element with the ID `PlaceHolderAdditionalPageHead`.</span></span> <span data-ttu-id="1420b-228">(Возможно, при создании страницы пакет "Инструменты разработчика Office для Visual Studio" уже добавил ее, но вам нужно убедиться в этом.)</span><span class="sxs-lookup"><span data-stu-id="1420b-228">(The Office Developer Tools for Visual Studio may have already added it when the page was first created, but you should verify that it is there.)</span></span>
    
    ```XML
      <meta name="WebPartPageExpansion" content="full" />
    ```

   > [!NOTE]
   > <span data-ttu-id="1420b-229">Если параметры страницы позволяли настраивать ее, то побочным эффектом разметки может стать возможность удаления таких настроек.</span><span class="sxs-lookup"><span data-stu-id="1420b-229">If the page was configured to allow users to customize it, then this markup has the side effect of removing those customizations. Users will have to repeat them.</span></span> <span data-ttu-id="1420b-230">Их придется выполнить заново.</span><span class="sxs-lookup"><span data-stu-id="1420b-230">Users have to repeat them.</span></span> <span data-ttu-id="1420b-231">Если веб-часть добавлена на страницу в соответствии с инструкциями, описанными в статье [Включение веб-части в веб-страницу сайта надстройки](include-a-web-part-in-a-webpage-on-the-add-in-web.md), то ее разметка находится в манифесте элементов. Поэтому изменение свойств веб-части — это исключение из общего правила, которое не разрешает изменять файл манифеста элементов при обновлении надстройки.</span><span class="sxs-lookup"><span data-stu-id="1420b-231">If the Web Part was added to the page following the guidance in [Include a Web Part in a webpage on the add-in web](include-a-web-part-in-a-webpage-on-the-add-in-web.md), then the Web Part markup is in the elements manifest, so changing the Web Part's properties is an exception to the general rule that you should not edit an element manifest file as part of an add-in update.</span></span> 

4. <span data-ttu-id="1420b-232">Вместо того чтобы изменять страницу, вы можете использовать перенаправление на новую страницу. Для этого сделайте вот что:</span><span class="sxs-lookup"><span data-stu-id="1420b-232">As an alternative to changing a page, you also have the option of using redirection to a new page using the following steps.</span></span> 
    
   1. <span data-ttu-id="1420b-233">Создайте страницу и настройте для нее разметку обновления, как описано выше в разделе **Добавление компонентов в надстройку**.</span><span class="sxs-lookup"><span data-stu-id="1420b-233">Create the new page and configure its update markup as described in the procedure **To add components to the add-in** above.</span></span>

   2. <span data-ttu-id="1420b-234">Откройте старую страницу и удалите всю разметку из элемента **asp:Content** с идентификатором `PlaceHolderAdditionalPageHead`.</span><span class="sxs-lookup"><span data-stu-id="1420b-234">Open the old page and remove all markup from the **asp:Content** element with the ID `PlaceHolderAdditionalPageHead`.</span></span> 

   3. <span data-ttu-id="1420b-235">Добавьте указанную ниже разметку в элемент **asp:Content** и замените путь _{RelativePathToNewPageFile}_ на новый путь и имя файла.</span><span class="sxs-lookup"><span data-stu-id="1420b-235">Add the following markup to the **asp:Content** element, and then replace _{RelativePathToNewPageFile}_ with the new path and file name.</span></span> <span data-ttu-id="1420b-236">Этот сценарий перенаправит браузер на новую страницу и укажет параметры запроса.</span><span class="sxs-lookup"><span data-stu-id="1420b-236">This script redirects the browser to the new page and includes the query parameters.</span></span> <span data-ttu-id="1420b-237">Кроме того, он исключит старую страницу из истории браузера.</span><span class="sxs-lookup"><span data-stu-id="1420b-237">It also keeps the old page out of the browser history.</span></span>
    
       ```
        <script type="text/javascript">
              var queryString = window.location.search.substring(1);
              window.location.replace("{RelativePathToNewPageFile}" + "?" + queryString);
        </script>
       ```

   4. <span data-ttu-id="1420b-238">Удалите все остальные элементы **asp:Content** на странице.</span><span class="sxs-lookup"><span data-stu-id="1420b-238">Delete any other **asp:Content** elements on the page.</span></span>
  
   5. <span data-ttu-id="1420b-239">Если вы заменяете начальную страницу надстройки, то измените элемент **StartPage** манифеста надстройки так, чтобы он указывал на новую страницу.</span><span class="sxs-lookup"><span data-stu-id="1420b-239">If the page you are replacing is the start page for the add-in, change the **StartPage** element in the add-in manifest to point to the new page.</span></span>

5. <span data-ttu-id="1420b-240">Если сайт надстройки содержит компонент **CustomAction** или **ClientWebPart**, и вы изменяете его при обновлении, тогда вам потребуется изменить манифест элементов, так как в нем определены эти компоненты.</span><span class="sxs-lookup"><span data-stu-id="1420b-240">If the add-in web of the add-in contains a **CustomAction** or a **ClientWebPart**, and you modify it as part of an update, you must modify the element manifest because that is where these components are defined.</span></span> <span data-ttu-id="1420b-241">(Это исключение из общего правила, которое не разрешает изменять манифест элементов предыдущей версии надстройки при ее обновлении.) Кроме того, необходимо скопировать (не переместить) элемент **ElementManifest** из раздела **ElementManifests** в раздел **ApplyElementManifests**.</span><span class="sxs-lookup"><span data-stu-id="1420b-241">If the add-in web of the add-in contains a  CustomAction or a ClientWebPart, and you modify it as part of an update, then you must modify the element manifest since that is where these components are defined. (This is an exception to the general practice that you should not edit an element manifest from a previous version of the add-in when updating the add-in.) You also have to copy (not move) the  **ElementManifest** element from the **ElementManifests** section to the **ApplyElementManifests** section.</span></span>

#### <a name="example-of-feature-xml-for-upgrading-an-add-in-the-first-time"></a><span data-ttu-id="1420b-242">Пример XML компонента для первого обновления надстройки</span><span class="sxs-lookup"><span data-stu-id="1420b-242">Example of Feature XML for upgrading an add-in the first time</span></span>

<span data-ttu-id="1420b-243">Ниже приведен пример полного файла _{ИмяКомпонента}_.Template.xml для первого обновления надстройки.</span><span class="sxs-lookup"><span data-stu-id="1420b-243">The following is an example of a complete _{FeatureName}_.Template.xml file for a first-time update of an add-in.</span></span> <span data-ttu-id="1420b-244">В этом примере обновленная надстройка включает измененный файл Default.aspx, на который имеются ссылки в файле `Pages\Elements.xml`, и она развертывает три новых файла jQuery, на каждый из которых есть ссылка в файле`Scripts\Elements.xml`.</span><span class="sxs-lookup"><span data-stu-id="1420b-244">The following is an example of a complete  {FeatureName}.Template.xml file for a first time update of an add-in. The updated add-in in this example includes a modified Default.aspx file that is referenced in the  `Pages\Elements.xml` file, and it deploys three new jQuery files, each of which is referenced in the `Scripts\Elements.xml` file. Note that all ElementFiles go in the  ElementManifests section and note how  has been copied (not moved) from the ElementManifests section to the ApplyElementManifests section.</span></span> <span data-ttu-id="1420b-245">Обратите внимание, что все экземпляры **ElementFile** перемещаются в раздел **ElementManifests**. Кроме того, обратите внимание, каким образом выполняется копирование (не перенос) `<ElementManifest Location="Pages\Elements.xml" />` из раздела **ElementManifests** в раздел **ApplyElementManifests**.</span><span class="sxs-lookup"><span data-stu-id="1420b-245">Note that all instances of **ElementFile** go in the **ElementManifests** section, and note how `<ElementManifest Location="Pages\Elements.xml" />` has been copied (not moved) from the **ElementManifests** section to the **ApplyElementManifests** section.</span></span>

```XML
 <Feature xmlns="http://schemas.microsoft.com/sharepoint/" Title="MyApp Feature1" 
       Description="SharePoint Add-in Feature" Id="85d309a8-107e-4a7d-b3a2-51341d3b11ff" 
       Scope="Web" Version="2.0.0.0">
   <ElementManifests>
     <ElementFile Location="Pages\Default.aspx" />
     <ElementManifest Location="Pages\Elements.xml" />
     <ElementFile Location="Content\App.css" />
     <ElementManifest Location="Content\Elements.xml" />
     <ElementFile Location="Images\AppIcon.png" />
     <ElementManifest Location="Images\Elements.xml" />
     <ElementFile Location="Scripts\jquery-3.0.0.intellisense.js" />
     <ElementFile Location="Scripts\jquery-3.0.0.js" />
     <ElementFile Location="Scripts\jquery-3.0.0.min.js" />
   </ElementManifests> 
   <UpgradeActions>
       <VersionRange>      
         <ApplyElementManifests>
           <ElementManifest Location="Pages\Elements.xml" />
           <ElementManifest Location="Scripts\elements.2.0.0.0.xml" />
         </ApplyElementManifests>
       </VersionRange>
   </UpgradeActions>
 </Feature>

```

<span data-ttu-id="1420b-246"><a name="SubsequentUpgrades"> </a></span><span class="sxs-lookup"><span data-stu-id="1420b-246"></span></span>
### <a name="subsequent-updates-of-the-add-in-web"></a><span data-ttu-id="1420b-247">Последующие обновления сайта надстройки</span><span class="sxs-lookup"><span data-stu-id="1420b-247">Subsequent updates of the add-in web</span></span>

<span data-ttu-id="1420b-248">Когда вы обновляете надстройку SharePoint во второй (или третий и т. д.) раз, следует учитывать, что некоторые из ваших клиентов, возможно, не установили предыдущие обновления.</span><span class="sxs-lookup"><span data-stu-id="1420b-248">When you update a SharePoint Add-in for the second (or third, and so on) time, you have to consider that some of your customers may not have made the previous updates.</span></span> <span data-ttu-id="1420b-249">Таким образом, если пользователь отвечает на сообщение "доступно обновление" после развертывания вашего последнего обновления в каталоге надстроек организации или в Магазине Office, экземпляр надстройки пользователя можно обновить с использованием нескольких версий в рамках единого процесса обновления.</span><span class="sxs-lookup"><span data-stu-id="1420b-249">So if a user responds to the "update is available" prompt after your latest update is deployed to the organization's add-in catalog or to the Office Store, their instance of the add-in may be updated through multiple versions in a single update process.</span></span> 

<span data-ttu-id="1420b-250">По большей части это именно то, что нужно: обновить каждую более раннюю версию надстройки до последней версии.</span><span class="sxs-lookup"><span data-stu-id="1420b-250">For the most part, this is exactly what should occur: you want every earlier version of the add-in updated to the latest version.</span></span> <span data-ttu-id="1420b-251">Тем не менее не всегда нужно, чтобы каждое действие обновления компонента сайта надстройки повторялось для каждого экземпляра надстройки.</span><span class="sxs-lookup"><span data-stu-id="1420b-251">But you do not always want every update action for the add-in web Feature to reoccur for every instance of the add-in.</span></span> <span data-ttu-id="1420b-252">Существует ряд действий обновления, которые не должны происходить несколько раз в конкретном экземпляре надстройки.</span><span class="sxs-lookup"><span data-stu-id="1420b-252">There are some update actions that should not occur multiple times on a given add-in instance.</span></span> <span data-ttu-id="1420b-253">Например, если вы добавляете поле к типу контента в одном обновлении, вам не нужно добавлять его снова в следующем обновлении.</span><span class="sxs-lookup"><span data-stu-id="1420b-253">For example, if you add a field to a content type in one update, you do not want that field added again in the next update.</span></span> <span data-ttu-id="1420b-254">В процедуре ниже показано, как с помощью элемента **VersionRange** управлять действиями обновления в зависимости от версии обновляемого компонента.</span><span class="sxs-lookup"><span data-stu-id="1420b-254">The following procedure shows how to use the **VersionRange** element to control which update actions occur based on the version of the Feature that is being updated.</span></span>

#### <a name="to-change-the-add-in-web-feature-on-later-updates"></a><span data-ttu-id="1420b-255">Изменение компонента сайта надстройки в более поздних обновлениях</span><span class="sxs-lookup"><span data-stu-id="1420b-255">To change the add-in web Feature on later updates</span></span>

1. <span data-ttu-id="1420b-256">Откройте файл _ИмяКомпонента_.Template.xml для редактирования, как описано в разделе **Изменение XML компонента** ранее в этой статье, и увеличьте на единицу значение атрибута **Version** (Версия) элемента [Feature](http://msdn.microsoft.com/library/265cd648-1a7e-410f-a1d7-0da8c64b4006%28Office.15%29.aspx) (Компонент).</span><span class="sxs-lookup"><span data-stu-id="1420b-256">Open the  _FeatureName_.Template.xml file for editing as described in the procedure  **To edit the Feature XML** earlier in this article, and increment the **Version** attribute of the [Feature](http://msdn.microsoft.com/library/265cd648-1a7e-410f-a1d7-0da8c64b4006%28Office.15%29.aspx) element. You should use the same version number for the Feature as you used for the add-in.</span></span> <span data-ttu-id="1420b-257">Для компонента следует использовать тот же номер версии, что и для надстройки.</span><span class="sxs-lookup"><span data-stu-id="1420b-257">You should use the same version number for the Feature as you used for the add-in.</span></span>
    
   <span data-ttu-id="1420b-258">В рамках данного примера предположим, что вы ранее обновили надстройку с версии 1.0.0.0 до версии 2.0.0.0 и теперь обновляете ее до версии 3.0.0.0. Для этого присвойте атрибуту **Version** (Версия) значение 3.0.0.0.</span><span class="sxs-lookup"><span data-stu-id="1420b-258">For purposes of a continuing example, let's suppose that you previously updated the add-in from version 1.0.0.0 to version 2.0.0.0, and now you are updating it to version 3.0.0.0. So set the  **Version** attribute to 3.0.0.0.</span></span>    
 
2. <span data-ttu-id="1420b-259">Добавьте новый элемент **VersionRange** под всеми существующими элементами **VersionRange**.</span><span class="sxs-lookup"><span data-stu-id="1420b-259">Add a new  **VersionRange** element under all existing **VersionRange** elements. Do not  add a BeginVersion or EndVersion attribute to this element.</span></span> <span data-ttu-id="1420b-260">*Не* добавляйте атрибут **BeginVersion** или **EndVersion** в этот элемент.</span><span class="sxs-lookup"><span data-stu-id="1420b-260">Add a new  VersionRange element under all existing VersionRange elements. Do *not*  add a **BeginVersion** or **EndVersion** attribute to this element.</span></span>    
 
3. <span data-ttu-id="1420b-261">Присвойте элементу **VersionRange** необходимое значение, как описано в разделе **Первое обновление компонента сайта надстройки** этой статьи, чтобы учесть изменения обновленной версии компонента.</span><span class="sxs-lookup"><span data-stu-id="1420b-261">Populate the  **VersionRange** element as described in the procedure **To update the add-in web Feature the first time** earlier in this article to account for the changes that you have made in this updated version of the Feature. Whenever that procedure refers to the ApplyElementManifests section, treat this as referring to the ApplyElementManifests element that is a child of the VersionRange element that you just added; that is, the lowest  one in the Feature XML file.</span></span> <span data-ttu-id="1420b-262">При этом считайте, что используется не раздел **ApplyElementManifests**, а дочерний элемент **ApplyElementManifests** недавно добавленного элемента **VersionRange**, то есть *самый нижний* элемент в XML-файле компонента.</span><span class="sxs-lookup"><span data-stu-id="1420b-262">Populate the  VersionRange element as described in the procedure To update the add-in web Feature the first time earlier in this article to account for the changes that you have made in this updated version of the Feature. Whenever that procedure refers to the **ApplyElementManifests** section, treat this as referring to the **ApplyElementManifests** element that is a child of the **VersionRange** element that you just added; that is, the *lowest*  one in the Feature XML file.</span></span>
    
4. <span data-ttu-id="1420b-263">Перейдите к предыдущему элементу **VersionRange**, который вы добавили при последнем обновлении надстройки (с версии 1.0.0.0 до версии 2.0.0.0 в этом примере). Добавьте к этому элементу атрибут **EndVersion**.</span><span class="sxs-lookup"><span data-stu-id="1420b-263">Go to the previous **VersionRange** element (the one you added the last time you updated the add-in—from 1.0.0.0 to 2.0.0.0 in the continuing example), and add an **EndVersion** attribute to it.</span></span> <span data-ttu-id="1420b-264">Вам нужно, чтобы обновления в этом элементе **VersionRange** можно было применить к любым версиям надстройки, к которым они еще не применены (версия 1.0.0.0). При этом важно не применять такие обновления повторно к версиям, к которым они уже применены (версия 2.0.0.0).</span><span class="sxs-lookup"><span data-stu-id="1420b-264">You want the upgrade actions in this **VersionRange** to be applied to any versions of the add-in to which they haven't already been applied (version 1.0.0.0), but you don't want them to be reapplied to versions to which they were already applied (version 2.0.0.0).</span></span> <span data-ttu-id="1420b-265">Значение **EndVersion** — *исключительное*, поэтому задайте его для самой ранней версии, к которой вы *не* хотите применять обновления.</span><span class="sxs-lookup"><span data-stu-id="1420b-265">The **EndVersion** value is *exclusive*, so you set it to the lowest version to which you do *not* want the upgrade actions applied.</span></span> <span data-ttu-id="1420b-266">В этом примере вы зададите для данного параметра значение 2.0.0.0.</span><span class="sxs-lookup"><span data-stu-id="1420b-266">In the continuing example, you set it to 2.0.0.0.</span></span> <span data-ttu-id="1420b-267">Теперь ваш файл должен выглядеть приблизительно так:</span><span class="sxs-lookup"><span data-stu-id="1420b-267">Your header file should now resemble the following example.</span></span>
    
     ```XML
     <Feature <!-- Some attributes omitted --> 
                    Version="3.0.0.0">
       <ElementManifests>
         <!-- ElementManifest elements omitted -->
       </ElementManifests>
       <UpgradeActions>
         <VersionRange EndVersion="2.0.0.0">
           <!--  Child elements for upgrade from 1.0.0.0 to 2.0.0.0 go here. -->
         </VersionRange>
         <VersionRange>
           <!--  Child elements for upgrade from 2.0.0.0 to 3.0.0.0 go here. -->
         </VersionRange>
       </UpgradeActions>
     </Feature>
     ```

   <span data-ttu-id="1420b-268">При каждом обновлении компонента придерживайтесь одной процедуры.</span><span class="sxs-lookup"><span data-stu-id="1420b-268">Each time that you upgrade the Feature, follow the same pattern.</span></span> <span data-ttu-id="1420b-269">Добавьте новый элемент **VersionRange** для последних действий обновления.</span><span class="sxs-lookup"><span data-stu-id="1420b-269">Add a new **VersionRange** for the latest update actions.</span></span> <span data-ttu-id="1420b-270">Добавьте элемент **EndVersion** к _предыдущему_ элементу **VersionRange** и назначьте ему номер предыдущей версии.</span><span class="sxs-lookup"><span data-stu-id="1420b-270">Add an **EndVersion** element to the _previous_ **VersionRange** element and set it to the previous version number.</span></span> <span data-ttu-id="1420b-271">В этом примере при обновлении с версии 3.0.0.0 до версии 4.0.0.0 файл должен выглядеть приблизительно так:</span><span class="sxs-lookup"><span data-stu-id="1420b-271">In the continuing example, the file would resemble the following for the update from 3.0.0.0 to 4.0.0.0.</span></span>

     
    ```XML
        <Feature <!-- Some attributes omitted --> 
                       Version="4.0.0.0">
          <ElementManifests>
            <!-- Child elements omitted -->
          </ElementManifests>
          <UpgradeActions>
            <VersionRange EndVersion="2.0.0.0">
               <!-- Child elements for upgrade from 1.0.0.0 to 2.0.0.0 go here. -->
            </VersionRange>
            <VersionRange EndVersion="3.0.0.0">
               <!-- Child elements for upgrade from 2.0.0.0 to 3.0.0.0 go here. -->
            </VersionRange>
            <VersionRange>
               <!-- Child elements for upgrade from 3.0.0.0 to 4.0.0.0 go here. -->
            </VersionRange>
          </UpgradeActions>
        </Feature>
    ```

   <span data-ttu-id="1420b-p140">Обратите внимание, что самый последний элемент **VersionRange** не имеет атрибутов **BeginVersion** или **EndVersion**. Это гарантирует, что действия обновления, проходящие в этом элементе **VersionRange**, применяются ко всем предыдущим версиям компонента, который является тем, который вам нужен, потому что все самые последние изменения имеют ссылки в этом элементе **VersionRange** и ни одно из них еще не произошло для любого из экземпляров компонента.</span><span class="sxs-lookup"><span data-stu-id="1420b-p140">Notice that the most recent **VersionRange** element has no **BeginVersion** or **EndVersion** attributes. This ensures that the upgrade actions that go into this **VersionRange** element are applied to all previous versions of the Feature, which is what you want because all the latest changes are referenced in this **VersionRange**, and none of them have already occurred for any instance of the Feature.</span></span>
    
   <span data-ttu-id="1420b-274">Также обратите внимание, что атрибут **BeginVersion** не используется ни в одном экземпляре элемента **VersionRange**.</span><span class="sxs-lookup"><span data-stu-id="1420b-274">Notice also that the **BeginVersion** attribute is not used in any of the instances of **VersionRange**.</span></span> <span data-ttu-id="1420b-275">Это происходит потому, что значение по умолчанию для атрибута **BeginVersion** — 0.0.0.0. Это необходимое вам значение, так как все действия обновления необходимо применить к каждому экземпляру надстройки, имеющему более раннюю версию, чем указанную в атрибуте **EndVersion**.</span><span class="sxs-lookup"><span data-stu-id="1420b-275">Notice also that the BeginVersion attribute is not used in any of the VersionRanges. This is because the default value for the **BeginVersion** attribute is 0.0.0.0, and that is the value that you want because you want all upgrade actions applied to every instance of the add-in that is earlier than the version that is specified in the **EndVersion** attribute.</span></span>
    
   > [!IMPORTANT]
   > <span data-ttu-id="1420b-276">Элемент **VersionRange** определяет только то, к каким версиям компонента применяются обновления.</span><span class="sxs-lookup"><span data-stu-id="1420b-276">The **VersionRange** element determines only which versions of the Feature the upgrades are applied to.</span></span> <span data-ttu-id="1420b-277">Он не определяет, для каких версий надстройки отображается уведомление о доступности обновления (отправляется только уведомление о номере версии надстройки).</span><span class="sxs-lookup"><span data-stu-id="1420b-277">It does not determine which versions of the add-in get a notification that an update is available (the notification is triggered only by the add-in version number).</span></span> <span data-ttu-id="1420b-278">Если в каталоге надстроек организации или в Магазине Office доступна новая версия надстройки, то в течение 24 часов на плитке каждого установленного экземпляра надстройки (независимо от версии) на странице **Контент сайта** отображается уведомление о доступности обновления.</span><span class="sxs-lookup"><span data-stu-id="1420b-278">Important The VersionRange element determines only which versions of the Feature the upgrades are applied to. It does not determine which versions of the add-in get a notification that an update is available—the notification is triggered only by the add-in version number. Within 24 hours of a new version of the add-in being available in the organization's add-in catalog or the Office Store, every installed instance of the add-in, regardless of version, has the notification that an update is available appear on its tile in the **Site Contents** page.</span></span> <span data-ttu-id="1420b-279">Элемент **VersionRange** не влияет на новый номер версии недавно обновленного компонента или надстройки.</span><span class="sxs-lookup"><span data-stu-id="1420b-279">The **VersionRange** does not affect the new version number of the newly upgraded Feature or the newly updated add-in.</span></span> <span data-ttu-id="1420b-280">Эти два номера всегда изменяются на номер последней версии независимо от того, в какой диапазон версий входил компонент до обновления.</span><span class="sxs-lookup"><span data-stu-id="1420b-280">Those two numbers are always changed to the latest version number, regardless of what version range the Feature was in before the upgrade.</span></span> 

   > <span data-ttu-id="1420b-281">Это еще одна веская причина не использовать атрибут **BeginVersion**.</span><span class="sxs-lookup"><span data-stu-id="1420b-281">This provides another good reason to avoid using a **BeginVersion** attribute.</span></span> <span data-ttu-id="1420b-282">С помощью атрибута **BeginVersion** можно заблокировать некоторые действия обновления для определенных экземпляров надстройки.</span><span class="sxs-lookup"><span data-stu-id="1420b-282">The **BeginVersion** attribute can be used to block some upgrade actions from ever occurring on some add-in instances.</span></span> <span data-ttu-id="1420b-283">Однако этот атрибут не позволяет заблокировать обновление версий компонента или надстройки до последней версии.</span><span class="sxs-lookup"><span data-stu-id="1420b-283">But it cannot block the Feature or add-in versions from being raised to the latest version.</span></span> <span data-ttu-id="1420b-284">Поэтому использование атрибута **BeginVersion** может привести к ситуации, в которой два экземпляра надстройки могут иметь одинаковые номера версий надстройки и компонента ее сайта, но включать разные компоненты на сайтах надстройки.</span><span class="sxs-lookup"><span data-stu-id="1420b-284">So the use of a **BeginVersion** attribute could create a situation in which two instances of your add-in could have the same add-in version number and the same add-in web Feature version number, but have different components in their add-in webs.</span></span>

<span data-ttu-id="1420b-285"><a name="VerifyDeployAppWebComp"> </a></span><span class="sxs-lookup"><span data-stu-id="1420b-285"></span></span>
## <a name="verify-deployment-of-add-in-web-components"></a><span data-ttu-id="1420b-286">Проверка развертывания компонентов сайта надстройки</span><span class="sxs-lookup"><span data-stu-id="1420b-286">Verify deployment of add-in web components</span></span>

<span data-ttu-id="1420b-287">Выполните указанные ниже действия, чтобы проверить развертывание компонента сайта надстройки и его элементов.</span><span class="sxs-lookup"><span data-stu-id="1420b-287">Follow these steps to verify the deployment of the add-in web Feature and its components.</span></span>

### <a name="to-verify-the-provisioning-of-the-add-in-web"></a><span data-ttu-id="1420b-288">Проверка подготовки сайта надстройки</span><span class="sxs-lookup"><span data-stu-id="1420b-288">To verify the provisioning of the add-in web</span></span>

1. <span data-ttu-id="1420b-289">Откройте страницу **Параметры сайта** на хост-сайте.</span><span class="sxs-lookup"><span data-stu-id="1420b-289">Open the  **Site Settings** page of the host web. In the Site Collection Administration section, choose the Site hierarchy link.</span></span> <span data-ttu-id="1420b-290">В разделе **Администрирование семейства веб-сайтов** выберите ссылку **Иерархия сайтов**.</span><span class="sxs-lookup"><span data-stu-id="1420b-290">Open the Site Settings page of the host web. In the **Site Collection Administration** section, choose the **Site hierarchy** link.</span></span>

2. <span data-ttu-id="1420b-p145">На странице **Иерархия сайтов** в списке URL-адресов вы увидите свой сайт надстройки. Не запускайте его. Вместо этого скопируйте URL-адрес и используйте его при выполнении оставшихся шагов.</span><span class="sxs-lookup"><span data-stu-id="1420b-p145">On the **Site Hierarchy** page, you see your add-in web listed by its URL. Do not start it. Instead, copy the URL, and use the URL in the remaining steps.</span></span>

3. <span data-ttu-id="1420b-294">Перейдите по адресу _URL-адрес_веб-приложения_/\_layouts/15/ManageFeatures.aspx. Когда откроется страница **Компоненты сайта**, убедитесь, что компонент присутствует в упорядоченном по алфавиту списке компонентов и имеет состояние **Активен**.</span><span class="sxs-lookup"><span data-stu-id="1420b-294">Navigate to  URL_of_app_web/_layouts/15/ManageFeatures.aspx and, on the  Site Features page that opens, verify that the Feature is a member of the alphabetical list of Features and that its status is Active.</span></span> 

4. <span data-ttu-id="1420b-295">Если компонент сайта надстройки включает пользовательские столбцы сайта, перейдите по адресу _URL-адрес_веб-приложения_/\_layouts/15/mngfield.aspx и на открывшейся странице **Столбцы сайта** убедитесь, что новые пользовательские столбцы сайта включены в список.</span><span class="sxs-lookup"><span data-stu-id="1420b-295">If your add-in web Feature includes custom site columns, open  URL_of_app_web/_layouts/15/mngfield.aspx and, on the  Site Columns page that opens, verify that your new custom site columns are listed.</span></span>

5. <span data-ttu-id="1420b-296">Если в компонент сайта надстройки включены какие-либо пользовательские типы контента, перейдите по адресу _URL-адрес_веб-приложения_/\_layouts/15/mngctype.aspx и на открывшейся странице **Типы контента сайта** убедитесь, что новые типы контента включены в список.</span><span class="sxs-lookup"><span data-stu-id="1420b-296">If your add-in web Feature includes any custom content types, open  URL_of_app_web/_layouts/15/mngctype.aspx and, on the  Site Content Types page that opens, verify that your new content types are listed.</span></span>

6. <span data-ttu-id="1420b-297">Для каждого пользовательского типа контента и каждого типа контента, в который вы добавили столбец, щелкните ссылку для данного типа.</span><span class="sxs-lookup"><span data-stu-id="1420b-297">For each custom content type, and each content type to which you have added a column, choose the link to the content type. On the  Site Content Type page that opens, verify that the content type has the site columns it should have.</span></span> <span data-ttu-id="1420b-298">На открывшейся странице **Тип контента сайта** убедитесь, что в типе контента есть необходимые столбцы сайта.</span><span class="sxs-lookup"><span data-stu-id="1420b-298">For each custom content type, and each content type to which you have added a column, choose the link to the content type. On the  **Site Content Type** page that opens, verify that the content type has the site columns it should have.</span></span>

7. <span data-ttu-id="1420b-299">Если в компонент сайта надстройки включены какие-либо экземпляры списка, перейдите по адресу _URL-адрес_веб-приложения_/\_layouts/15/mcontent.aspx и на открывшейся странице **Библиотеки и списки сайта** убедитесь в наличии ссылки **Настроить "имя_списка"** для каждого пользовательского экземпляра списка.</span><span class="sxs-lookup"><span data-stu-id="1420b-299">If your add-in web Feature includes any list instances, open  URL_of_app_web/_layouts/15/mcontent.aspx and, on the  Site Libraries and Lists page that opens, verify that there is a Customize "name_of_list" link for each custom list instance.</span></span>

8. <span data-ttu-id="1420b-300">Для каждого из этих пользовательских экземпляров списка выберите ссылку **Настроить "имя_списка"** и на странице параметров списка убедитесь, что в списке есть необходимые типы контента и столбцы.</span><span class="sxs-lookup"><span data-stu-id="1420b-300">For each of these custom list instances, choose the  **Customize "name_of_list "** link, and verify on the list settings page that the list has the expected content types and columns.</span></span>
    
   > [!NOTE]
   > <span data-ttu-id="1420b-301">Если на странице нет раздела **Типы контента**, необходимо включить управление типами контента.</span><span class="sxs-lookup"><span data-stu-id="1420b-301">If there is no **Content Types** section on the page, you must enable management of content types.</span></span> <span data-ttu-id="1420b-302">Щелкните ссылку **Дополнительные параметры** и на странице дополнительных параметров включите управление типами контента, а затем нажмите кнопку **OK**.</span><span class="sxs-lookup"><span data-stu-id="1420b-302">Select the **Advanced Settings** link and, on the Advanced Settings page, enable management of content types, and then select **OK**.</span></span> <span data-ttu-id="1420b-303">Вы вернетесь на предыдущую страницу, на которой теперь будет отображаться список раздела **Типы контента**.</span><span class="sxs-lookup"><span data-stu-id="1420b-303">You are returned to the previous page, and there is now a list of **Content Types** section.</span></span>

9. <span data-ttu-id="1420b-304">В верхней части страницы находится **веб-адрес** списка.</span><span class="sxs-lookup"><span data-stu-id="1420b-304">Near the top of the page is the **web address** of the list.</span></span> <span data-ttu-id="1420b-305">Если вы включили примеры элементов в свое определение экземпляров списка, скопируйте адрес и вставьте его в адресную строку браузера, а затем перейдите к списку.</span><span class="sxs-lookup"><span data-stu-id="1420b-305">Near the top of the page is the  web address of the list. If you included sample items in your list instance definition, copy the address and paste it into the address bar of your browser, and then navigate to the list. Verify that the list has the sample items that you created.</span></span> <span data-ttu-id="1420b-306">Убедитесь, что в списке присутствуют созданные вами примеры элементов.</span><span class="sxs-lookup"><span data-stu-id="1420b-306">Verify that the list has the sample items that you created.</span></span>

## <a name="next-steps"></a><span data-ttu-id="1420b-307">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="1420b-307">Next steps</span></span>
<span data-ttu-id="1420b-308"><a name="Next"> </a></span><span class="sxs-lookup"><span data-stu-id="1420b-308"></span></span>

<span data-ttu-id="1420b-309">Вернитесь к разделу [Основные шаги по обновлению надстройки](update-sharepoint-add-ins.md#MajorAppUpgradeSteps) или перейдите непосредственно к одной из указанных ниже статей, чтобы узнать, как обновить компоненты надстройки SharePoint.</span><span class="sxs-lookup"><span data-stu-id="1420b-309">Return to  [Major steps in updating an add-in](update-sharepoint-add-ins.md#MajorAppUpgradeSteps), or go directly to one of the following articles to learn how to update the next major component of your SharePoint Add-in.</span></span>

-  [<span data-ttu-id="1420b-310">Обновление компонентов хост-сайта с надстройкой в SharePoint</span><span class="sxs-lookup"><span data-stu-id="1420b-310">Update host web components in SharePoint</span></span>](update-host-web-components-in-sharepoint.md)
-  [<span data-ttu-id="1420b-311">Создание обработчика для события обновления надстройки SharePoint</span><span class="sxs-lookup"><span data-stu-id="1420b-311">Create a handler for the update event in SharePoint Add-ins</span></span>](create-a-handler-for-the-update-event-in-sharepoint-add-ins.md)
-  <span data-ttu-id="1420b-312">[Обновление удаленных компонентов в надстройках SharePoint](update-remote-components-in-sharepoint-add-ins.md) </span><span class="sxs-lookup"><span data-stu-id="1420b-312">[Update remote components in SharePoint Add-ins](update-remote-components-in-sharepoint-add-ins.md)</span></span>

## <a name="additional-resources"></a><span data-ttu-id="1420b-313">Дополнительные ресурсы</span><span class="sxs-lookup"><span data-stu-id="1420b-313">Additional resources</span></span>
<span data-ttu-id="1420b-314"><a name="bk_addresources"> </a></span><span class="sxs-lookup"><span data-stu-id="1420b-314"></span></span>

-  [<span data-ttu-id="1420b-315">Обновление надстроек SharePoint</span><span class="sxs-lookup"><span data-stu-id="1420b-315">Update SharePoint Add-ins</span></span>](update-sharepoint-add-ins.md)
-  <span data-ttu-id="1420b-316">[Практическое руководство. Добавление элементов к существующему компоненту](http://msdn.microsoft.com/library/b007f419-e0d6-4e3a-a3ae-b8e448656d02%28Office.15%29.aspx) в пакете средств разработки программного обеспечения (SDK) Microsoft SharePoint 2010</span><span class="sxs-lookup"><span data-stu-id="1420b-316">[How to: Add Elements to an Existing Feature](http://msdn.microsoft.com/library/b007f419-e0d6-4e3a-a3ae-b8e448656d02%28Office.15%29.aspx) in the Microsoft SharePoint 2010 Software Development Kit (SDK).</span></span>
-  <span data-ttu-id="1420b-317">[Обновление компонентов](http://msdn.microsoft.com/library/e917f709-6491-4d50-adbe-2ab8f35da990%28Office.15%29.aspx) в пакете средств разработки программного обеспечения (SDK) Microsoft SharePoint 2010</span><span class="sxs-lookup"><span data-stu-id="1420b-317">[Upgrading Features](http://msdn.microsoft.com/library/e917f709-6491-4d50-adbe-2ab8f35da990%28Office.15%29.aspx) in the Microsoft SharePoint 2010 Software Development Kit (SDK).</span></span>

